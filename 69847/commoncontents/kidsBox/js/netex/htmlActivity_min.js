var svgManager=null;(function(d){function c(){this._nextId=0;this._svgs=[];this._settings=[];this._extensions=[];this.regional=[];this.regional[""]={notSupportedText:"This browser does not support SVG",errorLoadingText:"Error loading"};this.region=this.regional[""]}d.extend(c.prototype,{svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_rootClass:b,_connectSVG:function(g,k,j,i){var l=this._nextId++;var h="<"+(d.browser.msie?"embed":"object")+' width="'+g.clientWidth+'" height="'+g.clientHeight+'" type="image/svg+xml" '+(d.browser.msie?"src":"data")+'="blank'+(d.browser.msie?l:"")+".svg"+(d.browser.msie?"":"?"+l)+'"'+(d.browser.msie?"/>":'><p class="svg_error">'+this.region.notSupportedText+"</p></object>");d(g).append(h);g._svgId=l;this._settings[l]=[g,k,j,i];return l},_registerSVG:function(i,g){var h=this._settings[i];var g=this._svgs[i]=new this._rootClass(g,h[0]);g.clear();if(h[1]){g.load(h[1])}if(h[3]){svgs.configure(h[3])}if(h[2]){h[2](h[0])}},getSVGFor:function(g){g=(typeof g=="string"?d(g)[0]:(g.jquery?g[0]:g));return this._svgs[g._svgId]},addExtension:function(h,g){this._extensions[this._extensions.length]=[h,g]}});function b(h,g){this._svg=h;this._container=g;for(var j=0;j<svgManager._extensions.length;j++){var k=svgManager._extensions[j];this[k[0]]=new k[1](this)}}d.extend(b.prototype,{_width:function(){return this._container.clientWidth},_height:function(){return this._container.clientHeight},configure:function(l,h){if(h){for(var k=this._svg.attributes.length-1;k>=0;k--){var g=this._svg.attributes.item(k);if(!(g.nodeName=="onload"||g.nodeName=="version"||g.nodeName.substring(0,5)=="xmlns")){this._svg.attributes.removeNamedItem(g.nodeName)}}}for(var j in l){this._svg.setAttribute(j,l[j])}return this},getElementById:function(g){return this._svg.getElementById(g)},title:function(h,j,g){var i=this._makeNode(h,"title",g||{});i.appendChild(this._svg.ownerDocument.createTextNode(j));return i},describe:function(h,j,g){var i=this._makeNode(h,"desc",g||{});i.appendChild(this._svg.ownerDocument.createTextNode(j));return i},defs:function(h,i,g){if(typeof i!="string"){g=i;i=null}return this._makeNode(h,"defs",d.extend((i?{id:i}:{}),g||{}))},symbol:function(l,m,h,k,g,i,j){return this._makeNode(l,"symbol",d.extend({id:m,viewBox:h+" "+k+" "+g+" "+i},j||{}))},marker:function(j,n,l,k,h,m,g,i){if(typeof g=="object"){i=g;g=null}return this._makeNode(j,"marker",d.extend({id:n,refX:l,refY:k,markerWidth:h,markerHeight:m,orient:g||"auto"},i||{}))},style:function(h,j,g){var i=this._makeNode(h,"style",d.extend({type:"text/css"},g||{}));i.appendChild(this._svg.ownerDocument.createTextNode(this._escapeXML(j)));return i},script:function(j,g,i,h){if(typeof i=="object"){h=i;i=null}var k=this._makeNode(j,"script",d.extend({type:i||"text/javascript"},h||{}));k.appendChild(this._svg.ownerDocument.createTextNode(this._escapeXML(g)));return k},linearGradient:function(n,h,o,i,m,g,l,j){if(typeof i=="object"){j=i;i=null}var k=d.extend({id:h},(i!=null?{x1:i,y1:m,x2:g,y2:l}:{}));return this._gradient(n,"linearGradient",d.extend(k,j||{}),o)},radialGradient:function(o,h,p,m,k,g,l,i,j){if(typeof m=="object"){j=m;m=null}var n=d.extend({id:h},(m!=null?{cx:m,cy:k,r:g,fx:l,fy:i}:{}));return this._gradient(o,"radialGradient",d.extend(n,j||{}),p)},_gradient:function(l,g,k,n){var m=this._makeNode(l,g,k);for(var j=0;j<n.length;j++){var h=n[j];this._makeNode(m,"stop",d.extend({offset:h[0],stop_color:h[1]},(h[2]!=null?{stop_opacity:h[2]}:{})))}return m},pattern:function(p,g,o,m,h,q,n,l,j,r,i){if(typeof n=="object"){i=n;n=null}var k=d.extend({id:g,x:o,y:m,width:h,height:q},(n!=null?{viewBox:n+" "+l+" "+j+" "+r}:{}));return this._makeNode(p,"pattern",d.extend(k,i||{}))},mask:function(k,m,h,l,j,g,i){return this._makeNode(k,"mask",d.extend({id:m,x:h,y:l,width:j,height:g},i||{}))},createPath:function(){return new e()},createText:function(){return new f()},svg:function(o,n,l,g,p,m,k,i,q,h){if(typeof m=="object"){h=m;m=null}var j=d.extend({x:n,y:l,width:g,height:p},(m!=null?{viewBox:m+" "+k+" "+i+" "+q}:{}));return this._makeNode(o,"svg",d.extend(j,h||{}))},group:function(h,i,g){if(typeof i=="object"){g=i;i=null}return this._makeNode(h,"g",d.extend({id:i},g||{}))},use:function(k,h,n,j,g,m,i){if(typeof h=="string"){m=h;i=n;h=n=j=g=null}var l=this._makeNode(k,"use",d.extend({x:h,y:n,width:j,height:g},i||{}));l.setAttributeNS(svgManager.xlinkNS,"href",m);return l},link:function(h,j,g){var i=this._makeNode(h,"a",g);i.setAttributeNS(svgManager.xlinkNS,"href",j);return i},image:function(k,h,n,j,g,m,i){var l=this._makeNode(k,"image",d.extend({x:h,y:n,width:j,height:g},i||{}));l.setAttributeNS(svgManager.xlinkNS,"href",m);return l},path:function(h,i,g){return this._makeNode(h,"path",d.extend({d:(i.path?i.path():i)},g||{}))},rect:function(k,h,l,j,g,i){return this._makeNode(k,"rect",d.extend({x:h,y:l,width:j,height:g},i||{}))},roundrect:function(k,h,n,j,g,m,l,i){return this._makeNode(k,"rect",d.extend({x:h,y:n,width:j,height:g,rx:m,ry:l},i||{}))},circle:function(i,g,k,j,h){return this._makeNode(i,"circle",d.extend({cx:g,cy:k,r:j},h||{}))},ellipse:function(i,g,l,k,j,h){return this._makeNode(i,"ellipse",d.extend({cx:g,cy:l,rx:k,ry:j},h||{}))},line:function(l,h,k,g,i,j){return this._makeNode(l,"line",d.extend({x1:h,y1:k,x2:g,y2:i},j||{}))},polyline:function(i,h,g){return this._poly(i,"polyline",h,g)},polygon:function(i,h,g){return this._poly(i,"polygon",h,g)},_poly:function(l,g,k,j){var m="";for(var h=0;h<k.length;h++){m+=k[h].join()+" "}return this._makeNode(l,g,d.extend({points:m},j||{}))},text:function(i,g,k,j,h){if(typeof g=="string"&&arguments.length<4){j=g;h=k;g=k=null}return this._text(i,"text",j,d.extend({x:(g&&a(g)?g.join(" "):g),y:(k&&a(k)?k.join(" "):k)},h||{}))},textpath:function(h,k,j,g){var i=this._text(h,"textPath",j,g||{});i.setAttributeNS(svgManager.xlinkNS,"href",k);return i},_text:function(p,g,o,l){var k=this._makeNode(p,g,l);if(typeof o=="string"){k.appendChild(k.ownerDocument.createTextNode(o))}else{for(var m=0;m<o._parts.length;m++){var j=o._parts[m];if(j[0]=="tspan"){var h=this._makeNode(k,j[0],j[2]);h.appendChild(k.ownerDocument.createTextNode(j[1]));k.appendChild(h)}else{if(j[0]=="tref"){var h=this._makeNode(k,j[0],j[2]);h.setAttributeNS(svgManager.xlinkNS,"href",j[1]);k.appendChild(h)}else{if(j[0]=="textpath"){var n=j[2].href;j[2].href=null;var h=this._makeNode(k,j[0],j[2]);h.setAttributeNS(svgManager.xlinkNS,"href",n);h.appendChild(k.ownerDocument.createTextNode(j[1]));k.appendChild(h)}else{k.appendChild(k.ownerDocument.createTextNode(j[1]))}}}}}return k},other:function(i,g,h){return this._makeNode(i,other,h||{})},_makeNode:function(i,g,h){i=i||this._svg;var j=this._svg.ownerDocument.createElementNS(svgManager.svgNS,g);for(var g in h){var k=h[g];if(k!=null&&k!=null&&(typeof k!="string"||k!="")){j.setAttribute(this._fromJSName(g),k)}}i.appendChild(j);return j},_fromJSName:function(g){return g.replace(/^_/,"").replace(/_/g,"-")},add:function(h,i){var g=this;h=h||this._svg;i=(i.jquery?i:d(i));i.each(function(){var j=g._cloneAsSVG(this);if(j){h.appendChild(j)}})},_cloneAsSVG:function(k){var j=null;if(k.nodeType==1){j=this._svg.ownerDocument.createElementNS(k.namespaceURI||svgManager.svgNS,this._checkName(k.nodeName));for(var h=0;h<k.attributes.length;h++){var g=k.attributes.item(h);if(g.nodeName!="xmlns"){j.setAttribute(this._checkName(g.nodeName),g.nodeValue)}}for(var h=0;h<k.childNodes.length;h++){var l=this._cloneAsSVG(k.childNodes[h]);if(l){j.appendChild(l)}}}else{if(k.nodeType==3){if(d.trim(k.nodeValue)){j=this._svg.ownerDocument.createTextNode(k.nodeValue)}}else{if(k.nodeType==4){if(d.trim(k.nodeValue)){j=this._svg.ownerDocument.createCDATASection(k.nodeValue)}}}}return j},_checkName:function(g){g=(g.substring(0,1)>="A"&&g.substring(0,1)<="Z"?g.toLowerCase():g);return(g.substring(0,4)=="svg:"?g.substring(4):g)},load:function(i,j){if(!j){this.clear(true)}var g=this;var h=d.ajax({url:i,dataType:"xml",success:function(o){if(d.browser.msie){o.loadXML(h.responseText);if(o.parseError.errorCode!=0){g.text(null,10,20,svgManager.region.errorLoadingText+": "+o.parseError.reason);return}}var m={};for(var n=0;n<o.documentElement.attributes.length;n++){var k=o.documentElement.attributes.item(n);if(!(k.nodeName=="version"||k.nodeName.substring(0,5)=="xmlns")){m[k.nodeName]=k.nodeValue}}g.configure(m,true);var l=o.documentElement.childNodes;for(var n=0;n<l.length;n++){g.add(null,l[n])}},error:function(l,m,k){g.text(null,10,20,svgManager.region.errorLoadingText+": "+m+(k?" "+k.message:""))}})},remove:function(g){g.parentNode.removeChild(g)},clear:function(g){if(g){this.configure({},true)}while(this._svg.firstChild){this._svg.removeChild(this._svg.firstChild)}},toSVG:function(){return this._toSVG(this._svg)},_toSVG:function(k){var j="";if(!k){return j}if(k.nodeType==3){j=k.nodeValue}else{if(k.nodeType==4){j="<![CDATA["+k.nodeValue+"]]>"}else{j="<"+k.nodeName;if(k.attributes){for(var h=0;h<k.attributes.length;h++){var g=k.attributes.item(h);if(!(d.trim(g.nodeValue)==""||g.nodeValue.match(/^\[object/)||g.nodeValue.match(/^function/))){j+=" "+(g.namespaceURI==svgManager.xlinkNS?"xlink:":"")+g.nodeName+'="'+g.nodeValue+'"'}}}if(k.firstChild){j+=">";var l=k.firstChild;while(l){j+=this._toSVG(l);l=l.nextSibling}j+="</"+k.nodeName+">"}else{j+="/>"}}}return j},_escapeXML:function(g){g=g.replace(/&/g,"&amp;");g=g.replace(/</g,"&lt;");g=g.replace(/>/g,"&gt;");return g}});function e(){this._path=""}d.extend(e.prototype,{reset:function(){this._path="";return this},moveTo:function(g,i,h){h=(a(g)?i:h);return this._coords((h?"m":"M"),g,i)},lineTo:function(g,i,h){h=(a(g)?i:h);return this._coords((h?"l":"L"),g,i)},horizTo:function(g,h){this._path+=(h?"h":"H")+g;return this},vertTo:function(h,g){this._path+=(g?"v":"V")+h;return this},curveCTo:function(i,k,h,j,g,m,l){l=(a(i)?k:l);return this._coords((l?"c":"C"),i,k,h,j,g,m)},smoothCTo:function(h,i,g,k,j){j=(a(h)?i:j);return this._coords((j?"s":"S"),h,i,g,k)},curveQTo:function(h,i,g,k,j){j=(a(h)?i:j);return this._coords((j?"q":"Q"),h,i,g,k)},smoothQTo:function(g,i,h){h=(a(g)?i:h);return this._coords((h?"t":"T"),g,i)},_coords:function(k,j,p,h,o,g,n){if(a(j)){for(var l=0;l<j.length;l++){var m=j[l];this._path+=(l==0?k:" ")+m[0]+","+m[1]+(m.length<4?"":" "+m[2]+","+m[3]+(m.length<6?"":" "+m[4]+","+m[5]))}}else{this._path+=k+j+","+p+(h==null?"":" "+h+","+o+(g==null?"":" "+g+","+n))}return this},arcTo:function(k,g,n,q,j,p,o,h){h=(a(k)?g:h);this._path+=(h?"a":"A");if(a(k)){for(var l=0;l<k.length;l++){var m=k[l];this._path+=(l==0?"":" ")+m[0]+","+m[1]+" "+m[2]+" "+(m[3]?"1":"0")+","+(m[4]?"1":"0")+" "+m[5]+","+m[6]}}else{this._path+=k+","+g+" "+n+" "+(q?"1":"0")+","+(j?"1":"0")+" "+p+","+o}return this},close:function(){this._path+="z";return this},path:function(){return this._path}});function f(){this._parts=[]}d.extend(f.prototype,{reset:function(){this._parts=[];return this},string:function(g){this._parts[this._parts.length]=["text",g];return this},span:function(h,g){this._parts[this._parts.length]=["tspan",h,g];return this},ref:function(h,g){this._parts[this._parts.length]=["tref",h,g];return this},path:function(i,h,g){this._parts[this._parts.length]=["textpath",h,d.extend({href:i},g||{})];return this}});d.fn.svg=function(i,h,g){if(typeof i=="function"){g=h;h=i;i=null}if(i&&typeof i=="object"){g=i;i=h=null}if(h&&typeof h=="object"){g=h;h=null}return this.each(function(){svgManager._connectSVG(this,i,h,g)})};function a(g){return(g.constructor&&g.constructor.toString().match(/\Array\(\)/))}svgManager=new c()})(jQuery);
var supportsvg=detectSVG();if((true)){if(!window.CanvasRenderingContext2D){(function(){var q=Math;var r=q.round;var o=q.sin;var x=q.cos;var a=10;var k=a/2;var g={init:function(j){var m=j||document;if(/MSIE/.test(navigator.userAgent)&&!window.opera){var i=this;m.attachEvent("onreadystatechange",function(){i.init_(m)})}},init_:function(B){if(B.readyState=="complete"){if(!B.namespaces.g_vml_){B.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml")}var z=B.createStyleSheet();z.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}";var A=$(".canvas").get();for(var y=0;y<A.length;y++){var m=document.createElement("canvas");m.style.width=$(A[y]).css("width");m.style.height=$(A[y]).css("height");A[y].appendChild(m)}var j=$(".canvas").find("canvas").get();for(var y=0;y<j.length;y++){if(!j[y].getContext){this.initElement(j[y])}}}},fixElement_:function(m){var z=m.outerHTML;var y=m.ownerDocument.createElement(z);if(z.slice(-2)!="/>"){var i="/"+m.tagName;var j;while((j=m.nextSibling)&&j.tagName!=i){j.removeNode()}if(j){j.removeNode()}}m.parentNode.replaceChild(y,m);return y},initElement:function(j){j=this.fixElement_(j);j.getContext=function(){if(this.context_){return this.context_}return this.context_=new l(this)};j.attachEvent("onpropertychange",w);j.attachEvent("onresize",b);var i=j.attributes;if(i.width&&i.width.specified){j.style.width=i.width.nodeValue+"px"}else{j.width=j.clientWidth}if(i.height&&i.height.specified){j.style.height=i.height.nodeValue+"px"}else{j.height=j.clientHeight}return j}};function w(j){var i=j.srcElement;switch(j.propertyName){case"width":i.style.width=i.attributes.width.nodeValue+"px";i.getContext().clearRect();break;case"height":i.style.height=i.attributes.height.nodeValue+"px";i.getContext().clearRect();break}}function b(j){var i=j.srcElement;if(i.firstChild){i.firstChild.style.width=i.clientWidth+"px";i.firstChild.style.height=i.clientHeight+"px"}}g.init();var d=[];for(var u=0;u<16;u++){for(var t=0;t<16;t++){d[u*16+t]=u.toString(16)+t.toString(16)}}function n(){return[[1,0,0],[0,1,0],[0,0,1]]}function e(A,m){var j=n();for(var i=0;i<3;i++){for(var D=0;D<3;D++){var B=0;for(var C=0;C<3;C++){B+=A[i][C]*m[C][D]}j[i][D]=B}}return j}function s(j,i){i.fillStyle=j.fillStyle;i.lineCap=j.lineCap;i.lineJoin=j.lineJoin;i.lineWidth=j.lineWidth;i.miterLimit=j.miterLimit;i.shadowBlur=j.shadowBlur;i.shadowColor=j.shadowColor;i.shadowOffsetX=j.shadowOffsetX;i.shadowOffsetY=j.shadowOffsetY;i.strokeStyle=j.strokeStyle;i.arcScaleX_=j.arcScaleX_;i.arcScaleY_=j.arcScaleY_}function c(m){var A,z=1;m=String(m);if(m.substring(0,3)=="rgb"){var C=m.indexOf("(",3);var j=m.indexOf(")",C+1);var B=m.substring(C+1,j).split(",");A="#";for(var y=0;y<3;y++){A+=d[Number(B[y])]}if((B.length==4)&&(m.substr(3,1)=="a")){z=B[3]}}else{A=m}return[A,z]}function p(i){switch(i){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function l(j){this.m_=n();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=a*1;this.globalAlpha=1;this.canvas=j;var i=j.ownerDocument.createElement("div");i.style.width=j.clientWidth+"px";i.style.height=j.clientHeight+"px";i.style.overflow="hidden";i.style.position="absolute";j.appendChild(i);this.element_=i;this.arcScaleX_=1;this.arcScaleY_=1}var h=l.prototype;h.clearRect=function(){this.element_.innerHTML="";this.currentPath_=[]};h.beginPath=function(){this.currentPath_=[]};h.moveTo=function(j,i){this.currentPath_.push({type:"moveTo",x:j,y:i});this.currentX_=j;this.currentY_=i};h.lineTo=function(j,i){this.currentPath_.push({type:"lineTo",x:j,y:i});this.currentX_=j;this.currentY_=i};h.bezierCurveTo=function(m,i,A,z,y,j){this.currentPath_.push({type:"bezierCurveTo",cp1x:m,cp1y:i,cp2x:A,cp2y:z,x:y,y:j});this.currentX_=y;this.currentY_=j};h.quadraticCurveTo=function(C,B,A,z){var j=this.currentX_+2/3*(C-this.currentX_);var i=this.currentY_+2/3*(B-this.currentY_);var y=j+(A-this.currentX_)/3;var m=i+(z-this.currentY_)/3;this.bezierCurveTo(j,i,y,m,A,z)};h.arc=function(B,z,A,y,j,m){A*=a;var F=m?"at":"wa";var C=B+(x(y)*A)-k;var E=z+(o(y)*A)-k;var i=B+(x(j)*A)-k;var D=z+(o(j)*A)-k;if(C==i&&!m){C+=0.125}this.currentPath_.push({type:F,x:B,y:z,radius:A,xStart:C,yStart:E,xEnd:i,yEnd:D})};h.rect=function(m,j,i,y){this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+y);this.lineTo(m,j+y);this.closePath()};h.strokeRect=function(m,j,i,y){this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+y);this.lineTo(m,j+y);this.closePath();this.stroke()};h.fillRect=function(m,j,i,y){this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+y);this.lineTo(m,j+y);this.closePath();this.fill()};h.createLinearGradient=function(j,y,i,m){var z=new v("gradient");return z};h.createRadialGradient=function(y,A,m,j,z,i){var B=new v("gradientradial");B.radius1_=m;B.radius2_=i;B.focus_.x=y;B.focus_.y=A;return B};h.drawImage=function(L,m){var D,B,F,S,J,G,N,U;var E=L.runtimeStyle.width;var K=L.runtimeStyle.height;L.runtimeStyle.width="auto";L.runtimeStyle.height="auto";var C=L.width;var Q=L.height;L.runtimeStyle.width=E;L.runtimeStyle.height=K;if(arguments.length==3){D=arguments[1];B=arguments[2];J=G=0;N=F=C;U=S=Q}else{if(arguments.length==5){D=arguments[1];B=arguments[2];F=arguments[3];S=arguments[4];J=G=0;N=C;U=Q}else{if(arguments.length==9){J=arguments[1];G=arguments[2];N=arguments[3];U=arguments[4];D=arguments[5];B=arguments[6];F=arguments[7];S=arguments[8]}else{throw"Invalid number of arguments"}}}var T=this.getCoords_(D,B);var y=N/2;var j=U/2;var R=[];var i=10;var A=10;R.push(" <g_vml_:group",' coordsize="',a*i,",",a*A,'"',' coordorigin="0,0"',' style="width:',i,";height:",A,";position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var z=[];z.push("M11='",this.m_[0][0],"',","M12='",this.m_[1][0],"',","M21='",this.m_[0][1],"',","M22='",this.m_[1][1],"',","Dx='",r(T.x/a),"',","Dy='",r(T.y/a),"'");var P=T;var O=this.getCoords_(D+F,B);var M=this.getCoords_(D,B+S);var I=this.getCoords_(D+F,B+S);P.x=Math.max(P.x,O.x,M.x,I.x);P.y=Math.max(P.y,O.y,M.y,I.y);R.push("padding:0 ",r(P.x/a),"px ",r(P.y/a),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",z.join(""),", sizingmethod='clip');")}else{R.push("top:",r(T.y/a),"px;left:",r(T.x/a),"px;")}R.push(' ">','<g_vml_:image src="',L.src,'"',' style="width:',a*F,";"," height:",a*S,';"',' cropleft="',J/C,'"',' croptop="',G/Q,'"',' cropright="',(C-J-N)/C,'"',' cropbottom="',(Q-G-U)/Q,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",R.join(""))};h.stroke=function(V){var C=[];var B=false;var Z=c(V?this.fillStyle:this.strokeStyle);var R=Z[0];var y=Z[1]*this.globalAlpha;var m=10;var G=10;C.push("<g_vml_:shape",' fillcolor="',R,'"',' filled="',Boolean(V),'"',' style="position:absolute;width:',m,";height:",G,';"',' coordorigin="0 0" coordsize="',a*m," ",a*G,'"',' stroked="',!V,'"',' strokeweight="',this.lineWidth,'"',' strokecolor="',R,'"',' path="');var F=false;var Q={x:null,y:null};var S={x:null,y:null};for(var T=0;T<this.currentPath_.length;T++){var M=this.currentPath_[T];if(M.type=="moveTo"){C.push(" m ");var Y=this.getCoords_(M.x,M.y);C.push(r(Y.x),",",r(Y.y))}else{if(M.type=="lineTo"){C.push(" l ");var Y=this.getCoords_(M.x,M.y);C.push(r(Y.x),",",r(Y.y))}else{if(M.type=="close"){C.push(" x ")}else{if(M.type=="bezierCurveTo"){C.push(" c ");var Y=this.getCoords_(M.x,M.y);var P=this.getCoords_(M.cp1x,M.cp1y);var N=this.getCoords_(M.cp2x,M.cp2y);C.push(r(P.x),",",r(P.y),",",r(N.x),",",r(N.y),",",r(Y.x),",",r(Y.y))}else{if(M.type=="at"||M.type=="wa"){C.push(" ",M.type," ");var Y=this.getCoords_(M.x,M.y);var I=this.getCoords_(M.xStart,M.yStart);var A=this.getCoords_(M.xEnd,M.yEnd);C.push(r(Y.x-this.arcScaleX_*M.radius),",",r(Y.y-this.arcScaleY_*M.radius)," ",r(Y.x+this.arcScaleX_*M.radius),",",r(Y.y+this.arcScaleY_*M.radius)," ",r(I.x),",",r(I.y)," ",r(A.x),",",r(A.y))}}}}}if(Y){if(Q.x==null||Y.x<Q.x){Q.x=Y.x}if(S.x==null||Y.x>S.x){S.x=Y.x}if(Q.y==null||Y.y<Q.y){Q.y=Y.y}if(S.y==null||Y.y>S.y){S.y=Y.y}}}C.push(' ">');if(typeof this.fillStyle=="object"){var L={x:"50%",y:"50%"};var O=(S.x-Q.x);var J=(S.y-Q.y);var X=(O>J)?O:J;L.x=r((this.fillStyle.focus_.x/O)*100+50)+"%";L.y=r((this.fillStyle.focus_.y/J)*100+50)+"%";var E=[];if(this.fillStyle.type_=="gradientradial"){var U=(this.fillStyle.radius1_/X*100);var K=(this.fillStyle.radius2_/X*100)-U}else{var U=0;var K=100}var j={offset:null,color:null};var z={offset:null,color:null};this.fillStyle.colors_.sort(function(H,i){return H.offset-i.offset});for(var T=0;T<this.fillStyle.colors_.length;T++){var D=this.fillStyle.colors_[T];E.push((D.offset*K)+U,"% ",D.color,",");if(D.offset>j.offset||j.offset==null){j.offset=D.offset;j.color=D.color}if(D.offset<z.offset||z.offset==null){z.offset=D.offset;z.color=D.color}}E.pop();C.push("<g_vml_:fill",' color="',z.color,'"',' color2="',j.color,'"',' type="',this.fillStyle.type_,'"',' focusposition="',L.x,", ",L.y,'"',' colors="',E.join(""),'"',' opacity="',y,'" />')}else{if(V){C.push('<g_vml_:fill color="',R,'" opacity="',y,'" />')}else{C.push("<g_vml_:stroke",' opacity="',y,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',p(this.lineCap),'"',' weight="',this.lineWidth,'px"',' color="',R,'" />')}}C.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",C.join(""));this.currentPath_=[]};h.fill=function(){this.stroke(true)};h.closePath=function(){this.currentPath_.push({type:"close"})};h.getCoords_=function(j,i){return{x:a*(j*this.m_[0][0]+i*this.m_[1][0]+this.m_[2][0])-k,y:a*(j*this.m_[0][1]+i*this.m_[1][1]+this.m_[2][1])-k}};h.save=function(){var i={};s(this,i);this.aStack_.push(i);this.mStack_.push(this.m_);this.m_=e(n(),this.m_)};h.restore=function(){s(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};h.translate=function(m,j){var i=[[1,0,0],[0,1,0],[m,j,1]];this.m_=e(i,this.m_)};h.rotate=function(j){var y=x(j);var m=o(j);var i=[[y,m,0],[-m,y,0],[0,0,1]];this.m_=e(i,this.m_)};h.scale=function(m,j){this.arcScaleX_*=m;this.arcScaleY_*=j;var i=[[m,0,0],[0,j,0],[0,0,1]];this.m_=e(i,this.m_)};h.clip=function(){};h.arcTo=function(){};h.createPattern=function(){return new f};function v(i){this.type_=i;this.radius1_=0;this.radius2_=0;this.colors_=[];this.focus_={x:0,y:0}}v.prototype.addColorStop=function(j,i){i=c(i);this.colors_.push({offset:1-j,color:i})};function f(){}G_vmlCanvasManager=g;CanvasRenderingContext2D=l;CanvasGradient=v;CanvasPattern=f})()}}(function(a){a.fn._mkDiv=function(b,f,c,e,d){a(this).append('<div style="position:absolute;left:'+(b)+"px;top:"+(f)+"px;width:"+c+"px;height:"+e+"px;margin: 0 0 0 0; padding: 0 0 0 0;clip:rect(0,"+c+"px,"+e+"px,0);opacity:"+d.opacity+";background-color: "+d.color+";background-image: url("+d.backgroundImage+");background-position: "+(-(b-d.xorigin))+"px "+(-(f-d.yorigin))+'px;"></div>')};a.fn._mkLin=function(f,o,c,m,h){if(f>c){var l=c;var i=m;c=f;m=o;f=l;o=i}var s=c-f,r=Math.abs(m-o),n=f,k=o,q=(o>m)?-1:1;if(s>=r){var b=r<<1,j=b-(s<<1),e=b-s,g=n;while(s>0){--s;++n;if(e>0){a(this)._mkDiv(g,k,n-g,1,h);k+=q;e+=j;g=n}else{e+=b}}a(this)._mkDiv(g,k,c-g+1,1,h)}else{var b=s<<1,j=b-(r<<1),e=b-r,d=k;if(m<=o){while(r>0){--r;if(e>0){a(this)._mkDiv(n++,k,1,d-k+1,h);k+=q;e+=j;d=k}else{k+=q;e+=b}}a(this)._mkDiv(c,m,1,d-m+1,h)}else{while(r>0){--r;k+=q;if(e>0){a(this)._mkDiv(n++,d,1,k-d,h);e+=j;d=k}else{e+=b}}a(this)._mkDiv(c,d,1,m-d+1,h)}}return a(this)};a.fn._mkLin2D=function(t,c,r,b,u){if(t>r){var g=r;var o=b;r=t;b=c;t=g;c=o}var k=r-t,j=Math.abs(b-c),i=t,h=c,n=(c>b)?-1:1;var l=u.stroke;if(k>=j){if(k>0&&l-3>0){var v=(l*k*Math.sqrt(1+j*j/(k*k))-k-(l>>1)*j)/k;v=(!(l-4)?Math.ceil(v):Math.round(v))+1}else{var v=l}var w=Math.ceil(l/2);var q=j<<1,f=q-(k<<1),m=q-k,e=i;while(k>0){--k;++i;if(m>0){a(this)._mkDiv(e,h,i-e+w,v,u);h+=n;m+=f;e=i}else{m+=q}}a(this)._mkDiv(e,h,r-e+w+1,v,u)}else{if(l-3>0){var v=(l*j*Math.sqrt(1+k*k/(j*j))-(l>>1)*k-j)/j;v=(!(l-4)?Math.ceil(v):Math.round(v))+1}else{var v=l}var w=Math.round(l/2);var q=k<<1,f=q-(j<<1),m=q-j,d=h;if(b<=c){++w;while(j>0){--j;if(m>0){a(this)._mkDiv(i++,h,v,d-h+w,u);h+=n;m+=f;d=h}else{h+=n;m+=q}}a(this)._mkDiv(r,b,v,d-b+w,u)}else{while(j>0){--j;h+=n;if(m>0){a(this)._mkDiv(i++,d,v,h-d+w,u);m+=f;d=h}else{m+=q}}a(this)._mkDiv(r,d,v,b-d+w+1,u)}}return a(this)};a.fn._mkLinDott=function(e,m,c,k,f){if(e>c){var j=c;var g=k;c=e;k=m;e=j;m=g}var r=c-e,q=Math.abs(k-m),l=e,i=m,o=(m>k)?-1:1,n=true;if(r>=q){var b=q<<1,h=b-(r<<1),d=b-r;while(r>0){--r;if(n){a(this)._mkDiv(l,i,1,1,f)}n=!n;if(d>0){i+=o;d+=h}else{d+=b}++l}}else{var b=r<<1,h=b-(q<<1),d=b-q;while(q>0){--q;if(n){a(this)._mkDiv(l,i,1,1,f)}n=!n;i+=o;if(d>0){++l;d+=h}else{d+=b}}}if(n){a(this)._mkDiv(l,i,1,1,f)}return a(this)};a.fn._mkOv=function(g,q,u,s,A){var C=(++u)>>1,B=(++s)>>1,o=u&1,f=s&1,e=g+C,d=q+B,l=0,k=B,j=0,i=B,t=(C*C)<<1,r=t<<1,p=(B*B)<<1,n=p<<1,v=(t>>1)*(1-(B<<1))+p,c=(p>>1)-t*((B<<1)-1),m,z;while(k>0){if(v<0){v+=p*((l<<1)+3);c+=n*(++l)}else{if(c<0){v+=p*((l<<1)+3)-r*(k-1);c+=n*(++l)-t*(((k--)<<1)-3);m=l-j;z=i-k;if((m&2)&&(z&2)){a(this)._mkOvQds(e,d,l-2,k+2,1,1,o,f,A);a(this)._mkOvQds(e,d,l-1,k+1,1,1,o,f,A)}else{a(this)._mkOvQds(e,d,l-1,i,m,z,o,f,A)}j=l;i=k}else{c-=t*((k<<1)-3);v-=r*(--k)}}}m=C-j+1;z=(i<<1)+f;k=d-i;a(this)._mkDiv(e-C,k,m,z,A);a(this)._mkDiv(e+j+o-1,k,m,z,A);return a(this)};a.fn._mkOv2D=function(g,m,c,d,Q){var L=Q.stroke;c+=L+1;d+=L+1;var W=c>>1,U=d>>1,T=c&1,E=d&1,q=g+W,p=m+U,J=0,G=U,B=(W*W)<<1,z=B<<1,k=(U*U)<<1,f=k<<1,n=(B>>1)*(1-(U<<1))+k,S=(k>>1)-B*((U<<1)-1);if(L-4<0&&(!(L-2)||c-51>0&&d-51>0)){var u=0,t=U,K,P,C;while(G>0){if(n<0){n+=k*((J<<1)+3);S+=f*(++J)}else{if(S<0){n+=k*((J<<1)+3)-z*(G-1);S+=f*(++J)-B*(((G--)<<1)-3);K=J-u;P=t-G;if(K-1){C=K+1+(L&1);P=L}else{if(P-1){C=L;P+=1+(L&1)}else{C=P=L}}a(this)._mkOvQds(q,p,J-1,t,C,P,T,E,Q);u=J;t=G}else{S-=B*((G<<1)-3);n-=z*(--G)}}}a(this)._mkDiv(q-W,p-t,L,(t<<1)+E,Q);a(this)._mkDiv(q+W+T-L,p-t,L,(t<<1)+E,Q)}else{var X=(c-(L<<1))>>1,V=(d-(L<<1))>>1,I=0,F=V,A=(X*X)<<1,v=A<<1,j=(V*V)<<1,e=j<<1,o=(A>>1)*(1-(V<<1))+j,R=(j>>1)-A*((V<<1)-1),H=new Array(),D=new Array(),M=new Array();H[0]=0;D[0]=U;M[0]=V-1;while(G>0){if(n<0){H[H.length]=J;D[D.length]=G;n+=k*((J<<1)+3);S+=f*(++J)}else{if(S<0){H[H.length]=J;n+=k*((J<<1)+3)-z*(G-1);S+=f*(++J)-B*(((G--)<<1)-3);D[D.length]=G}else{S-=B*((G<<1)-3);n-=z*(--G)}}if(F>0){if(o<0){o+=j*((I<<1)+3);R+=e*(++I);M[M.length]=F-1}else{if(R<0){o+=j*((I<<1)+3)-v*(F-1);R+=e*(++I)-A*(((F--)<<1)-3);M[M.length]=F-1}else{R-=A*((F<<1)-3);o-=v*(--F);M[M.length-1]--}}}}var u=-T,t=U,r=M[0],N=H.length,K,P;for(var O=0;O<N;O++){if(typeof M[O]!="undefined"){if(M[O]<r||D[O]<t){J=H[O];a(this)._mkOvQds(q,p,J,t,J-u,t-r,T,E,Q);u=J;t=D[O];r=M[O]}}else{J=H[O];a(this)._mkDiv(q-J,p-t,1,(t<<1)+E,Q);a(this)._mkDiv(q+u+T,p-t,1,(t<<1)+E,Q);u=J;t=D[O]}}a(this)._mkDiv(q-W,p-t,1,(t<<1)+E,Q);a(this)._mkDiv(q+u+T,p-t,1,(t<<1)+E,Q)}return a(this)};a.fn._mkOvDott=function(g,n,s,q,u){var w=(++s)>>1,v=(++q)>>1,l=s&1,f=q&1,j=f^1,e=g+w,d=n+v,i=0,h=v,r=(w*w)<<1,o=r<<1,m=(v*v)<<1,k=m<<1,t=(r>>1)*(1-(v<<1))+m,c=(m>>1)-r*((v<<1)-1),p=true;while(h>0){if(t<0){t+=m*((i<<1)+3);c+=k*(++i)}else{if(c<0){t+=m*((i<<1)+3)-o*(h-1);c+=k*(++i)-r*(((h--)<<1)-3)}else{c-=r*((h<<1)-3);t-=o*(--h)}}if(p&&h>=j){a(this)._mkOvQds(e,d,i,h,1,1,l,f,u)}p=!p}return a(this)};a.fn._mkRect=function(b,g,c,f,e){var d=e.stroke;a(this)._mkDiv(b,g,c,d,e);a(this)._mkDiv(b+c,g,d,f,e);a(this)._mkDiv(b,g+f,c+d,d,e);a(this)._mkDiv(b,g+d,d,f-d,e);return a(this)};a.fn._mkRectDott=function(b,f,c,e,d){a(this).drawLine(b,f,b+c,f,d);a(this).drawLine(b+c,f,b+c,f+e,d);a(this).drawLine(b,f+e,b+c,f+e,d);a(this).drawLine(b,f,b,f+e,d);return a(this)};a.fn.drawLine=function(c,j,b,i,f){f=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},f);f.xorigin=c;f.yorigin=j;if(supportsvg.support&&!true&&supportsvg.support!="Builtin"){var h="id"+parseInt(Math.random()*1000000);a(this).append("<div id ='"+h+"' style='position: absolute;top: 0; left: 0;'></div>");a("#"+h).css("width",a(this).css("width")).css("height",a(this).css("height")).svg(function(){var e=svgManager.getSVGFor("#"+h);var l=e.group(null,{stroke:f.color,stroke_width:f.stroke});e.line(l,c,j,b,i)})}else{if(!a(this).find("canvas").get(0)){a(this).append("<canvas  width='"+a(this).css("width")+"' height='"+a(this).css("height")+"' style='position: absolute; top: 0; left: 0;'></canvas>")}var d=a(this).find("canvas").get(0);try{var k=d.getContext("2d");k.globalAlpha=f.opacity;if(f.stroke=="dotted"){k.lineWidth=0.5}else{if(f.stroke=="dotted"){k.lineWidth=0.5}else{k.lineWidth=f.stroke}}k.beginPath();k.strokeStyle=f.color;k.moveTo(c,j);k.lineTo(b,i);k.closePath();k.stroke()}catch(g){if(f.stroke=="dotted"){a(this)._mkLinDott(c,j,b,i,f)}else{if(f.stroke-1>0){a(this)._mkLin2D(c,j,b,i,f)}else{a(this)._mkLin(c,j,b,i,f)}}}}return a(this)};a.fn.drawRect=function(c,j,b,i,f){f=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},f);f.xorigin=c;f.yorigin=j;if(supportsvg.support&&!true){var h="id"+parseInt(Math.random()*1000000);a(this).append("<div id ='"+h+"' style='position: absolute;top: 0; left: 0;'></div>");a("#"+h).css("width",a(this).css("width")).css("height",a(this).css("height")).svg(function(){var e=svgManager.getSVGFor("#"+h);var l=e.group(null,{stroke:f.color,stroke_width:f.stroke});e.rect(null,c,j,b,i,{fill:"none",stroke:f.color,stroke_width:f.stroke})})}else{if(!a(this).find("canvas").get(0)){a(this).append("<canvas  width='"+a(this).css("width")+"' height='"+a(this).css("height")+"' style='position: absolute; top: 0; left: 0;'></canvas>")}var d=a(this).find("canvas").get(0);try{var k=d.getContext("2d");k.globalAlpha=f.opacity;if(f.stroke=="dotted"){k.lineWidth=0.5}else{k.lineWidth=f.stroke}k.strokeStyle=f.color;k.strokeRect(c,j,b,i);k.closePath();k.stroke()}catch(g){if(f.stroke=="dotted"){a(this)._mkRectDott(c,j,b,i,f)}else{if(f.stroke-1>0){a(this)._mkRect(c,j,b,i,f)}else{a(this)._mkRect(c,j,b,i,f)}}}}return a(this)};a.fn.drawPolyline=function(b,e,d){d=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},d);d.xorigin=b[0];d.yorigin=e[0];for(var c=b.length-1;c;){--c;a(this).drawLine(b[c],e[c],b[c+1],e[c+1],d)}return a(this)};a.fn.fillRect=function(k,j,l,f,c){c=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},c);c.xorigin=k;c.yorigin=j;if(supportsvg.support&&!true){var i="id"+parseInt(Math.random()*1000000);a(this).append("<div id ='"+i+"' style='position: absolute;top: 0; left: 0;'></div>");a("#"+i).css("width",a(this).css("width")).css("height",a(this).css("height")).svg(function(){var e=svgManager.getSVGFor("#"+i);var h=e.group(null,{stroke:c.color,stroke_width:c.stroke});e.rect(null,k,j,l,f,{fill:c.color})})}else{if(!a(this).find("canvas").get(0)){a(this).append("<canvas  width='"+a(this).css("width")+"' height='"+a(this).css("height")+"' style='position: absolute; top: 0; left: 0;'></canvas>")}var b=a(this).find("canvas").get(0);try{var m=b.getContext("2d");m.globalAlpha=c.opacity;if(c.stroke=="dotted"){m.lineWidth=0.5}else{m.lineWidth=c.stroke}if(c.backgroundImage!="none"){var d=new Image();d.src=c.backgroundImage;if(true){erreur}else{d.onload=function(){var e=m.createPattern(d,"repeat");m.fillStyle=e;m.fillRect(k,j,l,f)}}}else{m.fillStyle=c.color;m.fillRect(k,j,l,f)}}catch(g){a(this)._mkDiv(k,j,l,f,c)}}return a(this)};a.fn.drawPolygon=function(b,d,c){c=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},c);c.xorigin=b[0];c.yorigin=d[0];a(this).drawPolyline(b,d,c);a(this).drawLine(b[b.length-1],d[b.length-1],b[0],d[0],c);return a(this)};a.fn.drawEllipse=function(q,p,r,l,j){j=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},j);j.xorigin=q;j.yorigin=p;if(!a(this).find("canvas").get(0)){a(this).append("<canvas  width='"+a(this).css("width")+"' height='"+a(this).css("height")+"' style='position: absolute; top: 0; left: 0;'></canvas>")}var d=a(this).find("canvas").get(0);if(supportsvg.support&&!true){var n="id"+parseInt(Math.random()*1000000);a(this).append("<div id ='"+n+"' style='position: absolute;top: 0; left: 0;'></div>");a("#"+n).css("width",a(this).css("width")).css("height",a(this).css("height")).svg(function(){var e=svgManager.getSVGFor("#"+n);var h=e.group(null,{stroke:j.color,stroke_width:j.stroke});e.ellipse(null,q+r/2,p+l/2,r/2,l/2,{fill:"none",stroke:j.color,stroke_width:j.stroke})})}else{try{var s=d.getContext("2d");var g=q,o=p;r+=q;l+=p;s.globalAlpha=j.opacity;if(j.stroke=="dotted"){s.lineWidth=0.5}else{s.lineWidth=j.stroke}var f=4*((Math.sqrt(2)-1)/3);var c=(r-g)/2;var b=(l-o)/2;var k=g+c;var i=o+b;s.beginPath();s.strokeStyle=j.color;s.moveTo(k,i-b);s.bezierCurveTo(k+(f*c),i-b,k+c,i-(f*b),k+c,i);s.bezierCurveTo(k+c,i+(f*b),k+(f*c),i+b,k,i+b);s.bezierCurveTo(k-(f*c),i+b,k-c,i+(f*b),k-c,i);s.bezierCurveTo(k-c,i-(f*b),k-(f*c),i-b,k,i-b);s.closePath();s.stokeStyle=j.color;s.stroke()}catch(m){if(j.stroke=="dotted"){a(this)._mkOvDott(q,p,r,l,j)}else{if(j.stroke-1>0){a(this)._mkOv2D(q,p,r,l,j)}else{a(this)._mkOv(q,p,r,l,j)}}}}return a(this)};a.fn.fillEllipse=function(l,A,r,E,H){H=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},H);H.xorigin=l;H.yorigin=A;if(supportsvg.support&&!true){var K="id"+parseInt(Math.random()*1000000);a(this).append("<div id ='"+K+"' style='position: absolute;top: 0; left: 0;'></div>");a("#"+K).css("width",a(this).css("width")).css("height",a(this).css("height")).svg(function(){var b=svgManager.getSVGFor("#"+K);var e=b.group(null,{stroke:H.color,stroke_width:H.stroke});b.ellipse(null,l+r/2,A+E/2,r/2,E/2,{fill:H.color})})}else{if(!a(this).find("canvas").get(0)){a(this).append("<canvas  width='"+a(this).css("width")+"' height='"+a(this).css("height")+"' style='position: absolute; top: 0; left: 0;'></canvas>")}var i=a(this).find("canvas").get(0);try{var D=i.getContext("2d");r+=l;E+=A;D.globalAlpha=H.opacity;if(H.stroke=="dotted"){D.lineWidth=0.5}else{D.lineWidth=H.stroke}if(H.backgroundImage!="none"){var L=new Image();L.src=H.backgroundImage;a(L).ready(function(){var y=D.createPattern(L,"repeat");D.moveTo(l,A);var h=4*((Math.sqrt(2)-1)/3);var w=(r-l)/2;var e=(E-A)/2;var b=l+w;var x=A+e;D.beginPath();D.fillStyle=y;D.globalAlpha=H.opacity;if(H.stroke=="dotted"){D.lineWidth=0.5}else{D.lineWidth=H.stroke}D.moveTo(b,x-e);D.bezierCurveTo(b+(h*w),x-e,b+w,x-(h*e),b+w,x);D.bezierCurveTo(b+w,x+(h*e),b+(h*w),x+e,b,x+e);D.bezierCurveTo(b-(h*w),x+e,b-w,x+(h*e),b-w,x);D.bezierCurveTo(b-w,x-(h*e),b-(h*w),x-e,b,x-e);D.closePath();D.fill()})}else{D.fillStyle=H.color;D.globalAlpha=H.opacity;if(H.stroke=="dotted"){D.lineWidth=0.5}else{D.lineWidth=H.stroke}D.fillStyle=H.color;D.beginPath();D.moveTo(l,A);var d=4*((Math.sqrt(2)-1)/3);var n=(r-l)/2;var m=(E-A)/2;var g=l+n;var f=A+m;D.beginPath();D.moveTo(g,f-m);D.bezierCurveTo(g+(d*n),f-m,g+n,f-(d*m),g+n,f);D.bezierCurveTo(g+n,f+(d*m),g+(d*n),f+m,g,f+m);D.bezierCurveTo(g-(d*n),f+m,g-n,f+(d*m),g-n,f);D.bezierCurveTo(g-n,f-(d*m),g-(d*n),f-m,g,f-m);D.closePath();D.fill()}}catch(G){var J=r>>1,I=E>>1,s=r&1,j=E&1,g=l+J,f=A+I,p=0,o=I,k=I,B=(J*J)<<1,z=B<<1,u=(I*I)<<1,q=u<<1,C=(B>>1)*(1-(I<<1))+u,c=(u>>1)-B*((I<<1)-1),v,t,F;if(r){while(o>0){if(C<0){C+=u*((p<<1)+3);c+=q*(++p)}else{if(c<0){C+=u*((p<<1)+3)-z*(o-1);v=g-p;t=(p<<1)+s;c+=q*(++p)-B*(((o--)<<1)-3);F=k-o;a(this)._mkDiv(v,f-k,t,F,H);a(this)._mkDiv(v,f+o+j,t,F,H);k=o}else{c-=B*((o<<1)-3);C-=z*(--o)}}}}a(this)._mkDiv(g-J,f-k,r,(k<<1)+j,H)}}return a(this)};a.fn.fillArc=function(L,G,F,D,s,I){var O=F;I=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},I);I.xorigin=L;I.yorigin=G;if(supportsvg.support&&!true){var E="id"+parseInt(Math.random()*1000000);a(this).append("<div id ='"+E+"' style='position: absolute;top: 0; left: 0;'></div>");a("#"+E).css("width",a(this).css("width")).css("height",a(this).css("height")).svg(function(){var S=svgManager.getSVGFor("#"+E);var T=S.group(null,{stroke:I.color,stroke_width:I.stroke});var Q=L+F/2,y=G+F/2,b=F/2,X=Math.PI+(((D+90)%360)*Math.PI/180),R=Math.PI+(((s+90)%360)*Math.PI/180);var P=0;if(R-X>Math.PI){P=1}var x=Q+b*Math.sin(X);var W=y-b*Math.cos(X);var e=Q+b*Math.sin(R);var V=y-b*Math.cos(R);var U="M "+Q+","+y+" L "+x+","+W+" A "+b+","+b+" 0 "+P+" 1 "+e+","+V+" Z";S.path(null,U,{fill:I.color,stroke_linejoin:"round",background_fill:"none"})})}else{if(!a(this).find("canvas").get(0)){a(this).append("<canvas  width='"+a(this).css("width")+"' height='"+a(this).css("height")+"' style='position: absolute; top: 0; left: 0;'></canvas>")}var h=a(this).find("canvas").get(0);try{var o=h.getContext("2d");o.globalAlpha=I.opacity;if(I.stroke=="dotted"){o.lineWidth=0.5}else{o.lineWidth=I.stroke}var i;var j;if(I.backgroundImage!="none"){var i=new Image();i.src=I.backgroundImage;if(true){erreur}else{i.onload=function(){var b=o.createPattern(i,"repeat");o.fillStyle=b;o.beginPath();o.moveTo(L+F/2,G+F/2);o.arc(L+F/2,G+F/2,F/2,2*Math.PI-(D*Math.PI)/180,2*Math.PI-(s*Math.PI)/180,true);o.lineTo(L+F/2,G+F/2);o.closePath();o.fill()}}}else{o.fillStyle=I.color;o.beginPath();o.moveTo(L+F/2,G+F/2);o.arc(L+F/2,G+F/2,F/2,2*Math.PI-(D*Math.PI)/180,2*Math.PI-(s*Math.PI)/180,true);o.lineTo(L+F/2,G+F/2);o.closePath();o.fill()}}catch(K){var N=F>>1,M=O>>1,m=(F&1)|((O&1)<<16),r=L+N,p=G+M,C=0,B=M,v=C,u=B,z=(N*N)<<1,w=z<<1,d=(M*M)<<1,c=d<<1,l=(z>>1)*(1-(M<<1))+d,J=(d>>1)-z*((M<<1)-1),q,f,g,H,n=(1<<(Math.floor((D%=360)/180)<<3))|(2<<(Math.floor((s%=360)/180)<<3))|((D>=s)<<16),t=new Array(M+1),k=new Array(M+1);D*=Math.PI/180;s*=Math.PI/180;q=r+Math.round(N*Math.cos(D));f=p+Math.round(-M*Math.sin(D));a(this)._mkLinVirt(t,r,p,q,f,I);g=r+Math.round(N*Math.cos(s));H=p+Math.round(-M*Math.sin(s));a(this)._mkLinVirt(k,r,p,g,H,I);while(B>0){if(l<0){l+=d*((C<<1)+3);J+=c*(++C)}else{if(J<0){l+=d*((C<<1)+3)-w*(B-1);v=C;J+=c*(++C)-z*(((B--)<<1)-3);a(this)._mkArcDiv(v,B,u,r,p,m,t,k,n,I);u=B}else{J-=z*((B<<1)-3);l-=w*(--B);if(B&&(t[B]!=t[B-1]||k[B]!=k[B-1])){a(this)._mkArcDiv(C,B,u,r,p,m,t,k,n,I);v=C;u=B}}}}}a(this)._mkArcDiv(C,0,u,r,p,m,t,k,n,I);if(m>>16){if(n>>16){var A=(f<=p||H>p)?(r-C):r;a(this)._mkDiv(A,p,C+r-A+(m&65535),1,I)}else{if((n&1)&&H>p){a(this)._mkDiv(r-C,p,C,1,I)}}}}return a(this)};a.fn.fillPolygon=function(j,h,x){x=jQuery.extend({stroke:1,color:"black",opacity:1,backgroundImage:"none"},x);x.xorigin=j[0];x.yorigin=h[0];if(supportsvg.support&&!true){var A="id"+parseInt(Math.random()*1000000);a(this).append("<div id ='"+A+"' style='position: absolute;top: 0; left: 0;'></div>");a("#"+A).css("width",a(this).css("width")).css("height",a(this).css("height")).svg(function(){var e=svgManager.getSVGFor("#"+A);var C=e.group(null,{stroke:x.color,stroke_width:x.stroke});var y=new Array;for(var n=0;n<j.length;n++){y[n]=new Array;y[n][0]=j[n];y[n][1]=h[n]}e.polygon(null,y,{fill:x.color})})}else{if(!a(this).find("canvas").get(0)){a(this).append("<canvas  width='"+a(this).css("width")+"' height='"+a(this).css("height")+"' style='position: absolute; top: 0; left: 0;'></canvas>")}var f=a(this).find("canvas").get(0);try{var s=f.getContext("2d");var r=j.length;s.globalAlpha=x.opacity;if(x.stroke=="dotted"){s.lineWidth=0.5}else{s.lineWidth=x.stroke}s.beginPath();var B;var k;if(x.backgroundImage!="none"){B=new Image();B.src=x.backgroundImage;if(true){erreur}else{B.onload=function(){k=s.createPattern(B,"repeat");s.fillStyle=k;s.moveTo(j[0],h[0]);for(var e=1;e<r;e++){s.lineTo(j[e],h[e])}s.lineTo(j[0],h[0]);s.closePath();s.fill()}}}else{s.fillStyle=x.color;s.moveTo(j[0],h[0]);for(var t=1;t<r;t++){s.lineTo(j[t],h[t])}s.lineTo(j[0],h[0]);s.closePath();s.fill()}}catch(w){var t;var l;var g,d;var v,c;var u,b;var o,m;var p;var r=j.length;if(!r){return}g=h[0];d=h[0];for(t=1;t<r;t++){if(h[t]<g){g=h[t]}if(h[t]>d){d=h[t]}}for(l=g;l<=d;l++){var z=new Array();p=0;for(t=0;t<r;t++){if(!t){o=r-1;m=0}else{o=t-1;m=t}c=h[o];b=h[m];if(c<b){v=j[o];u=j[m]}else{if(c>b){b=h[o];c=h[m];u=j[o];v=j[m]}else{continue}}if((l>=c)&&(l<b)){z[p++]=Math.round((l-c)*(u-v)/(b-c)+v)}else{if((l==d)&&(l>c)&&(l<=b)){z[p++]=Math.round((l-c)*(u-v)/(b-c)+v)}}}z.sort(function q(e,i){return(e-i)});for(t=0;t<p;t+=2){a(this)._mkDiv(z[t],l,z[t+1]-z[t]+1,1,x)}}}}return a(this)};a.fn._mkOvQds=function(e,d,l,k,m,f,o,j,c){var g=e-l,b=e+l+o-m,n=d-k,i=d+k+j-f;if(b>g+m){a(this)._mkDiv(b,n,m,f,c);a(this)._mkDiv(b,i,m,f,c)}else{m=b-g+m}a(this)._mkDiv(g,n,m,f,c);a(this)._mkDiv(g,i,m,f,c);return a(this)};a.fn._mkArcDiv=function(p,o,c,i,g,d,m,l,r,f){var b=i+p+(d&65535),n,j=c-o,k,e,q;if(!j){j=1}p=i-p;if(r&16711680){n=g-o-j;if(r&255){if(r&2){k=Math.max(p,l[o]);q=b-k;if(q>0){a(this)._mkDiv(k,n,q,j,f)}}if(r&1){e=Math.min(b,m[o]);q=e-p;if(q>0){a(this)._mkDiv(p,n,q,j,f)}}}else{a(this)._mkDiv(p,n,b-p,j,f)}n=g+o+(d>>16);if(r&65280){if(r&256){k=Math.max(p,m[o]);q=b-k;if(q>0){a(this)._mkDiv(k,n,q,j,f)}}if(r&512){e=Math.min(b,l[o]);q=e-p;if(q>0){a(this)._mkDiv(p,n,q,j,f)}}}else{a(this)._mkDiv(p,n,b-p,j,f)}}else{if(r&255){if(r&2){k=Math.max(p,l[o])}else{k=p}if(r&1){e=Math.min(b,m[o])}else{e=b}n=g-o-j;q=e-k;if(q>0){a(this)._mkDiv(k,n,q,j,f)}}if(r&65280){if(r&256){k=Math.max(p,m[o])}else{k=p}if(r&512){e=Math.min(b,l[o])}else{e=b}n=g+o+(d>>16);q=e-k;if(q>0){a(this)._mkDiv(k,n,q,j,f)}}}return a(this)};a.fn._mkLinVirt=function(q,f,o,d,m,g){var t=Math.abs(d-f),s=Math.abs(m-o),n=f,l=o,b=(f>d)?-1:1,r=(o>m)?-1:1,e,h=0;if(t>=s){var c=s<<1,k=c-(t<<1);e=c-t;while(t>0){--t;if(e>0){q[h++]=n;l+=r;e+=k}else{e+=c}n+=b}}else{var c=t<<1,k=c-(s<<1);e=c-s;while(s>0){--s;l+=r;q[h++]=n;if(e>0){n+=b;e+=k}else{e+=c}}}for(var j=q.length,h=j-h;h;){q[j-(h--)]=n}}})(jQuery);function detectSVG(){var b={support:null,plugin:null,builtin:null};var e=null;if(navigator&&navigator.mimeTypes&&navigator.mimeTypes.length){for(var d in {"image/svg+xml":null,"image/svg":null,"image/svg-xml":null}){if(navigator.mimeTypes[d]&&(e=navigator.mimeTypes[d].enabledPlugin)&&e){b={plugin:(e=e.name.toLowerCase())&&e.indexOf("adobe")>=0?"Adobe":(e.indexOf("renesis")>=0?"Renesis":"Unknown")}}}}else{if((e=document.createElement("object"))&&e&&typeof e.setAttribute("type","image/svg+xml")){if(typeof e.USE_SVGZ=="string"){b={plugin:"Adobe",IID:"Adobe.SVGCtl",pluginVersion:e.window&&e.window._window_impl?(e.window.evalScript?6:3):2}}else{if(e.window&&e.window.getSVGViewerVersion().indexOf("enesis")>0){b={plugin:"Renesis",IID:"RenesisX.RenesisCtrl.1"}}}}}b.IID=(b.plugin=="Adobe"?"Adobe.SVGCtl":(b.plugin=="Renesis"?"renesisX.RenesisCtrl.1":null));var c=document&&document.implementation&&document.implementation.hasFeature("org.w3c.dom.svg","1.0");var a=undefined;b.builtin=c?(!!window.opera?"Opera":(a?"Gecko":"Safari")):(!!window.opera&&window.opera.version?"Opera":(a?"Gecko":null));b.builtinVersion=b.builtin&&!!window.opera?parseFloat(window.opera.version()):(a?(typeof Iterator=="function"?(Array.reduce?3:2):1.5):null);if(!!window.opera&&b.builtinVersion>=9&&(e=document.createElement("object"))&&e&&typeof e.setAttribute("type","image/svg+xml")&&document.appendChild(e)){b.support=e.offsetWidth?"Plugin":"Builtin";document.removeChild(e)}else{b.support=b.plugin&&!c?"Plugin":(b.builtin&&c?"Builtin":null)}return b};
var testLC=function(c,b){this.object=$(b.nodeXML).find("testLC");this.contentHTML=a(this.object);function a(e){var d=document.createElement("div");$(d).attr({id:$(e).attr("id")+"_"+c,alineacion:$(e).attr("alineacion"),urlRecurso:$(e).attr("urlRecurso"),dataPortada:true,initPrecarga:b.precargaItems}).addClass($(e).attr("vistaFla")+" testLCComponent");$(d).data("urlXML",b.nodeXML).data("urlTXT",b.nodeTXT);return d}};
var itemTestLC=function(g,a,c,f,e,d){this.contentHTML=b();function b(){var h=document.createElement("div");$(h).attr({contenidoRelacionado:$(c).attr("contenidoRelacionado"),dificultad:$(c).attr("dificultad"),mostrarRepetir:$(c).attr("mostrarRepetir"),urlRecurso:$(c).attr("urlRecurso"),alineacion:$(c).attr("alineacion"),transSalida:$(c).attr("transSalida"),transEntrada:$(c).attr("transEntrada"),mostrarBtnPaginacion:$(c).attr("mostrarBtnPaginacion"),mostrarBtnComprobar:$(c).attr("mostrarBtnComprobar"),mostrarBtnMute:$(c).attr("mostrarBtnMute"),idTexto:$(c).attr("idTexto"),id:$(c).attr("id"),rel:g+"_"+a,block:e,npage:d}).addClass($(c).attr("vistaFla")).addClass("itemTestLC_"+g+"_"+a+" itemTestLCComponent").css({height:$(c).attr("h")+"px",width:$(c).attr("w")+"px",top:$(c).attr("y")+"px",left:$(c).attr("x")+"px"});if(a==f){$(h).addClass("activeActivity");if($(c).find("feedback").length===0){sendTracking(100,"other","",f,e,"","",[],d)}}var n=document.createElement("div");$(n).addClass("tapaActivity");$(h).append(n);var l=document.createElement("div");$(l).addClass("disableActivity");$(h).append(l);if($(h).attr("activarSolucion")!="false"){var k=new solutionActivity(g,a,c);$(h).append(k.contentHTML)}var m=new respuestasActivity(g,a,c);$(h).append(m.contentHTML);if($(h).attr("mostrarRepetir")!="false"){var j=new reiniciaActivity(g,a,c);$(h).append(j.contentHTML)}if($(h).attr("mostrarBtnComprobar")!="false"){var i=new comprobar(g,a,c);$(h).append(i.contentHTML)}return h}};
var pagination=function(g,c,f,d){this.contentHTML=e();h(this.contentHTML,d);function e(){var j=document.createElement("div");var i="<div class='divPaginationLeft'  rel='rl'></div><div class='divPaginationCenter'><span>"+c+"</span> / <span>"+f+"</span></div><div class='divPaginationRight' rel='lr' ></div><div class='limpiar'></div>";$(j).attr("id","pagination_"+g+"_"+c).addClass("divPagination");$(j).append(i);return j}function b(i){try{i.find("audio,video").each(function(){if(this.player!==undefined){this.player.pause()}else{this.pause()}})}catch(j){}}function a(i){i.find("audio").mediaelementplayer({audioWidth:"100%",features:["playpause","progress","volume"]});i.find("video").mediaelementplayer({alwaysShowControls:true,videoWidth:"99%",videoHeight:30,features:["playpause","progress","volume"]})}function h(j,i){$(".divPaginationLeft",$(j)).click(function(){var k=parseInt(c,10)-1;if(k>0){b($(".itemTestLC_"+g+"_"+c));$(".itemTestLC_"+g+"_"+c).removeClass("activeActivity");var l=$(".itemTestLC_"+g+"_"+k);l.addClass("activeActivity");if(l.find("div.feedbackComponent").length===0){sendTracking(100,"other","",k,l.attr("block"),"","",[],l.attr("npage"))}a(l)}});$(".divPaginationRight",$(j)).click(function(){var k=parseInt(c,10)+1;if(k<=f){b($(".itemTestLC_"+g+"_"+c));$(".itemTestLC_"+g+"_"+c).removeClass("activeActivity");var l=$(".itemTestLC_"+g+"_"+k);l.addClass("activeActivity");if(l.find("div.feedbackComponent").length===0){sendTracking(100,"other","",k,l.attr("block"),"","",[],l.attr("npage"))}a(l)}});if(i){a($(".itemTestLC_"+g+"_"+c))}}};
var enunciado=function(f,a,c,b){this.contentHTML=new Array();this.contentHTML[0]=e();function e(){var g=document.createElement("div");$(g).attr({urlRecurso:$(c).attr("urlRecurso"),transSalida:$(c).attr("transSalida"),transEntrada:$(c).attr("transEntrada")}).addClass($(c).attr("vistaFla")+" enunciadoComponent").css({height:$(c).attr("h")+"px",width:$(c).attr("w")+"px",top:$(c).attr("y")+"px",left:$(c).attr("x")+"px",position:"absolute"});$(g).append(d());if(CONFIG.seleccionable==false){disabledSelectedText(g)}return g}function d(){$(b).attr({id:$(c).attr("id")});return b}};
var elementoExt=function(f,c,e,d){this.contentHTML=[];this.contentHTML[0]=b();function b(){var h=document.createElement("div");$(h).attr({origeH:$(e).attr("origeH"),origeW:$(e).attr("origeW"),urlRecurso:$(e).attr("urlRecurso"),transSalida:$(e).attr("transSalida"),transEntrada:$(e).attr("transEntrada"),id:$(e).attr("id")}).addClass($(e).attr("vistaFla")+" elementoExtComponent").css({height:$(e).attr("h")+"px",width:$(e).attr("w")+"px",top:$(e).attr("y")+"px",left:$(e).attr("x")+"px",position:"absolute"});var i=[];i[0]=$(e).attr("urlRecurso").split("||").shift();i[1]=$(e).attr("urlRecurso").split("||").shift().split(".").shift();i[2]=$(e).attr("urlRecurso").split("||").shift().split(".").pop();if(i[2]=="png"||i[2]=="jpg"||i[2]=="jpeg"||i[2]=="gif"){$(h).append(g(i[0]))}else{if(i[2]=="swf"){$(h).append(a(i[1]))}}if(CONFIG.seleccionable===false){disabledSelectedText(h)}return h}function a(j){var i=CONFIG_GENERAL.urlResources+j+"/"+j+".html";var h=$.ajax({type:"GET",url:i,async:false}).responseText;return h}function g(h){var i=document.createElement("img");$(i).attr({src:CONFIG_GENERAL.urlResources+h,nombre:$(e).attr("nombre")}).css({height:$(e).attr("h")+"px",width:$(e).attr("w")+"px"});return i}};
var texto=function(f,a,c,b){this.contentHTML=new Array();this.contentHTML[0]=e();function e(){var g=document.createElement("div");$(g).attr({seleccionable:$(c).attr("seleccionable"),transSalida:$(c).attr("transSalida"),transEntrada:$(c).attr("transEntrada")}).addClass($(c).attr("vistaFla")+" textoComponent").css({height:$(c).attr("h")+"px",width:$(c).attr("w")+"px",top:$(c).attr("y")+"px",left:$(c).attr("x")+"px",position:"absolute"});if(CONFIG.seleccionable==false){disabledSelectedText(g)}$(g).append(d());return g}function d(){$(b).attr({id:$(c).attr("id"),name:$(c).attr("nombre")});return b}};function disabledSelectedText(a){$(a).each(function(b){if(typeof this.onselectstart!="undefined"){this.onselectstart=function(){return false}}else{if(typeof this.style.MozUserSelect!="undefined"){this.style.MozUserSelect="none"}else{this.onmousedown=function(){return false};this.style.cursor="default"}}})};
function verdaderoFalsoInit(a){a.find(".verdaderoFalsoComponent").each(function(){applyFuncionalityVerdaderoFalso($(this),a)});sortVerdaderoFalso(a);sortCorrectsResponseVerdaderoFalso(a);a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkVerdaderoFalso(a);a.find(".solutionComponent").show();a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=100;var d=null;sTipoSeguimiento="choice";if(h!=true){b=scoreVerdaderFalso(a)}d=respuestaVerdaderoFalso(a);sRespuestaCorrecta=respuestaCorrectaVerdaderoFalso(a);var g="1";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityVerdaderoFalso(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".divButtonVerdadero").removeClass("desactive").addClass("desactive");a.find(".divButtonFalso").removeClass("desactive").addClass("desactive")}showNextAnswerVerdaderoFalso(a)}});a.find(".allAnswers").click(function(){if($(this).hasClass("active")){resetActivityVerdaderoFalso(a,true);resetNextAnswerVerdaderoFalso(a);a.find(".reiniciaComponent").removeClass("desactive");a.find(".divButtonVerdadero").removeClass("desactive").addClass("desactive");a.find(".divButtonFalso").removeClass("desactive").addClass("desactive");showSolutionVerdaderoFalso(a)}});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoVerdaderoFalso(a);a.find(".disableActivity").hide();$(this).removeClass("active")}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionVerdaderoFalso(a);$(this).removeClass("active")}});a.find(".respuestasComponent").click(function(){showRespuestasVerdaderoFalso(a);$(this).hide();a.find(".solutionComponent").show()});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".reiniciaComponent").click(function(){if($(this).attr("class").indexOf("desactive")==-1){resetActivityVerdaderoFalso(a);resetNextAnswerVerdaderoFalso(a)}})}function applyFuncionalityVerdaderoFalso(c,d){var b=$(c).find(".divButtonVerdadero");var a=$(c).find(".divButtonFalso");applyFuncionalityVFButton(b,c,d);applyFuncionalityVFButton(a,c,d)}function applyFuncionalityVFButton(a,b,c){$(a).click(function(){if($(this).attr("class").indexOf("desactive")==-1){$(b).find(".activeElement").removeClass("activeElement");$(this).addClass("activeElement");if(CONFIG.esperarCompleto){if(c.find(".activeElement").length==c.find(".verdaderoFalsoComponent").length){c.find(".comprobarComponent").addClass("active")}}else{c.find(".comprobarComponent").addClass("active")}}})}function sortVerdaderoFalso(d){var b,a=d.find(".verdaderoFalsoComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function checkVerdaderoFalso(b){var a=true;b.find(".verdaderoFalsoComponent").each(function(){if($(this).find(".seleccionCorrecta").attr("correcto")==undefined){var c=$(this).find(".activeElement");if($(this).attr("correcto")==$(this).find(".activeElement").attr("correcto")){$(this).find(".divButtonVerdadero").addClass("desactive");$(this).find(".divButtonFalso").addClass("desactive");c.addClass("seleccionCorrecta").removeClass("seleccionIncorrecta");c.find(".elementOn").addClass("acierto").removeClass("error")}else{c.removeClass("seleccionCorrecta").addClass("seleccionIncorrecta");c.find(".elementOn").addClass("error").removeClass("acierto");a=false}}});b.find(".activeElement").removeClass("activeElement");return a}function respuestaVerdaderoFalso(g){var a="",b=0,d,c=g.find(".verdaderoFalsoComponent");switch(TrackingConfig.type){case"scorm_1_2":c.each(function(){d=$(this);if(d.find(".verdaderoFalso_KidsBox")){if(d.find(".seleccionCorrecta").length>0){if($(this).attr("correcto")=="true"){a+="y,"}else{a+="n,"}}else{if(d.find(".seleccionIncorrecta").length>0){if(d.attr("correcto")==="true"){a+="n,"}else{a+="y,"}}else{a+="0,"}}}b++});a=a.substring(0,a.length-1).split(",").sort(function(i,h){return i.split(".")[0]-h.split(".")[0]}).toString();return a;break;case"scorm_2004":c.each(function(){var i=$(this),h=i.offset();i.attr("data-sequence",Math.round((h.left)+h.top*100,10))});var f=c.map(function(){return +$(this).attr("data-sequence")});f.sort(function(i,h){return i-h});$.each(f,function(h,i){c.filter("[data-sequence="+i+"]").attr("data-sequence-pos",(h+1))});var a="",e;c.each(function(){e=$(this).find(".seleccionCorrecta, .seleccionIncorrecta");if(e.length>0){text1=$.trim(e.text()).charAt(0);a+=$(this).attr("data-sequence-pos")+"-"+text1.toLowerCase()+","}});return a.substring(0,a.length-1).split(",").sort().toString();break}return a}function respuestaCorrectaVerdaderoFalso(d){var a="",b=0,c=d.find(".verdaderoFalsoComponent");switch(TrackingConfig.type){case"scorm_1_2":c.each(function(){correcto=$(this).attr("correcto");a+=($(this).find("div[correcto='"+correcto+"']").hasClass("divButtonVerdadero")?"y":"n")+","});a=a.substring(0,a.length-1).split(",").sort(function(f,e){return f.split(".")[0]-e.split(".")[0]}).toString();return a;break;case"scorm_2004":c.each(function(){correcto=$(this).attr("correcto");a+=$(this).attr("data-sequence-pos")+"-"+($(this).find("div[correcto='"+correcto+"']").hasClass("divButtonVerdadero")?"y":"n")+","});a=a.substring(0,a.length-1).split(",").sort(function(f,e){return f.split(".")[0]-e.split(".")[0]}).toString();return a;break}return a}function scoreVerdaderFalso(b){var a=b.find(".verdaderoFalsoComponent").length;var c=b.find(".verdaderoFalsoComponent .seleccionCorrecta").length;return Math.round((c/a)*100)}function showSolutionVerdaderoFalso(a){a.find(".verdaderoFalsoComponent").each(function(){if($(this).attr("correcto")=="false"){$(".divButtonFalso",$(this)).addClass("solutionElement").removeClass("defaultElement");$(".divButtonVerdadero",$(this)).addClass("defaultElement")}else{$(".divButtonVerdadero",$(this)).addClass("solutionElement").removeClass("defaultElement");$(".divButtonFalso",$(this)).addClass("defaultElement")}});a.find(".error").removeClass("error");a.find(".acierto").removeClass("acierto")}function nuevoIntentoVerdaderoFalso(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".seleccionIncorrecta").removeClass("seleccionIncorrecta");a.find(".error").removeClass("error")}function showNextAnswerVerdaderoFalso(c){var a,d=c.find(".verdaderoFalsoComponent");for(var b=0;b<d.length;b++){a=d.filter("[data-correct-pos="+b+"]");if(a.hasClass("show")){if(a.attr("correcto")=="false"){$(".divButtonFalso",a).addClass("solutionElement").removeClass("defaultElement");$(".divButtonVerdadero",a).addClass("defaultElement")}else{$(".divButtonVerdadero",a).addClass("solutionElement").removeClass("defaultElement");$(".divButtonFalso",a).addClass("defaultElement")}a.find(".error").removeClass("error");a.find(".acierto").removeClass("acierto");a.removeClass("show");if(b+1==d.length){c.find(".nextAnswer").removeClass("active");c.find(".allAnswers").removeClass("active")}return}}}function sortCorrectsResponseVerdaderoFalso(d){var b,a=d.find(".verdaderoFalsoComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-correct-pos",(e)).addClass("show")})}function resetActivityVerdaderoFalso(b,a){b.find(".feedbackComponent").fadeOut();b.find(".disableActivity").hide();b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").addClass("desactive");b.find(".seleccionCorrecta").removeClass("seleccionCorrecta");b.find(".seleccionIncorrecta").removeClass("seleccionIncorrecta");b.find(".error").removeClass("error");b.find(".acierto").removeClass("acierto");b.find(".defaultElement").removeClass("defaultElement");b.find(".solutionElement").removeClass("solutionElement");b.find(".divButtonVerdadero").removeClass("desactive");b.find(".divButtonFalso").removeClass("desactive");b.find(".divButtonVerdadero").removeClass("activeElement");b.find(".divButtonFalso").removeClass("activeElement");if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}}function resetNextAnswerVerdaderoFalso(a){a.find(".nextAnswer").removeClass("showed");a.find(".verdaderoFalsoComponent").removeClass("show").addClass("show");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")};
function textoHighlightInit(a){a.find(".textoHighlightComponent").each(function(){applyFuncionalityTextoHighlight($(this),a)});sortTextoHighlight(a);a.find(".comprobarComponent").click(function(){if($(this).hasClass("active")){var f=checkTextoHighlight(a);a.find(".solutionComponent").show();a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(f){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var j=$(this).attr("intentos");if(j==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",j-1)}}var b=getID(6),d=100,c=null,h=null,e="performance",g="1",i=(f==true);if(f!=true){d=scoreHighlight(a)}c=respuestaTextoHighlight(a);h=respuestaCorrectaTextoHighlight(a);if(TrackingConfig.type!="none"){setInteracion(g,e,c,i,b,0,d,h)}}});a.find(".nuevoIntentoComponent").click(function(){if($(this).hasClass("active")){nuevoIntentoTextoHighlight(a);a.find(".disableActivity").hide();$(this).removeClass("active")}});a.find(".solutionComponent").click(function(){if($(this).hasClass("active")){showSolutionTextoHighlight(a);$(this).removeClass("active")}});a.find(".respuestasComponent").click(function(){showRespuestasTextoHighlight(a);$(this).hide();a.find(".solutionComponent").show()});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".reiniciaComponent").click(function(){if(!$(this).hasClass("desactive")){a.find(".feedbackComponent").fadeOut();a.find(".disableActivity").hide();a.find(".solutionComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".comprobarComponent").removeClass("active");a.find(".comprobarComponent").attr("intentos",2);$(this).addClass("desactive");a.find(".error").removeClass("error");a.find(".acierto").removeClass("acierto");a.find(".defaultElement").removeClass("defaultElement");a.find(".solutionElement").removeClass("solutionElement");a.find(".highlight-word").removeClass("activeElement").removeClass("desactive");a.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(b){}})}})}function applyFuncionalityTextoHighlight(a,b){$(a).find(".highlight-word").each(function(){$(this).click(function(){if(!$(this).hasClass("desactive")){var d=parseInt($(a).data("limite-seleccion"));var c=this;if($(this).hasClass("activeElement")){$(this).removeClass("activeElement")}else{if(d===1){$(a).find(".activeElement").removeClass("activeElement");$(this).addClass("activeElement")}else{if(d>1){if($(a).find(".activeElement").length<d){$(this).addClass("activeElement")}}else{$(this).addClass("activeElement")}}}if(!$("comprobarComponent").hasClass("active")){b.find(".comprobarComponent").addClass("active")}}})})}function sortTextoHighlight(d){var b,a=d.find(".textoHighlightComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function checkTextoHighlight(b){var a=true;b.find(".textoHighlightComponent").each(function(){var d=$(this).find(".highlight-word.seleccionCorrecta");var c=$(this).find(".highlight-word.activeElement");_.each(d,function(e){if($(e).hasClass("activeElement")){$(e).find(".elementOn").addClass("acierto").removeClass("error");a=a&&true}});_.each(c,function(e){if(!$(e).hasClass("seleccionCorrecta")){$(e).find(".elementOn").addClass("error").removeClass("acierto");a=a&&false}});if(d.length!==c.length){a=false}});return a}function respuestaTextoHighlight(b){var a="",c=b.find(".highlight-word.activeElement");switch(TrackingConfig.type){case"tincan":c.each(function(d,e){a+=$(this).text()+","});a=a.substring(0,a.length-1);break;case"scorm_1_2":c.each(function(d,e){a+=(d+1)+" - "+$(this).text()+","});a=a.substring(0,a.length-1);break;case"scorm_2004":c.each(function(d,e){a+=(d+1)+"[.]"+$(this).text()+"[,]"});a=a.substring(0,a.length-3);break}return a}function scoreHighlight(d){var b=d.find(".highlight-word.seleccionCorrecta").length;var a=d.find(".highlight-word.activeElement.seleccionCorrecta").length;var c=d.find(".highlight-word.activeElement.seleccionIncorrecta").length;var e;if((c+a)>b){e=a-c}else{e=a}return e<=0?0:Math.round((e/b)*100)}function respuestaCorrectaTextoHighlight(b){var a="",c=b.find(".highlight-word.seleccionCorrecta");switch(TrackingConfig.type){case"tincan":c.each(function(d,e){a+=$(this).text()+","});a=a.substring(0,a.length-1);break;case"scorm_1_2":c.each(function(d,e){a+=(d+1)+" - "+$(this).text()+","});a=a.substring(0,a.length-1);break;case"scorm_2004":c.each(function(d,e){a+=(d+1)+"[.]"+$(this).text()+"[,]"});a=a.substring(0,a.length-3);break}return a}function showSolutionTextoHighlight(a){a.find(".textoHighlightComponent .highlight-word").removeClass("activeElement");a.find(".textoHighlightComponent .highlight-word").each(function(){if($(this).hasClass("seleccionCorrecta")){$(this).addClass("activeElement")}});a.find(".error").removeClass("error");a.find(".acierto").removeClass("acierto")}function nuevoIntentoTextoHighlight(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".activeElement").each(function(){if(!$(this).hasClass("seleccionCorrecta")){$(this).removeClass("activeElement")}else{$(this).addClass("desactive")}});a.find(".error").removeClass("error")};
var aSolutionText=new Array(),aInitText=new Array(),aIdSentences=new Array();function textCorrectionInit(a){a.find(".textCorrectionComponent").each(function(){initTextCorrection($(this))});sortTextCorrection(a);a.find(".btnOk").click(function(){if(!$(this).hasClass("desactive")){var b=$(this).attr("id").split("-")[1];$("#sentenceInput-"+b).attr("readonly",true);$(this).addClass("desactive");if(a.find(".btnOk.desactive").length==aSolutionText.length){a.find(".comprobarComponent").removeClass("active").addClass("active")}}});a.find(".btnStartAgain").click(function(){if(!$(this).hasClass("desactive")){var c=$(this).attr("id").split("-")[1],e=$("#sentenceInput-"+c),d=$.inArray(c,aIdSentences),b=aInitText[d];e.attr("readonly",false);e.val(b);$("#btnOk-"+c).removeClass("desactive");a.find(".comprobarComponent").removeClass("active")}});a.find(".comprobarComponent").click(function(){if($(this).hasClass("active")){var f=checkTextCorrection(a);a.find(".solutionComponent").show();a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(f){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var j=$(this).attr("intentos");if(j==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",j-1)}}var b=getID(6),d=100,c=null,h=null,e="performance",g="1",i=(f==true);if(f!=true){d=scoreTextCorrection(a)}c=respuestaTextCorrection(a);h=respuestaCorrectaTextCorrection(a);if(TrackingConfig.type!="none"){setInteracion(g,e,c,i,b,0,d,h)}}});a.find(".nuevoIntentoComponent").click(function(){if($(this).hasClass("active")){nuevoIntentoTextCorrection(a);a.find(".disableActivity").hide();$(this).removeClass("active")}});a.find(".solutionComponent").click(function(){if($(this).hasClass("active")){showSolutionTextCorrection(a);$(this).removeClass("active")}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".reiniciaComponent").click(function(){if(!$(this).hasClass("desactive")){a.find(".feedbackComponent").fadeOut();a.find(".disableActivity").hide();a.find(".solutionComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".comprobarComponent").removeClass("active");a.find(".comprobarComponent").attr("intentos",2);$(this).addClass("desactive");for(var d=0;d<aIdSentences.length;d++){var e=$("#sentenceInput-"+aIdSentences[d]),b=$.trim(aInitText[d]),c=$("#sentence-"+aIdSentences[d]);e.attr("readonly",false);e.val(b)}$(".correct").removeClass("correct");$(".incorrect").removeClass("incorrect");$(".btnOk").removeClass("desactive");$(".btnStartAgain").removeClass("desactive");a.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(f){}})}})}function sortTextCorrection(d){var b,a=d.find(".correction-sentence");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function initTextCorrection(a){a.find(".correction-sentence").each(function(){var c=$(this).find("p").text().split("#@"),b=$.trim(c[0]),f=$.trim(c[1]),d=$(this).attr("id").split("-")[1],e="sentenceInput-"+d;aSolutionText.push(f);aInitText.push(b);aIdSentences.push(d);$(this).prepend('<input id="'+e+'"/>');$("#"+e).addClass("sentenceInput");$("#"+e).attr("readonly",false);$("#"+e).css("width",$(this).attr("data-widthInit"));$("#"+e).val(b);$(this).find("p").remove()})}function checkTextCorrection(e){var d=true;for(var b=0;b<aIdSentences.length;b++){var g=$("#sentenceInput-"+aIdSentences[b]),c=$.trim(g.val()),f=$.trim(aSolutionText[b]).split("|||"),a=$("#sentence-"+aIdSentences[b]);bCorrectSentences=checkTextSentences(c,f);if(bCorrectSentences){g.addClass("correct");a.find(".elementOn").addClass("correct")}else{d=false;g.addClass("incorrect");a.find(".elementOn").addClass("incorrect")}}return d}function checkTextSentences(e,d){var b=false;for(var c=0;c<d.length;c++){var a=d[c];if(e==a||e==a.toUpperCase()){b=true}}return b}function nuevoIntentoTextCorrection(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find("input").each(function(){var b=$(this).attr("id").split("-")[1];if(!$(this).hasClass("correct")){$("#btnOk-"+b).removeClass("desactive");$("#btnStartAgain-"+b).trigger("click")}else{$("#btnStartAgain-"+b).addClass("desactive")}});a.find(".incorrect").removeClass("incorrect")}function showSolutionTextCorrection(d){for(var c=0;c<aIdSentences.length;c++){var e=$("#sentenceInput-"+aIdSentences[c]),a=$.trim(aSolutionText[c]).split("|||")[0],b=$("#sentence-"+aIdSentences[c]);e.attr("readonly",false);e.val(a)}d.find(".correct").removeClass("correct");d.find(".incorrect").removeClass("incorrect");d.find(".btnStartAgain").removeClass("desactive").addClass("desactive");d.find(".btnOk").removeClass("desactive").addClass("desactive")}function scoreTextCorrection(b){var c=b.find(".elementOn.correct").length,a=b.find(".elementOn").length;return Math.round((c/a)*100)}function respuestaTextCorrection(e){var d,c=e.find(".correction-sentence"),b="";switch(TrackingConfig.type){case"tincan":c.each(function(){d=$(this).find("input");if(d.val()===""){b+=$(this).attr("data-sequence-pos")+"$ "}else{b+=$(this).attr("data-sequence-pos")+"$"+d.val()+""}});b=b.substring(0,b.length-2).split("").sort(function(g,f){return g.split("$")[0]-f.split("$")[0]}).toString();b=$.map(b.split(","),function(g,f){return g.split("$")[1]}).toString();break;case"scorm_1_2":c.each(function(){d=$(this).find("input");if(d.val()!=""){b+=$(this).attr("data-sequence-pos")+"-"+d.val()+""}});b=b.substring(0,b.length-2).split("").sort(function(g,f){return g.split("-")[0]-f.split("-")[0]}).toString();break;case"scorm_2004":var a="";c.each(function(){a=$(this).find("input").val();if(a!==""){b+=$(this).attr("data-sequence-pos")+"[.]"+a+"[,]"}});b=b.substring(0,b.length-3);break}return b}function respuestaCorrectaTextCorrection(f){var e=f.find(".correction-sentence"),d="",a=0,c="",b="";switch(TrackingConfig.type){case"tincan":e.each(function(){d=$(this).attr("id").split("-")[1];a=$.inArray(d,aIdSentences);b=aSolutionText[a];if(b!==""){c+=$(this).attr("data-sequence-pos")+"$"+b+""}});c=c.substring(0,c.length-2).split("").sort(function(h,g){return h.split("$")[0]-g.split("$")[0]}).toString();c=$.map(c.split(","),function(h,g){return h.split("$")[1]}).toString();break;case"scorm_1_2":e.each(function(){d=$(this).attr("id").split("-")[1];a=$.inArray(d,aIdSentences);b=aSolutionText[a];if(b!==""){c+=$(this).attr("data-sequence-pos")+"-"+b+""}});c=c.substring(0,c.length-2).split("").sort(function(h,g){return h.split("-")[0]-g.split("-")[0]}).toString();break;case"scorm_2004":e.each(function(){d=$(this).attr("id").split("-")[1];a=$.inArray(d,aIdSentences);b=aSolutionText[a];if(b!==""){c+=$(this).attr("data-sequence-pos")+"[.]"+b+"[,]"}});c=c.substring(0,c.length-3);break}return c};
var correctWords=new Array();var incorrectWords=new Array();var listWords=new Array();var solutionWords=new Array();var currentScore=0;var nWordToShowTextReconstruction=0;function textReconstructionInit(a){initTextReconstruction(a);applyFuncionalityTextReconstruction(a);$(a).find(".act_negativo p").text("Sorry! See the correct answers and try again!");a.find(".comprobarComponent").click(function(){if($(this).hasClass("active")){comprobarTextReconstruction(a)}});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityTextReconstruction(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");$(".enterWord").attr("readonly",true);$(".btnEnter").removeClass("active")}showNextAnswerTextReconstruction(a)}});a.find(".allAnswers").click(function(){if($(this).hasClass("active")){resetActivityTextReconstruction(a,true);a.find(".reiniciaComponent").removeClass("desactive");$(".enterWord").attr("readonly",true);$(".btnEnter").removeClass("active");showAnswersTextReconstruction(a)}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut();a.find(".disableActivity").hide()});a.find(".reiniciaComponent").click(function(){if(!$(this).hasClass("desactive")){resetActivityTextReconstruction(a);resetNextAnswerTextReconstruction(a)}})}function comprobarTextReconstruction(i){var e=false;if(correctWords.length==solutionWords.length){e=true}$(this).find(".disableActivity").css("display","block");$(this).find(".comprobarComponent").removeClass("active");i.find(".feedback").fadeOut();i.find(".reiniciaComponent").removeClass("desactive");var a=getID(6),c=100,b=null,g="",d="fill-in",f="1",h=(e==true);if(e!=true){c=scoreTextReconstruction(i)}b=respuestaTextReconstruction(i);g=respuestaCorrectaTextReconstruction(i);if(TrackingConfig.type!="none"){setInteracion(f,d,b,h,a,0,c,g)}if(e){showFeedbackTextReconstruction(".act_positivo")}else{showSolutionTextReconstruction();showFeedbackTextReconstruction(".act_negativo")}}function showSolutionTextReconstruction(){for(var a=0;a<solutionWords.length;a++){var b=solutionWords[a];if($.inArray(b,correctWords)==-1){$("#word-"+a).text(b);$("#word-"+a).addClass("incorrect")}}}function showAnswersTextReconstruction(c){for(var a=0;a<solutionWords.length;a++){var b=solutionWords[a];if($.inArray(b.toLowerCase(),correctWords)==-1){$("#word-"+a).text(b);$("#word-"+a).addClass("correct")}}c.find(".nextAnswer").removeClass("active");c.find(".allAnswers").removeClass("active")}function initTextReconstruction(a){$(a).find(".reconstruction-word").each(function(c,e){var d="";var b=$(this).text().length;solutionWords.push($(this).text());$(this).attr("id","word-"+c);for(var c=0;c<=b;c++){d=d+"_"}listWords.push($(this).text().toLowerCase());$(this).text(d)});$(a).find(".textReconstructionComponent").show()}function applyFuncionalityTextReconstruction(a){$(".enterWord").on("keydown",function(b){if(b.which==13){if($(".btnEnter").hasClass("active")){checkWord(a);$(".btnEnter").removeClass("active")}}});$(".btnEnter").click(function(){if($(this).hasClass("active")){checkWord(a);$(this).removeClass("active")}});$(".enterWord").keyup(function(){if($(this).val().length>=1){$(".btnEnter").addClass("active")}else{$(".btnEnter").removeClass("active")}})}function checkWord(b){var c=$(".enterWord").val().toLowerCase();if(c!=""){if($.inArray(c,incorrectWords)!=-1||$.inArray(c,correctWords)!=-1){$(".enterWord").val("");$(".comprobarComponent").addClass("active");return}else{if($.inArray(c,listWords)!=-1){for(var a=0;a<listWords.length;a++){if(listWords[a]==c){correctWords.push(c);currentScore++;updateTextReconstruction(a,b)}}}else{incorrectWords.push(c);currentScore--;updateIncorrectGuessed(c);$(".comprobarComponent").addClass("active")}}$(".enterWord").val("")}}function updateTextReconstruction(b,d){var c=$("#word-"+b),a=solutionWords[b];c.text(a);c.addClass("correct");checkCompleteTextReconstruction(d)}function updateIncorrectGuessed(a){$(".incorrectWords").prepend("<p>"+a+"</p>")}function showFirstLetterWords(){for(var b=0;b<solutionWords.length;b++){var d=solutionWords[b];if($.inArray(d,correctWords)==-1){var e=d.substr(0,1),a=d.length-1,c=$("#word-"+b).text().substr(1,a);$("#word-"+b).text(c);$("#word-"+b).prepend('<span class="hint">'+e+"</span>")}}}function checkCompleteTextReconstruction(a){if(correctWords.length==solutionWords.length){comprobarTextReconstruction(a)}}function showFeedbackTextReconstruction(a){$(a).fadeIn();$(".reiniciaComponent").removeClass("active");$(".disableActivity").css("display","block");$(".comprobarComponent").removeClass("active");$(".enterWord").attr("readonly",true)}function scoreTextReconstruction(d){var c=solutionWords.length,e=correctWords.length,b=incorrectWords.length,a=e-b;return a<=0?0:Math.round((a/c)*100)}function resetItemText(a){$(a).find(".reconstruction-word").each(function(c,e){var d="",b=$(this).text().length;for(var c=0;c<=b;c++){d=d+"_"}$(this).text(d)})}function respuestaTextReconstruction(b){var a="";$(b).find(".reconstruction-word").each(function(c,d){a+=(c+1)+"-"+$(this).text()+" "});return a}function respuestaCorrectaTextReconstruction(c){var a="";for(var b=0;b<solutionWords.length;b++){a+=(b+1)+"-"+solutionWords[b]+" "}return a}function showNextAnswerTextReconstruction(b){for(var a=0;a<solutionWords.length;a++){if(a==nWordToShowTextReconstruction){console.log(a+" - "+solutionWords[a]);$("#word-"+a).text(solutionWords[a]);$("#word-"+a).addClass("correct");if(nWordToShowTextReconstruction==solutionWords.length-1){b.find(".nextAnswer").removeClass("active");b.find(".allAnswers").removeClass("active")}nWordToShowTextReconstruction++;return}}}function resetActivityTextReconstruction(b,a){b.find(".feedbackComponent").fadeOut();b.find(".correctResponse").fadeOut();b.find(".disableActivity").hide();b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").addClass("desactive");$(".enterWord").attr("readonly",false);$(".incorrectWords p").remove();correctWords=new Array();incorrectWords=new Array();b.find(".reconstruction-word").removeClass("correct").removeClass("incorrect");b.find(".hint").removeClass("hint");if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}resetItemText(b)}function resetNextAnswerTextReconstruction(a){a.find(".nextAnswer").removeClass("showed");nWordToShowTextReconstruction=0;$(".enterWord").attr("readonly",false);a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")};
var nWordToShow=0;function sopaLetrasInit(a){a.find(".linkSopaLetras").each(function(){applyFuncionalityLetra($(this),a)});a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkSopaLetras(a);a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=0;var d=null;sTipoSeguimiento="fill-in";d=respuestaSopa(a);sRespuestaCorrecta=respuestaCorrectaSopa(a);nRespuesta=d.split(",").length;nRespuestaCorrecta=sRespuestaCorrecta.split(",").length;if(d!=""){b=(nRespuesta/nRespuestaCorrecta)*100}var g="0";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionSopaLetras(a);$(this).removeClass("active")}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoSopaLetras(a)}});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivitySopaLetras(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".linkSopaLetras").removeClass("desactive").addClass("desactive")}showNextAnswerSopaLetras(a)}});a.find(".allAnswers").click(function(){if($(this).attr("class").indexOf("active")!=-1){resetActivitySopaLetras(a,true);resetNextAnswerSopaLetras(a);a.find(".reiniciaComponent").removeClass("desactive");showSolutionSopaLetras(a);$(this).removeClass("active");a.find(".linkSopaLetras").removeClass("desactive").addClass("desactive")}});a.find(".reiniciaComponent").click(function(){if($(this).attr("class").indexOf("desactive")==-1){resetActivitySopaLetras(a);resetNextAnswerSopaLetras(a)}})}function nuevoIntentoSopaLetras(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".disableActivity").hide()}function showSolutionSopaLetras(a){a.find(".linkSopaLetras").each(function(){if($(this).attr("correcto")!==undefined){$(this).addClass("solutionElement")}})}function checkSopaLetras(b){var a=0;b.find(".sopaLetrasComponent table .palabraCorrecta").each(function(){a+=$(this).attr("correcto").split(",").length});if(b.find(".sopaLetrasComponent table").attr("totalCorrectos")==a){return true}else{return false}}function applyFuncionalityLetra(a,c){var b=undefined;$(a).click(function(){if(c.find(".letraActiva").length>0&&c.find('.letraActiva[rel="'+$(this).attr("rel")+'"]')!=c.find('.letraActiva[ini="true"]')){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if($(this).attr("rel").substring(0,1)==c.find(".letraActiva").attr("rel").substring(0,1)){var n=parseInt($(this).attr("rel").substring(1));var o=parseInt(c.find(".letraActiva").attr("rel").substring(1));var d=undefined;if(n>o){d=n;n=o;o=d}var g=n;for(g;g<=o;g++){var p=$(this).attr("rel").substring(0,1)+g;c.find('.linkSopaLetras[rel="'+p+'"]').addClass("letraActiva")}}else{if($(this).attr("rel").substring(1)==c.find(".letraActiva").attr("rel").substring(1)){var n=m.indexOf($(this).attr("rel").substring(0,1));var o=m.indexOf(c.find(".letraActiva").attr("rel").substring(0,1));var d=undefined;if(n>o){d=n;n=o;o=d}var g=n;for(g;g<=o;g++){var p=m.charAt(g)+$(this).attr("rel").substring(1);c.find('.linkSopaLetras[rel="'+p+'"]').addClass("letraActiva")}}else{var f=parseInt($(this).attr("rel").substring(1))-parseInt(c.find(".letraActiva").attr("rel").substring(1));var e=m.indexOf($(this).attr("rel").substring(0,1))-m.indexOf(c.find(".letraActiva").attr("rel").substring(0,1));if(Math.abs(f)==Math.abs(e)){var j=parseInt(m.indexOf(c.find(".letraActiva").attr("rel").substring(0,1)));var l=parseInt(c.find(".letraActiva").attr("rel").substring(1));var g;for(g=0;g<=Math.abs(f);g++){var k;var h;if(f>0){h=l+g}else{h=l-g}if(e>0){k=m.charAt(j+g)}else{k=m.charAt(j-g)}var p=k+h;c.find('.linkSopaLetras[rel="'+p+'"]').addClass("letraActiva")}}else{c.find(".letraActiva").removeClass("letraActiva")}}}c.find('.letraActiva[ini="true"]').attr("ini","");checkValido(c)}else{if($(this).attr("class").indexOf("letraActiva")!=-1){$(this).removeClass("letraActiva");$(this).attr("ini","")}else{$(this).addClass("letraActiva");$(this).attr("ini","true")}}});$(a).mouseover(function(){if(c.find(".letraActiva").length>0&&c.find('.letraActiva[ini="true"]').length==1&&c.find('.letraActiva[rel="'+$(this).attr("rel")+'"]')!=c.find('.letraActiva[ini="true"]')){c.find('.letraActiva[ini!="true"]').removeClass("letraActiva");var m="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if($(this).attr("rel").substring(0,1)==c.find('.letraActiva[ini="true"]').attr("rel").substring(0,1)){var n=parseInt($(this).attr("rel").substring(1));var o=parseInt(c.find('.letraActiva[ini="true"]').attr("rel").substring(1));var d=undefined;if(n>o){d=n;n=o;o=d}var g=n;for(g;g<=o;g++){var p=$(this).attr("rel").substring(0,1)+g;c.find('.linkSopaLetras[rel="'+p+'"]').addClass("letraActiva")}}else{if($(this).attr("rel").substring(1)==c.find('.letraActiva[ini="true"]').attr("rel").substring(1)){var n=m.indexOf($(this).attr("rel").substring(0,1));var o=m.indexOf(c.find('.letraActiva[ini="true"]').attr("rel").substring(0,1));var d=undefined;if(n>o){d=n;n=o;o=d}var g=n;for(g;g<=o;g++){var p=m.charAt(g)+parseInt($(this).attr("rel").substring(1));c.find('.linkSopaLetras[rel="'+p+'"]').addClass("letraActiva")}}else{var f=$(this).attr("rel").substring(1)-c.find('.letraActiva[ini="true"]').attr("rel").substring(1);var e=m.indexOf($(this).attr("rel").substring(0,1))-m.indexOf(c.find('.letraActiva[ini="true"]').attr("rel").substring(0,1));if(Math.abs(f)==Math.abs(e)){var j=parseInt(m.indexOf(c.find('.letraActiva[ini="true"]').attr("rel").substring(0,1)));var l=parseInt(c.find('.letraActiva[ini="true"]').attr("rel").substring(1));var g;for(g=0;g<=Math.abs(f);g++){var k;var h;if(f>0){h=l+g}else{h=l-g}if(e>0){k=m.charAt(j+g)}else{k=m.charAt(j-g)}var p=k+h;c.find('.linkSopaLetras[rel="'+p+'"]').addClass("letraActiva")}}}}}})}function checkValido(h){var g=new Array();var f=new Array();h.find(".letraActiva").each(function(){h.find(".linkSopaLetras[rel='"+$(this).attr("rel")+"']").addClass("palabraCompleta");if(h.find(".linkSopaLetras[rel='"+$(this).attr("rel")+"']").attr("correcto")!=undefined){var k=h.find(".linkSopaLetras[rel='"+$(this).attr("rel")+"']").attr("correcto").split(",");for(var j=0;j<k.length;j++){if($.inArray(k[j],g)==-1){g.push(k[j])}}}if($.inArray($(this).attr("rel"),f)==-1){f.push($(this).attr("rel"))}});var a=false;if(g.length>0){var e=0;while(e<g.length&&a==false){var d=new Array();h.find('.linkSopaLetras[correcto*="'+g[e]+'"]').each(function(){var l=$(this).attr("correcto").split(",");for(var j=0;j<l.length;j++){if(l[j]===g[e]){if($.inArray($(this).attr("rel"),d)==-1){d.push($(this).attr("rel"))}}}});if(d.length==f.length){var c=true;for(var b=0;b<d.length;b++){if($.inArray(d[b],f)==-1){c=false}}a=c}e++}}setTimeout(function(){if(a){h.find(".letraActiva").each(function(){h.find(".linkSopaLetras[rel='"+$(this).attr("rel")+"']").addClass("palabraCorrecta").removeClass("palabraCompleta").removeClass("letraActiva")})}else{h.find(".letraActiva").each(function(){h.find(".linkSopaLetras[rel='"+$(this).attr("rel")+"']").removeClass("palabraCompleta").removeClass("letraActiva")})}h.find(".comprobarComponent").addClass("active")},200)}function respuestaSopa(g){var e=new Array();$(g).each(function(){$(".linkSopaLetras.palabraCorrecta").each(function(){var h=$(this).attr("correcto");if($.inArray(h,e)==-1){e.push(h)}})});var b="";for(var c=0;c<e.length;c++){var f=e[c];var a=c+1;var d=a+"-";g.find(".linkSopaLetras.palabraCorrecta").each(function(){if($(this).attr("correcto")==f){d+=$(this).find("a").text().trim()}});if(c!=e.length-1){b+=d+","}else{b+=d}}return b}function respuestaCorrectaSopa(g){var f=new Array();$(g).each(function(){$(".linkSopaLetras").each(function(){var h=$(this).attr("correcto");if(h!=undefined){if(f.indexOf(h)==-1){f.push(h)}}})});var b="";for(var c=0;c<f.length;c++){var e=f[c];var a=c+1;var d=a+"-";g.find(".linkSopaLetras[correcto='"+e+"']").each(function(){d+=$(this).find("a").text().trim()});if(c!=f.length-1){b+=d+","}else{b+=d}}return b}function createWordSearch(b){var c=b.find(".sopaLetrasComponent"),a=$(c).find("table");insertLetras(c,a);sopaLetrasInit(b)}function insertLetras(c,b){var d=new Array(),a=new Array();a=$(c).attr("paramsSopa").split("|").shift();a=a.split(";");d=$(c).attr("paramsSopa").split("|").pop();d=d.split(";");$(d).each(function(e,j){var h=document.createElement("tr");var g="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(i=0;i<j.length;i++){var f=document.createElement("td");var k=document.createElement("a");$(f).addClass("linkSopaLetras").attr("rel",g.charAt(e)+i);$(a).each(function(n,l){var m=new Array();m=l.split(",");if($.inArray(g.charAt(e)+i,m)!=-1){if($(f).attr("correcto")!=undefined&&$(f).attr("correcto")!=""){$(f).attr("correcto",$(f).attr("correcto")+",word_"+n)}else{$(f).attr("correcto","word_"+n)}}});$(k).text(j.charAt(i));$(f).append(k);$(h).append(f)}$(b).append(h)})}function showNextAnswerSopaLetras(g){var f=new Array();$(g).each(function(){$(".linkSopaLetras").each(function(){var h=$(this).attr("correcto");if(h!=undefined){if(f.indexOf(h)==-1){f.push(h)}}})});var b="";for(var c=0;c<f.length;c++){if(c==nWordToShow){var e=f[c];var a=c+1;var d=a+"-";g.find(".linkSopaLetras[correcto='"+e+"']").each(function(){$(this).addClass("solutionElement")});if(nWordToShow==f.length-1){g.find(".nextAnswer").removeClass("active");g.find(".allAnswers").removeClass("active")}nWordToShow++;return}}}function resetActivitySopaLetras(b,a){b.find(".feedbackComponent").fadeOut();b.find(".disableActivity").hide();b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").addClass("desactive");b.find(".palabraCorrecta").removeClass("palabraCorrecta");b.find(".solutionElement").removeClass("solutionElement");if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}}function resetNextAnswerSopaLetras(a){a.find(".nextAnswer").removeClass("showed");nWordToShow=0;a.find(".linkSopaLetras").removeClass("desactive");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")};
function simboloRBSeleccionUnicaInit(a){a.find(".simboloRBSeleccionUnicaComponent").each(function(){applyFuncionalitySimboloRBSelecionUnica($(this),a)});sortRBSeleccionUnica(a);sortCorrectsResponsesRBSeleccionUnica(a);a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkRBSeleccionUnica(a);a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=100;var d=null;sTipoSeguimiento="choice";if(h!=true){b=scoreRBSeleccionUnica(a)}d=respuestaRBSeleccionUnica(a);sRespuestaCorrecta=respuestaCorrectaRBSeleccionUnica(a);var g="0";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionRBSeleccionUnica(a);$(this).removeClass("active")}});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoRBSeleccionUnica(a);a.find(".disableActivity").hide();$(this).removeClass("active")}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityRBSeleccionUnica(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".simboloRBSeleccionUnicaComponent").removeClass("desactive").addClass("desactive")}showNextAnswerRBSeleccionUnica(a)}});a.find(".allAnswers").click(function(){if($(this).hasClass("active")){resetActivityRBSeleccionUnica(a,true);resetNextAnswerRBSeleccionUnica(a);showSolutionRBSeleccionUnica(a);a.find(".reiniciaComponent").removeClass("desactive");a.find(".simboloRBSeleccionUnicaComponent").removeClass("desactive").addClass("desactive")}});a.find(".reiniciaComponent").click(function(){if(!$(this).hasClass("desactive")){resetActivityRBSeleccionUnica(a);resetNextAnswerRBSeleccionUnica(a)}})}function applyFuncionalitySimboloRBSelecionUnica(a,b){a.click(function(){if($(this).attr("class").indexOf("desactive")==-1){var c=$(this).attr("relGroup");if($(this).attr("selecMultiple")!="true"){b.find(".simboloRBSeleccionUnicaComponent.checked[relGroup='"+c+"']").removeClass("checked");$(this).addClass("checked")}else{if($(this).attr("class").indexOf("checked")===-1){$(this).addClass("checked")}else{$(this).removeClass("checked");$(this).removeClass("correcto")}}var d=b.find(".comprobarComponent");if(b.find(".simboloRBSeleccionUnicaComponent.checked").length>0){d.addClass("active")}else{d.removeClass("active")}}})}function sortRBSeleccionUnica(d){var b,a=d.find(".simboloRBSeleccionUnicaComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function scoreRBSeleccionUnica(f){var d,c=f.find(".simboloRBSeleccionUnicaComponent");total=0,totalCorrectos=0,totalMultiples=0,nCorrectosMarcados=0,nIncorrectosMarcados=0,nGroup=0,aGroup=new Array();c.each(function(){d=$(this);if(aGroup.indexOf(d.attr("relgroup"))==-1){aGroup.push(d.attr("relgroup"))}});var b=0;for(var a=0;a<aGroup.length;a++){var e=aGroup[a];totalCorrectos=f.find(".simboloRBSeleccionUnicaComponent[correcto=true][relGroup='"+e+"']").length;nCorrectosMarcados=f.find(".simboloRBSeleccionUnicaComponent.checked[correcto=true][relGroup='"+e+"']").length;nIncorrectosMarcados=f.find(".simboloRBSeleccionUnicaComponent.checked[correcto=false][relGroup='"+e+"']").length;total=f.find(".simboloRBSeleccionUnicaComponent[relGroup='"+e+"']").length;var h=f.find(".simboloRBSeleccionUnicaComponent[relGroup='"+e+"']").attr("selecmultiple");var g=0;if(h=="true"){nCorrectos=total-totalCorrectos+nCorrectosMarcados-nIncorrectosMarcados;g=Math.round((nCorrectos/total)*100)}else{if(nCorrectosMarcados===totalCorrectos){g=100}}b+=g}return Math.round((b/aGroup.length))}function checkRBSeleccionUnica(b){var a=true;b.find(".simboloRBSeleccionUnicaComponent").each(function(){var c="";if($(this).attr("correcto")=="false"){if($(this).attr("class").indexOf("checked")!=-1){$(this).addClass("incorrecto");a=false}}else{if($(this).attr("correcto")=="true"){if($(this).attr("class").indexOf("checked")!=-1){$(this).addClass("correcto");$(this).addClass("desactive");c=$(this).attr("relGroup")}else{a=false}if($(this).attr("selecmultiple")!="true"){b.find(".simboloRBSeleccionUnicaComponent[relGroup='"+c+"']").addClass("desactive")}}}});return a}function tipoRBSeleccionUnica(){var a="";switch(TrackingLC.getType()){case"tincan":a="choice";break;case"scorm_1_2":a="choice";break;case"scorm_2004":a="choice";break}return a}function respuestaRBSeleccionUnica(d){var a="",c,b=d.find(".simboloRBSeleccionUnicaComponent");switch(TrackingConfig.type){case"tincan":b.each(function(){c=$(this);if(c.attr("class").indexOf("checked")!=-1){a+=String.fromCharCode("a".charCodeAt(0)+(+c.attr("data-sequence-pos")-1))+","}});a=a.substring(0,a.length-1).split(",").sort().toString().split(",").join("[,]");break;case"scorm_1_2":b.each(function(){c=$(this);if(c.attr("class").indexOf("checked")!=-1){a+=String.fromCharCode("a".charCodeAt(0)+(+c.attr("data-sequence-pos")-1))+","}});a=a.substring(0,a.length-1).split(",").sort().toString();break;case"scorm_2004":b.each(function(){c=$(this);if(c.attr("class").indexOf("checked")!=-1){a+=String.fromCharCode("a".charCodeAt(0)+(+c.attr("data-sequence-pos")-1))+","}});a=a.substring(0,a.length-1).split(",").sort().toString();break}return a}function respuestaCorrectaRBSeleccionUnica(d){var a="",c,b=d.find(".simboloRBSeleccionUnicaComponent").filter("[correcto='true']");switch(TrackingConfig.type){case"tincan":b.each(function(){c=$(this);a+=String.fromCharCode("a".charCodeAt(0)+(+c.attr("data-sequence-pos")-1))+","});a=a.substring(0,a.length-1).split(",").sort().toString().split(",").join("[,]");break;case"scorm_1_2":b.each(function(){c=$(this);a+=String.fromCharCode("a".charCodeAt(0)+(+c.attr("data-sequence-pos")-1))+","});a=a.substring(0,a.length-1).split(",").sort().toString();break;case"scorm_2004":b.each(function(){c=$(this);a+=String.fromCharCode("a".charCodeAt(0)+(+c.attr("data-sequence-pos")-1))+","});a=a.substring(0,a.length-1).split(",").sort().toString();break}return a}function showSolutionRBSeleccionUnica(a){a.find(".simboloRBSeleccionUnicaComponent.incorrecto").each(function(){$(this).addClass("solutionElementSimboloRBSeleccionUnicaComponent")});a.find(".checked.incorrecto").removeClass("checked");a.find(".incorrecto").removeClass("incorrecto");a.find(".simboloRBSeleccionUnicaComponent[correcto='true']").each(function(){$(this).addClass("solutionCorrecto")})}function showRespuestasRBSeleccionUnica(a){a.find(".solutionElementSimboloRBSeleccionUnicaComponent").removeClass("solutionElementSimboloRBSeleccionUnicaComponent");a.find(".solutionCorrecto").removeClass("solutionCorrecto")}function nuevoIntentoRBSeleccionUnica(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".checked.incorrecto").removeClass("checked");a.find(".incorrecto").removeClass("incorrecto solutionElementSimboloRBSeleccionUnicaComponent")}function showNextAnswerRBSeleccionUnica(c){var a,d=c.find(".simboloRBSeleccionUnicaComponent").filter("[correcto='true']");for(var b=0;b<d.length;b++){a=d.filter("[data-correct-pos="+b+"]");if(a.hasClass("show")){a.addClass("solutionCorrecto").removeClass("show");if(b+1==d.length){c.find(".nextAnswer").removeClass("active");c.find(".allAnswers").removeClass("active")}return}}}function sortCorrectsResponsesRBSeleccionUnica(d){var b,a=d.find(".simboloRBSeleccionUnicaComponent").filter("[correcto='true']");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-correct-pos",(e)).addClass("show")})}function resetNextAnswerRBSeleccionUnica(a){a.find(".nextAnswer").removeClass("showed");a.find(".simboloRBSeleccionUnicaComponent").filter("[correcto='true']").removeClass("show").addClass("show");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")}function resetActivityRBSeleccionUnica(b,a){b.find(".feedbackComponent").fadeOut();b.find(".disableActivity").hide();b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").removeClass("desactive").addClass("desactive");b.find(".correcto").removeClass("correcto");b.find(".incorrecto").removeClass("incorrecto");b.find(".checked").removeClass("checked");b.find(".solutionCorrecto").removeClass("solutionCorrecto");b.find(".solutionElement").removeClass("solutionElement");b.find(".simboloRBSeleccionUnicaComponent").removeClass("desactive");if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}};
var nWordToShowRBSeleccionOrdenar=1;function simboloRBSeleccionOrdenarInit(a){a.find(".simboloRBSeleccionOrdenarComponent").each(function(){applyFuncionalitySimboloRBSelecionOrdenar($(this),a)});sortRBSeleccionOrdenar(a);a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityRBSeleccionOrdenar(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".simboloRBSeleccionOrdenarComponent").removeClass("checked").addClass("checked")}showNextAnswerRBSeleccionOrdenar(a)}});a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkRBSeleccionOrdenar(a);a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=100;var d=null;sTipoSeguimiento="choice";if(h!=true){b=scoreRBSeleccionOrdenar(a)}d=respuestaRBSeleccionOrdenar(a);sRespuestaCorrecta=respuestaCorrectaRBSeleccionOrdenar(a);var g="0";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionRBSeleccionOrdenar(a);$(this).removeClass("active")}});a.find(".allAnswers").click(function(){if($(this).hasClass("active")){resetActivityRBSeleccionOrdenar(a,true);resetNextAnswerRBSeleccionOrdenar(a);a.find(".reiniciaComponent").removeClass("desactive");showSolutionRBSeleccionOrdenar(a);a.find(".simboloRBSeleccionOrdenarComponent").removeClass("checked").addClass("checked");a.find(".nextAnswer").removeClass("desactive").removeClass("showed");$(this).removeClass("active")}});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoRBSeleccionOrdenar(a);a.find(".disableActivity").hide();$(this).removeClass("active")}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".reiniciaComponent").click(function(){if($(this).attr("class").indexOf("desactive")==-1){resetActivityRBSeleccionOrdenar(a);resetNextAnswerRBSeleccionOrdenar(a)}})}function applyFuncionalitySimboloRBSelecionOrdenar(a,b){a.click(function(){if($(this).attr("class").indexOf("checked")===-1){$(this).addClass("checked");var c="<p><b>"+b.find(".simboloRBSeleccionOrdenarComponent.checked").length+"</b></p>";a.find(".ordenarElement").html(c)}var d=b.find(".comprobarComponent");if(b.find(".simboloRBSeleccionOrdenarComponent.checked").length>0){d.addClass("active")}else{d.removeClass("active")}})}function sortRBSeleccionOrdenar(d){var b,a=d.find(".simboloRBSeleccionOrdenarComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function scoreRBSeleccionOrdenar(c){var b,a=c.find(".simboloRBSeleccionOrdenarComponent");total=0,totalCorrectos=0,totalMultiples=0,nCorrectosMarcados=0,nIncorrectosMarcados=0,nGroup=0,aGroup=new Array()}function checkRBSeleccionOrdenar(b){var a=true;b.find(".simboloRBSeleccionOrdenarComponent").each(function(){var d=$(this).attr("correcto");var c=$(this).find(".ordenarElement").text();if(d!=c){$(this).find(".checkElement").addClass("incorrecto");a=false}else{$(this).find(".checkElement").addClass("correcto")}});return a}function tipoRBSeleccionOrdenar(){var a="";switch(TrackingLC.getType()){case"tincan":a="choice";break;case"scorm_1_2":a="choice";break;case"scorm_2004":a="choice";break}return a}function respuestaRBSeleccionOrdenar(e){var d,c=e.find(".simboloRBSeleccionOrdenarComponent"),b="";switch(TrackingConfig.type){case"tincan":c.each(function(){d=$(this).find(".ordenarElement");if(d.text()===""){b+=$(this).attr("data-sequence-pos")+"$ "}else{b+=$(this).attr("data-sequence-pos")+"$"+d.val()+""}});b=b.substring(0,b.length-2).split("").sort(function(g,f){return g.split("$")[0]-f.split("$")[0]}).toString();b=$.map(b.split(","),function(g,f){return g.split("$")[1]}).toString();break;case"scorm_1_2":var a="";c.each(function(){a=$(this).find(".ordenarElement").text();if(a!==""){b+=a+","}});b=b.substring(0,b.length-1);break;case"scorm_2004":var a="";c.each(function(){a=$(this).find(".ordenarElement").text();if(a!==""){b+=a+","}});b=b.substring(0,b.length-1);break}return b}function respuestaCorrectaRBSeleccionOrdenar(d){var c=d.find(".simboloRBSeleccionOrdenarComponent"),b="",a="";switch(TrackingConfig.type){case"tincan":c.each(function(){a=$(this).attr("correcto");if(a!==""){b+=$(this).attr("data-sequence-pos")+"$"+a+""}});b=b.substring(0,b.length-2).split("").sort(function(f,e){return f.split("$")[0]-e.split("$")[0]}).toString();b=$.map(b.split(","),function(f,e){return f.split("$")[1]}).toString();break;case"scorm_1_2":c.each(function(){a=$(this).attr("correcto");if(a!==""){b+=a+","}});b=b.substring(0,b.length-1);break;case"scorm_2004":c.each(function(){a=$(this).attr("correcto");if(a!==""){b+=a+","}});b=b.substring(0,b.length-1);break}return b}function showSolutionRBSeleccionOrdenar(a){a.find(".solutionElement").addClass("on")}function nuevoIntentoRBSeleccionOrdenar(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".checked").removeClass("checked");a.find(".ordenarElement p").remove();a.find(".incorrecto").removeClass("incorrecto solutionElementSimboloRBSeleccionOrdenarComponent");a.find(".correcto").removeClass("correcto solutionElementSimboloRBSeleccionOrdenarComponent")}function showNextAnswerRBSeleccionOrdenar(c){var a,e=c.find(".simboloRBSeleccionOrdenarComponent");c.find(".disableActivity").show();for(var b=0;b<e.length;b++){var a=e[b];var d=$(a).attr("correcto");if(d==nWordToShowRBSeleccionOrdenar){$(a).find(".solutionElement").addClass("on");nWordToShowRBSeleccionOrdenar++;if((nWordToShowRBSeleccionOrdenar-1)==e.length){c.find(".nextAnswer").removeClass("active");c.find(".allAnswers").removeClass("active")}return}}}function resetActivityRBSeleccionOrdenar(b,a){b.find(".feedbackComponent").fadeOut();b.find(".disableActivity").hide();b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").addClass("desactive");b.find(".ordenarElement p").remove();b.find(".correcto").removeClass("correcto");b.find(".incorrecto").removeClass("incorrecto");b.find(".checked").removeClass("checked");b.find(".solutionElement").removeClass("on");if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}}function resetNextAnswerRBSeleccionOrdenar(a){a.find(".nextAnswer").removeClass("showed");a.find(".simboloRBSeleccionOrdenarComponent").removeClass("checked");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active");nWordToShowRBSeleccionOrdenar=1};
function comboInit(a){a.find(".comboComponent").each(function(){applyFuncionalityCombo($(this),a)});sortCombo(a);sortCorrectsResponsesCombo(a);a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkCombo(a);a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".nextAnswer").removeClass("active");a.find(".allAnswers").removeClass("active")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=100;var d=null;sTipoSeguimiento="choice";if(h!=true){b=scoreCombo(a)}d=respuestaCombo(a);sRespuestaCorrecta=respuestaCorrectaCombo(a);var g="0";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionCombo(a);$(this).removeClass("active");a.find(".disableActivity").show()}});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoCombo(a);a.find(".disableActivity").hide();$(this).removeClass("active")}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityCombo(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".disableActivity").show()}showNextAnswerCombo(a)}});a.find(".allAnswers").click(function(){if($(this).hasClass("active")){resetActivityCombo(a,true);resetNextAnswerCombo(a);showSolutionCombo(a);$(this).removeClass("active");a.find(".reiniciaComponent").removeClass("desactive");a.find(".nextAnswer").removeClass("active");a.find(".disableActivity").show()}});a.find(".reiniciaComponent").click(function(){if($(this).attr("class").indexOf("desactive")==-1){resetActivityCombo(a);resetNextAnswerCombo(a)}})}function resetActivityCombo(b,a){b.find(".feedbackComponent").fadeOut();b.find(".disableActivity").hide();b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".error").removeClass("error");b.find(".reiniciaComponent").addClass("desactive");b.find(".acierto").removeClass("acierto");$(this).addClass("desactive");b.find(".comboComponent").each(function(){$(this).find("option").each(function(){$(this).removeAttr("selected")});$(this).find("option[rel='default']").each(function(){$(this).attr("selected","selected")})});b.find(".seleccionCorrecta").removeClass("seleccionCorrecta");b.find(".seleccionIncorrecta").removeClass("seleccionIncorrecta");b.find(".solutionElement").removeClass("solutionElement");if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}}function applyFuncionalityCombo(a,b){$(a).change(function(){var c=0;var e=0;var d=b.find(".comboComponent");d.each(function(){if($(this).val()!="..."){c++}e++});if(CONFIG.esperarCompleto){if(c==e){b.find(".comprobarComponent").addClass("active")}else{b.find(".comprobarComponent").removeClass("active")}}else{if(c>0){b.find(".comprobarComponent").addClass("active")}else{b.find(".comprobarComponent").removeClass("active")}}})}function sortCombo(d){var b,a=d.find(".comboComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function checkCombo(d){var c=true,b,a=d.find(".comboComponent");a.each(function(){b=$(this);b.attr("myAnswer",b.find("option:selected").attr("id").split("_").pop());if(b.find("option:selected").attr("id").split("_").pop()==b.attr("correcto")){b.removeClass("seleccionIncorrecta").addClass("seleccionCorrecta");b.parent().find(".elementOn").removeClass("error").addClass("acierto")}else{c=false;b.removeClass("seleccionCorrecta").addClass("seleccionIncorrecta");b.parent().find(".elementOn").addClass("error").removeClass("acierto")}});return c}function respuestaCombo(d){var a="",e,b=d.find(".comboComponent");switch(TrackingConfig.type){case"tincan":b.each(function(){e=+$(this).find("option:selected").attr("id").split("_").pop();if(e!==-1){a+=$(this).attr("data-sequence-pos")+""+$(this).find("option:selected").text()+","}});a=a.substring(0,a.length-1).split(",").sort(function(g,f){return g.split("")[0]-f.split("")[0]}).toString();a=$.map(a.split(","),function(g,f){return g.split("")[1]}).toString();a=a.split(",").join("[,]");break;case"scorm_1_2":b.each(function(){e=+$(this).find("option:selected").attr("id").split("_").pop();if(e!==-1){a+=$(this).attr("data-sequence-pos")+"-"+String.fromCharCode("a".charCodeAt(0)+e)+","}else{a+=$(this).attr("data-sequence-pos")+"-0,"}});a=a.substring(0,a.length-1).split(",").sort(function(g,f){return g.split("-")[0]-f.split("-")[0]}).toString();a=$.map(a.split(","),function(g,f){return g.split("-")[1]}).toString();break;case"scorm_2004":b.each(function(){var g=$(this),f=g.offset();g.attr("data-sequence",Math.round((f.left)+f.top*100,10))});var c=b.map(function(){return +$(this).attr("data-sequence")});c.sort(function(g,f){return g-f});$.each(c,function(f,g){b.filter("[data-sequence="+g+"]").attr("data-sequence-pos",(f+1))});var a="",e;b.each(function(){e=+$(this).find("option:selected").attr("id").split("_").pop();if(e!==-1){a+=$(this).attr("data-sequence-pos")+"-"+String.fromCharCode("a".charCodeAt(0)+e)+","}});a=a.substring(0,a.length-1).split(",").sort().toString();break}return a}function respuestaCorrectaCombo(d){var c=d.find(".comboComponent"),b="",a;switch(TrackingConfig.type){case"tincan":c.each(function(){a=+$(this).attr("correcto");if(a!==-1){b+=$(this).attr("data-sequence-pos")+""+$(this).find("#optionCheck_"+a).text()+","}});b=b.substring(0,b.length-1).split(",").sort(function(f,e){return f.split("")[0]-e.split("")[0]}).toString();b=$.map(b.split(","),function(f,e){return f.split("")[1]}).toString();b=b.split(",").join("[,]");break;case"scorm_1_2":c.each(function(){a=+$(this).attr("correcto");if(a!==-1){b+=$(this).attr("data-sequence-pos")+"-"+String.fromCharCode("a".charCodeAt(0)+a)+","}});b=b.substring(0,b.length-1).split(",").sort(function(f,e){return f.split("-")[0]-e.split("-")[0]}).toString();b=$.map(b.split(","),function(f,e){return f.split("-")[1]}).toString();break;case"scorm_2004":c.each(function(){a=+$(this).attr("correcto");if(a!==-1){b+=$(this).attr("data-sequence-pos")+"-"+String.fromCharCode("a".charCodeAt(0)+a)+","}});b=b.substring(0,b.length-1).split(",").sort().toString();break}return b}function showSolutionCombo(a){a.find(".seleccionIncorrecta").removeClass("seleccionIncorrecta");a.find("select").each(function(){$(this).addClass("solutionElement");var b="optionCheck_"+$(this).attr("id")+"_"+$(this).attr("correcto");$(this).find($("#"+b)).prop("selected",true)});a.find(".error").removeClass("error");a.find(".acierto").removeClass("acierto");a.find(".nextAnswer").removeClass("active");a.find(".allAnswers").removeClass("active")}function nuevoIntentoCombo(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".seleccionIncorrecta").each(function(){$(this).find("option").each(function(){$(this).removeAttr("selected")});$(this).find("option[rel='default']").each(function(){$(this).attr("selected","selected")})});a.find(".error").removeClass("error");a.find(".seleccionIncorrecta").removeClass("seleccionIncorrecta")}function scoreCombo(e){var b=e.find(".comboComponent").length;var d=b*2;var a=e.find(".comboComponent.seleccionCorrecta").length;var c=e.find(".comboComponent.seleccionIncorrecta").length;var f=d-b+a-c;return Math.round((f/d)*100)}function sortCorrectsResponsesCombo(c){var b,a=c.find(".combo .comboComponent");var d=a.map(function(){return +$(this).attr("data-sequence")});d.sort(function(f,e){return f-e});$.each(d,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-correct-pos",(e)).addClass("show")})}function resetNextAnswerCombo(a){a.find(".nextAnswer").removeClass("showed");a.find(".combo .comboComponent").removeClass("show").addClass("show");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")}function showNextAnswerCombo(c){var a,d=c.find(".combo .comboComponent");for(var b=0;b<d.length;b++){a=d.filter("[data-correct-pos="+b+"]");if($(a).hasClass("show")){$(a).addClass("solutionElement").removeClass("show");var e="optionCheck_"+$(a).attr("id")+"_"+$(a).attr("correcto");$(a).find($("#"+e)).prop("selected",true);if(b+1==d.length){c.find(".nextAnswer").removeClass("active");c.find(".allAnswers").removeClass("active")}return}}};
function origenFlechasInit(a){a.find(".divInitPointFlechas").each(function(){applyFuncionalityOrigenFlechas($(this),a)});sortOrigenFlechas(a);sortCorrectsResponsesOrigenFlechas(a);a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkOrigenFlechas(a);a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=100;var d=null;sTipoSeguimiento="matching";if(h!=true){b=scoreOrigenFlechas(a)}d=respuestaOrigenFlechas(a);sRespuestaCorrecta=respuestaCorrectaOrigenFlechas(a);var g="0";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionOrigenFlechas(a);$(this).removeClass("active")}});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoOrigenFlechas(a);$(this).removeClass("active");a.find(".disableActivity").hide()}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".allAnswers").click(function(){if($(this).attr("class").indexOf("active")!=-1){resetActivityOrigenFlechas(a,true);showSolutionOrigenFlechas(a);$(this).removeClass("active");a.find(".reiniciaComponent").removeClass("desactive");a.find(".nextAnswer").removeClass("active");a.find(".disableActivity").show()}});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityOrigenFlechas(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".disableActivity").show()}showNextAnswerOrigenFlechas(a)}});a.find(".reiniciaComponent").click(function(){if($(this).attr("class").indexOf("desactive")==-1){resetActivityOrigenFlechas(a);resetNextAnswerOrigenflechas(a)}})}function applyFuncionalityOrigenFlechas(a,b){$(a).click(function(){if($(this).attr("class")=="divInitPointFlechas"){b.find(".activeArrow").removeClass("activeArrow");b.find(".linkedDestino").removeClass("linkedDestino");$(this).addClass("activeArrow");b.find(".destinoFlechaComponent").addClass("destinoOn")}})}function sortOrigenFlechas(d){var b,a=d.find(".origenFlechasComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function checkOrigenFlechas(c){var a=c.find(".destinoFlechaComponent");a.removeClass("activeDestino");var b=false;c.find(".divInitPointFlechas").addClass("seleccionIncorrecta");c.find(".arrowLine").each(function(){var d=$(this).attr("id").split("_");var e;if($("#"+d[1]).attr("correcto")==d[2]){$("#"+d[1]).addClass("seleccionCorrecta").removeClass("seleccionIncorrecta");e="#17c60e"}else{$("#"+d[1]).addClass("seleccionIncorrecta");e="#990000";b=false;$(this).addClass("incorrectArrow")}$.fn.paintArrowDestino($("#"+d[2]),$("#"+d[1]),e)});if(c.find(".seleccionIncorrecta").length==0){b=true}return b}function nuevoIntentoOrigenFlechas(a){a.find(".selectedArrow.seleccionIncorrecta").removeClass("selectedArrow");a.find(".activeArrow").removeClass("activeArrow");a.find(".linkedDestino").removeClass("linkedDestino");a.find(".seleccionIncorrecta").each(function(){var c=a.find('[id^="divArrow_'+$(this).attr("id")+'"]');var b=$(this).attr("id");c.each(function(e,g){var d=$(g).attr("id");var f=d.split("_")[2];var h=$("#"+f).attr("linkarrastrable");sLink="link_"+b;h=h.replace("sLink","");h=h.replace(",,",",")});if(c.length>0){c.remove()}$(this).removeClass("seleccionIncorrecta")})}function showSolutionOrigenFlechas(a){a.find(".selectedArrow").each(function(){var b=a.find('[id^="divArrow_'+$(this).attr("id")+'"]');if(b.length>0){b.remove()}});a.find(".divInitPointFlechas").each(function(){var d=$(this).attr("id"),c=a.find("#divArrow_"+d+"_"+$(this).attr("correcto")),b="#FFE16B";if(c.length>0){c.remove();$.fn.paintArrowDestino(a.find("#"+$(this).attr("correcto")),$(this),b)}else{a.find(".arrowLine").each(function(){var e=$(this).attr("id").split("_");if(e[1]==d){$("#divArrow_"+e[1]+"_"+e[2]).remove()}});$.fn.paintArrowDestino(a.find("#"+$(this).attr("correcto")),$(this),b)}});a.find(".seleccionIncorrecta").removeClass("seleccionIncorrecta");a.find(".seleccionCorrecta").removeClass("seleccionCorrecta");a.find(".destinoFlechaComponent").addClass("linkedDestino");a.find(".divInitPointFlechas").addClass("selectedArrow")}function scoreOrigenFlechas(c){var b=c.find(".divInitPointFlechas").length;var a=c.find(".divInitPointFlechas.seleccionCorrecta").length;return Math.round((a/b)*100)}function respuestaOrigenFlechas(e){var c=e.find(".divInitPointFlechas"),a="";switch(TrackingConfig.type){case"tincan":c.each(function(){var f=e.find('[id^="divArrow_'+this.id+'"]');if(f.length>0){a+=$("#divInitPoint_"+this.id).attr("data-sequence-pos")+""+$("#divInitPoint_"+this.id).text()+"."+($("#divDestinoArrastrar_"+f.attr("id").split("_")[2]).attr("data-sequence-pos").charCodeAt(0)-"a".charCodeAt(0)+1)+","}});a=a.substring(0,a.length-1).split(",").sort(function(g,f){return g.split("")[0]-f.split("")[0]}).toString();a=$.map(a.split(","),function(g,f){return g.split("")[1].split(".").join("[.]")});a=a.toString().split(",").join("[,]").toString();break;case"scorm_1_2":origenes=e.find(".divInitPointFlechas"),destinos=e.find(".destinoFlechaComponent");origenes.each(function(){var g=$(this),f=g.offset();g.attr("data-sequence",Math.round((f.left)+f.top*100,10))});var d=origenes.map(function(){return +$(this).attr("data-sequence")});d.sort(function(g,f){return g-f});$.each(d,function(f,g){origenes.filter("[data-sequence="+g+"]").attr("data-sequence-pos",(f+1))});destinos.each(function(){var g=$(this),f=g.offset();g.attr("data-sequence",Math.round((f.left)+f.top*100,10))});var b=destinos.map(function(){return +$(this).attr("data-sequence")});b.sort(function(g,f){return g-f});$.each(b,function(f,g){destinos.filter("[data-sequence="+g+"]").attr("data-sequence-pos",(String.fromCharCode("a".charCodeAt(0)+f)))});var a="";origenes.each(function(){var f=e.find('[id^="divArrow_'+this.id+'"]');if(f.length>0){a+=$(this).attr("data-sequence-pos")+"."+$("#"+f.attr("id").split("_")[2]).attr("data-sequence-pos")+","}});a=a.substring(0,a.length-1).split(",").sort(function(g,f){return g.split(".")[0]-f.split(".")[0]}).toString();break;case"scorm_2004":origenes=e.find(".divInitPointFlechas"),destinos=e.find(".destinoFlechaComponent");origenes.each(function(){var g=$(this),f=g.offset();g.attr("data-sequence",Math.round((f.left)+f.top*100,10))});var d=origenes.map(function(){return +$(this).attr("data-sequence")});d.sort(function(g,f){return g-f});$.each(d,function(f,g){origenes.filter("[data-sequence="+g+"]").attr("data-sequence-pos",(f+1))});destinos.each(function(){var g=$(this),f=g.offset();g.attr("data-sequence",Math.round((f.left)+f.top*100,10))});var b=destinos.map(function(){return +$(this).attr("data-sequence")});b.sort(function(g,f){return g-f});$.each(b,function(f,g){destinos.filter("[data-sequence="+g+"]").attr("data-sequence-pos",(String.fromCharCode("a".charCodeAt(0)+f)))});var a="";origenes.each(function(){var f=e.find('[id^="divArrow_'+this.id+'"]');if(f.length>0){a+=$(this).attr("data-sequence-pos")+"[.]"+$("#"+f.attr("id").split("_")[2]).attr("data-sequence-pos")+","}});a=a.substring(0,a.length-1).split(",").sort().toString().split(",").join("[,]").toString();break}return a}function respuestaCorrectaOrigenFlechas(c){var b=c.find(".divInitPointFlechas"),a="";switch(TrackingConfig.type){case"tincan":b.each(function(){a+=$(this).attr("data-sequence-pos")+""+$(this).text()+"."+(($("#divDestinoArrastrar_"+$("#"+this.id.split("divInitPoint_")[1]).attr("correcto"))).attr("data-sequence-pos").charCodeAt(0)-"a".charCodeAt(0)+1)+","});a=a.substring(0,a.length-1).split(",").sort(function(e,d){return e.split("")[0]-d.split("")[0]}).toString();a=$.map(a.split(","),function(e,d){return e.split("")[1].split(".").join("[.]")});a=a.toString().split(",").join("[,]").toString();break;case"scorm_1_2":b.each(function(){a+=$(this).attr("data-sequence-pos")+"."+$("#"+$(this).attr("correcto")).attr("data-sequence-pos")+","});a=a.substring(0,a.length-1).split(",").sort(function(e,d){return e.split(".")[0]-d.split(".")[0]}).toString();break;case"scorm_2004":b=c.find(".divInitPointFlechas"),destinos=c.find(".destinoFlechaComponent");var a="";b.each(function(){a+=$(this).attr("data-sequence-pos")+"[.]"+$("#"+$(this).attr("correcto")).attr("data-sequence-pos")+","});a=a.substring(0,a.length-1).split(",").sort().toString().split(",").join("[,]").toString();break}return a}function sortCorrectsResponsesOrigenFlechas(d){var b,a=d.find(".origenFlechasComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-correct-pos",(e)).addClass("show")})}function resetActivityOrigenFlechas(b,a){b.find(".feedbackComponent").fadeOut();b.find(".disableActivity").hide();b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").addClass("desactive");b.find(".selectedArrow").removeClass("selectedArrow");b.find(".seleccionIncorrecta").removeClass("seleccionIncorrecta");b.find(".seleccionCorrecta").removeClass("seleccionCorrecta");b.find(".activeArrow").removeClass("activeArrow");b.find(".linkedDestino").removeClass("linkedDestino");b.find(".destinoFlechaComponent").attr("linkarrastrable","");b.find('[id^="divArrow_"]').each(function(c,f){var e=$(f).attr("id").split("_")[1];var d=b.find("#"+e);$(f).remove()});if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}}function showNextAnswerOrigenFlechas(d){var b,c,f=d.find(".origenFlechasComponent"),a="#FFE16B";for(i=0;i<f.length;i++){b=f.filter("[data-correct-pos="+i+"]");if(b.hasClass("show")){var c=d.find("#"+b.attr("id").split("_")[1]),e=c.attr("id");b.removeClass("show");$.fn.paintArrowDestino(d.find("#"+c.attr("correcto")),c,a);if(d.find(".origenFlechasComponent.show").length==0){d.find(".nextAnswer").removeClass("active");d.find(".allAnswers").removeClass("active")}return}}}function resetNextAnswerOrigenflechas(a){a.find(".nextAnswer").removeClass("showed");a.find(".origenFlechasComponent").removeClass("show").addClass("show");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")};
function arrastrarInit(a){a.find(".arrastrarComponent").each(function(){$(this).data({isMoving:false,"$container":null,answers:$(this).attr("correcto").trim().split(",")});applyFuncionalityArrastrar($(this),a)});sortArrastrar(a);resetActivityArrastrar(a);a.find(".arrastrarComponent").addClass("show");a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityArrastrar(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".arrastrarComponent").removeClass("activo")}showNextAnswerArrastrar(a)}});a.find(".allAnswers").click(function(){if($(this).attr("class").indexOf("active")!=-1){resetActivityArrastrar(a,true);a.find(".arrastrarComponent").addClass("seleccionIncorrecta");a.find(".nextAnswer").removeClass("showed").removeClass("active");a.find(".destinoArrastrarComponent").removeClass("show").addClass("show");showSolutionArrastrar(a);$(this).removeClass("active");a.find(".arrastrarComponent").removeClass("activo");a.find(".reiniciaComponent").removeClass("desactive")}});a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkArrastrar(a);a.find(".arrastrarComponent").removeClass("activo");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".nextAnswer").removeClass("active");a.find(".allAnswers").removeClass("active")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=100;var d=null;sTipoSeguimiento="matching";if(h!=true){b=scoreArrastrar(a)}d=respuestaArrastrar(a);sRespuestaCorrecta=respuestaCorrectaArrastrar(a);var g="1";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionArrastrar(a);$(this).removeClass("active");a.find(".nextAnswer").removeClass("active");a.find(".allAnswers").removeClass("active");a.find(".arrastrarComponent").removeClass("activo")}});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoArrastrar(a);a.find(".arrastrarComponent").addClass("activo");$(this).removeClass("active")}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".reiniciaComponent").click(function(){if(!$(this).hasClass("desactive")){resetActivityArrastrar(a);resetNextAnswerArrastrar(a)}})}function sortArrastrar(d){var b,a=d.find(".arrastrarComponent"),c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",(e+1))})}function showSolutionArrastrar(a){var b=[],c=[];a.find(".arrastrarComponent.seleccionIncorrecta").each(function(){b.push($(this))});a.find(".destinoArrastrarComponent").each(function(){$($(this).data("$content")).data("$container",$(this))});a.find(".destinoArrastrarComponent").each(function(){if($("#"+$(this).attr("reldestino")).hasClass("seleccionCorrecta")){var d=$(this).attr("id").split("_").pop();c.push(d)}});$.each(b,function(h,g){var e=this,f=e.data("answers"),d="",i;$.each(f,function(k,l){d=e.data("answers")[k];if(jQuery.inArray(d,c)==-1){c.push(d);return false}});i=$("#divDestinoArrastrar_"+d);e.animate({left:i.css("left"),top:i.css("top")},"fast")});a.find(".arrastrarComponent").addClass("solutionElement");a.find(".arrastrarComponent").css("display","block");a.find(".arrastrarComponent .elementOn").removeClass("error").removeClass("acierto")}function checkArrastrar(b){var a=true;b.find(".destinoArrastrarComponent").each(function(){var e=$(this).attr("id").split("_").pop();if($(this).attr("reldestino")!==undefined&&$(this).attr("reldestino")!==""){var d=$("#"+$(this).attr("reldestino")).attr("correcto").split(",");var c=b.find("#"+$(this).attr("reldestino"));if(jQuery.inArray(e,d)!=-1){c.addClass("seleccionCorrecta").removeClass("seleccionIncorrecta");c.find(".elementOn").addClass("acierto").removeClass("error")}else{c.addClass("seleccionIncorrecta").removeClass("seleccionCorrecta");c.find(".elementOn").addClass("error").removeClass("acierto");a=false}}else{a=false}});b.find(".arrastrarComponent").each(function(){if($(this).attr("class").indexOf("seleccionCorrecta")==-1&&$(this).attr("class").indexOf("seleccionIncorrecta")==-1){if($(this).attr("correcto")!=undefined&&$(this).attr("correcto")!=""){$(this).addClass("seleccionIncorrecta").removeClass("seleccionCorrecta");$(this).find(".elementOn").addClass("error").removeClass("acierto")}else{if($(this).attr("reldestino")==undefined||$(this).attr("reldestino")==""){$(this).addClass("seleccionCorrecta").removeClass("seleccionIncorrecta");$(this).find(".elementOn").addClass("acierto").removeClass("error")}}}b.find(".arrastrarComponent").css("display","block")});b.attr("data-score",(b.find(".seleccionCorrecta").length/b.find(".destinoArrastrarComponent").length)*100);return a}function nuevoIntentoArrastrar(a){a.find(".seleccionIncorrecta").each(function(){$(this).animate({top:$(this).attr("topInit"),left:$(this).attr("leftInit")});$(this).data("initLeft",$(this).attr("leftInit"));$(this).data("initTop",$(this).attr("topInit"));a.find(".destinoArrastrarComponent[reldestino='"+$(this).attr("id")+"']").attr("reldestino","");a.find(".destinoArrastrarComponent[reldestino='"+$(this).attr("id")+"']").data("$content",null);$(this).removeClass("seleccionIncorrecta");$(this).find(".error").removeClass("error");$(this).data("$container",null)})}function applyFuncionalityArrastrar(a,b){$(a).bind("click",function(d){if($(a).attr("class").indexOf("activo")!=-1){var n=false;var m=false;if(!$(this).is(".ui-draggable-dragging")){var i=b;if($(".activeArrastrable",i).length>0){var r=$(".activeArrastrable",i).eq(0);var c=$(this);if(r.attr("id")!=$(this).attr("id")){var e=$(".destinoArrastrarComponent[reldestino][reldestino ="+$(".activeArrastrable",i).attr("id")+"]").eq(0);var g=$(".destinoArrastrarComponent[reldestino][reldestino ="+$(this).attr("id")+"]").eq(0);var f=$(this).attr("id");var l=r.attr("id");$(".destinoArrastrarComponent",i).each(function(){if(f==$(this).attr("reldestino")){n=true}});$(".destinoArrastrarComponent",i).each(function(){if(l==$(this).attr("reldestino")){m=true}});if(m&&n){if(e.length>0){$(e).attr({reldestino:$(c).attr("id")})}if(g.length>0){$(g).attr({reldestino:$(r).attr("id")})}$(".activeArrastrable",i).removeClass("activeArrastrable");if(!$(r).data("isMoving")&&!$(this).data("isMoving")){$(r).data("isMoving",true);var o=$(r).css("top");var h=$(r).css("left");var q=$(this).css("top");var p=$(this).css("left");$(r).stop(true).animate({top:q,left:p},function(){$(this).data("isMoving",false);$(this).removeClass("activeArrastrable")});$(this).data("isMoving",true);$(this).stop(true).animate({top:o,left:h},function(){$(this).data("isMoving",false);$(this).removeClass("activeArrastrable")});var k=null;$(".destinoArrastrarComponent",i).each(function(){if($(this).data("$content")&&$(this).data("$content").attr("id")==r.attr("id")){k=$(this);$(this).data("$content",null)}});var j=null;$(".destinoArrastrarComponent",i).each(function(){if($(this).data("$content")&&$(this).data("$content").attr("id")==c.attr("id")){j=$(this);$(this).data("$content",null)}});if(k){$(k).data("$content",$(c))}if(j){$(j).data("$content",$(r))}}}else{$(r).removeClass("activeArrastrable");$(c).addClass("activeArrastrable")}}}else{$(this).addClass("activeArrastrable")}return false}}})}function scoreArrastrar(c){var b=c.find(".arrastrarComponent").length;var a=c.find(".arrastrarComponent.seleccionCorrecta").length;return Math.round((a/b)*100)}function respuestaArrastrar(e){var a="",f,c=e.find(".destinoArrastrarComponent");switch(TrackingConfig.type){case"tincan":c.each(function(){f=$(this);var g=f.attr("reldestino");if(g!==undefined&&g!==""){a+=$("#"+g).attr("data-sequence-pos")+""+$("#"+g).text()+"."+(f.attr("data-sequence-pos").charCodeAt(0)-"a".charCodeAt(0)+1)+","}});a=a.substring(0,a.length-1).split(",").sort(function(h,g){return h.split("")[0]-g.split("")[0]}).toString();a=$.map(a.split(","),function(h,g){return h.split("")[1].split(".").join("[.]")});a=a.toString().split(",").join("[,]").toString();break;case"scorm_1_2":c.each(function(){f=$(this);var g=f.attr("reldestino");if(g!==undefined&&g!==""){a+=$("#"+g).attr("data-sequence-pos")+"."+f.attr("data-sequence-pos")+","}});a=a.substring(0,a.length-1).split(",").sort(function(h,g){return h.split(".")[0]-g.split(".")[0]}).toString();break;case"scorm_2004":origenes=e.find(".arrastrarComponent"),destinos=e.find(".destinoArrastrarComponent");origenes.each(function(){var g=$(this);g.attr("data-sequence",Math.round((+$(this).attr("leftinit").replace("px",""))+(+$(this).attr("topinit").replace("px","")*100),10))});var d=origenes.map(function(){return +$(this).attr("data-sequence")});d.sort(function(h,g){return h-g});$.each(d,function(g,h){origenes.filter("[data-sequence="+h+"]").attr("data-sequence-pos",(g+1))});destinos.each(function(){var h=$(this),g=h.offset();h.attr("data-sequence",Math.round((g.left)+g.top*100,10))});var b=destinos.map(function(){return +$(this).attr("data-sequence")});b.sort(function(h,g){return h-g});$.each(b,function(g,h){destinos.filter("[data-sequence="+h+"]").attr("data-sequence-pos",(String.fromCharCode("a".charCodeAt(0)+g)))});var a="";destinos.each(function(){var g=$(this).attr("reldestino");if(g!==undefined&&g!==""){a+=$("#"+g).attr("data-sequence-pos")+"[.]"+$(this).attr("data-sequence-pos")+","}});a=a.substring(0,a.length-1).split(",").sort().toString().split(",").join("[,]").toString();break}return a}function respuestaCorrectaArrastrar(c){var b=c.find(".arrastrarComponent"),a="";switch(TrackingConfig.type){case"tincan":b.each(function(){a+=$(this).attr("data-sequence-pos")+""+$(this).text()+".";$.each($(this).attr("correcto").split(","),function(d,e){a+=($("#divDestinoArrastrar_"+e).attr("data-sequence-pos").charCodeAt(0)-"a".charCodeAt(0)+1)+"|"});a=a.substring(0,a.length-1)+","});a=a.substring(0,a.length-1).split(",").sort(function(e,d){return e.split("")[0]-d.split("")[0]}).toString();a=$.map(a.split(","),function(e,d){return e.split("")[1].split(".").join("[.]")});a=a.toString().split(",").join("[,]").toString();break;case"scorm_1_2":b.each(function(){a+=$(this).attr("data-sequence-pos")+"."+$("#divDestinoArrastrar_"+$(this).attr("correcto")).attr("data-sequence-pos")+","});a=a.substring(0,a.length-1).split(",").sort(function(e,d){return e.split(".")[0]-d.split(".")[0]}).toString();break;case"scorm_2004":b.each(function(){a+=$(this).attr("data-sequence-pos")+"[.]"+$("#divDestinoArrastrar_"+$(this).attr("correcto")).attr("data-sequence-pos")+","});a=a.substring(0,a.length-1).split(",").sort().toString().split(",").join("[,]").toString();break}return a}function showNextAnswerArrastrar(g){var f=g.find(".destinoArrastrarComponent");var a=g.find(".destinoArrastrarComponent.show");if(a.length>0){console.log("1");for(var e=0;e<f.length;e++){console.log("2");tempDest=f.filter("[data-correct-pos="+e+"]");var b=g.find(".arrastrarComponent.show");var d=false;if(tempDest.hasClass("show")){var c=tempDest.attr("id").split("_").pop();d=false;console.log("3 "+c);b.each(function(){var h=$(this).attr("correcto");if(h.indexOf(c)!=-1&&!d){console.log("5");d=true;$(tempDest).removeClass("show");$(this).animate({left:$(tempDest).css("left"),top:$(tempDest).css("top")},"fast");$(this).removeClass("show").addClass("solutionElement")}});if(a.length==1){g.find(".nextAnswer").removeClass("active");g.find(".allAnswers").removeClass("active")}return}}}}function resetActivityArrastrar(b,a){b.find(".feedbackComponent").fadeOut();b.find(".arrastrarComponent").addClass("activo");b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").addClass("desactive");b.find(".allAnswers").addClass("active");b.find(".arrastrarComponent").each(function(){$(this).removeClass("activeArrastrable").removeClass("seleccionCorrecta").removeClass("seleccionIncorrecta").removeClass("solutionElement");$(this).find(".elementOn").removeClass("error").removeClass("acierto");$(this).animate({top:$(this).attr("topInit"),left:$(this).attr("leftInit")});$(this).data("initLeft",$(this).attr("leftInit"));$(this).data("initTop",$(this).attr("topInit"));$(".destinoArrastrarComponent[reldestino='"+$(this).attr("id")+"']").attr("reldestino","")});b.find(".destinoArrastrarComponent").each(function(){$(this).data("$content",null)});if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}}function resetNextAnswerArrastrar(a){a.find(".nextAnswer").removeClass("showed");a.find(".arrastrarComponent").removeClass("show").addClass("show");a.find(".destinoArrastrarComponent").removeClass("show").addClass("show");a.find(".nextAnswer").removeClass("active").addClass("active")};
function destinoInit(a){a.find(".destinoArrastrarComponent").each(function(){$(this).data({"$content":null});sortDestinoArrastrar(a);sortCorrectsResponsesDestinoArrastrar(a);applyFuncionalityDestinoArrastrar($(this),a)});a.find(".destinoFlechaComponent").each(function(){applyFuncionalityDestinoFlecha($(this),a)})}function sortDestinoArrastrar(d){var b,a=d.find(".destinoArrastrarComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-sequence-pos",String.fromCharCode("a".charCodeAt(0)+(e)))})}function applyFuncionalityDestinoArrastrar(a,b){$(a).click(function(){if(b.find(".activeArrastrable").length>0){moveArrastrableDestino($(this),b);var c=b.find(".destinoArrastrarComponent[reldestino][reldestino!='']").length;if(CONFIG.esperarCompleto){if(c==b.find(".arrastrarComponent").length){b.find(".comprobarComponent").addClass("active")}}else{if(c>0){b.find(".comprobarComponent").addClass("active")}}}if($(".destinoFlechaComponent").length>0){$("#"+$(this).attr("id").split("_").pop()).trigger("click")}})}function moveArrastrableDestino(c,b){var a=b.find(".activeArrastrable");b.find(".destinoArrastrarComponent[reldestino='"+$(a).attr("id")+"']").attr("reldestino","");$(a).removeClass("activeArrastrable");b.find(".destinoArrastrarComponent").each(function(){$(this).data("$content",null)});$(c).data("$content",$(a));$(a).animate({top:parseInt($(c).css("top"),10),left:parseInt($(c).css("left"),10)},function(){$(a).data("initLeft",$(c).css("left"));$(a).data("initTop",$(c).css("top"))});$(c).attr({reldestino:$(a).attr("id")})}function applyFuncionalityDestinoFlecha(a,b){$(a).click(function(){if($(this).attr("class").indexOf("linkedDestino")!=-1){var d=$(this).attr("id");$(this).removeClass("linkedDestino");var c=$(this).attr("linkArrastrable");b.find(".arrowLine").each(function(){if($(this).attr("id").indexOf(d)!=-1){var g=$(this).attr("id").split("_")[1];if(!$('.divInitPointFlechas[id="'+g+'"]').hasClass("seleccionCorrecta")){$('.divInitPointFlechas[id="'+g+'"]').removeClass("selectedArrow");$(this).remove();var f="link_"+g;c=c.replace(f,"");c=c.replace(",,",",")}}});$(this).attr("linkArrastrable",c);if(CONFIG.esperarCompleto){if(b.find(".arrowLine").length==b.find(".origenFlechasComponent").length){b.find(".comprobarComponent").addClass("active")}else{b.find(".comprobarComponent").removeClass("active")}}else{if(b.find(".arrowLine").length>0){b.find(".comprobarComponent").addClass("active")}else{b.find(".comprobarComponent").removeClass("active")}}}else{if(b.find(".activeArrow").length>0){b.find(".activeArrow").addClass("selectedArrow");b.find(".activeDestino").removeClass("activeDestino");$(this).addClass("activeDestino linkedDestino");b.find(".destinoFlechaComponent").removeClass("destinoOn");$.fn.paintArrow($(this));b.find(".arrowLine").each(function(){var f=$(this).attr("id").split("_").pop();b.find("#"+f).addClass("linkedDestino")});var e=$(this).attr("linkArrastrable");b.find(".activeArrow").each(function(){if(e!==undefined&&e!==""){e=e.concat(",link_"+$(this).attr("id"))}else{e="link_"+$(this).attr("id")}});$(this).attr("linkArrastrable",e);b.find(".activeArrow").removeClass("activeArrow");if(CONFIG.esperarCompleto){if(b.find(".arrowLine").length==$(".origenFlechasComponent",$(".itemTestLC_"+idTestLC+"_"+idItemTestLC)).length){b.find(".comprobarComponent").addClass("active")}else{b.find(".comprobarComponent").removeClass("active")}}else{if(b.find(".arrowLine").length>0){b.find(".comprobarComponent").addClass("active")}else{b.find(".comprobarComponent").removeClass("active")}}}}});b.find(".destinoFlechaComponent.linkedDestino").click(function(){var c=$(this).attr("id");$(this).removeClass("linkedDestino");b.find(".arrowLine").each(function(){if($(this).attr("id").indexOf(c)!=-1){$(this).remove()}})})}function sortCorrectsResponsesDestinoArrastrar(d){var b,a=d.find(".destinoArrastrarComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-correct-pos",(e)).addClass("show")})};
function textoEditableInit(a){a.find(".textoEditableComponent").each(function(){applyFuncionalityTextoEditable($(this),a)});sortTextoEditable(a);sortCorrectsResponsesTextoEditable(a);a.find(".comprobarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){var h=checkTextoEditable(a);a.find(".disableActivity").css("display","block");$(this).removeClass("active");a.find(".feedback").fadeOut();if(h){a.find(".act_positivo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive")}else{var c=$(this).attr("intentos");if(c==1){a.find(".act_negativo").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");a.find(".solutionComponent").addClass("active")}else{a.find(".nuevoIntentoComponent").addClass("active");a.find(".act_medio").fadeIn();$(this).attr("intentos",c-1)}}var e=getID(6);var b=100;var d=null;sTipoSeguimiento="fill-in";if(h!=true){b=scoreTextoEditable(a)}d=respuestaTextoEditable(a);sRespuestaCorrecta=respuestaCorrectaTextoEditable(a);var g="0";var f=(h==true);if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,d,f,e,0,b,sRespuestaCorrecta)}}});a.find(".enviarComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){a.find(".disableActivity").show();$(this).find("p").text("Saved");a.find(".act_medio p").text("Your answer has been sent.");a.find(".act_medio").fadeIn();a.find(".reiniciaComponent").removeClass("desactive");$(this).removeClass("active");var d=getID(6);var b=100;var c=null;sTipoSeguimiento="fill-in";c=respuestaTextoEditable(a);sRespuestaCorrecta=null;var f="0";var e=(checkActivity==true);if(TrackingConfig.type!="none"){setInteracion(f,sTipoSeguimiento,c,e,d,0,b,sRespuestaCorrecta)}}});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityTextoEditable(a,true);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".textoEditableComponent").attr("readonly",true)}showNextAnswerTextoEditable(a)}});a.find(".allAnswers").click(function(){if($(this).hasClass("active")){resetActivityTextoEditable(a,true);a.find(".textoEditableComponent").attr("readonly",true);showAllAnswersTextoEditable(a);$(this).removeClass("active");a.find(".nextAnswer").removeClass("active");a.find(".reiniciaComponent").removeClass("desactive")}});a.find(".solutionComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){showSolutionTextoEditable(a);$(this).removeClass("active")}});a.find(".nuevoIntentoComponent").click(function(){if($(this).attr("class").indexOf("active")!=-1){nuevoIntentoTextoEditable(a);$(this).removeClass("active");a.find(".disableActivity").hide()}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".reiniciaComponent").click(function(){if($(this).attr("class").indexOf("desactive")==-1){resetActivityTextoEditable(a);resetNextAnswerTextoEditable(a)}})}function applyFuncionalityTextoEditable(b,c){var a=false;$(b).keyup(function(){var e=0;var f=0;c.find(".textoEditableComponent").each(function(){if($(this).val().length>=1){e++}f++});var g=c.find(".comprobarComponent");var d=c.find(".enviarComponent");if(a){if(e==f){g.addClass("active");d.addClass("active")}else{g.removeClass("active");d.removeClass("active")}}else{if(e>0){g.addClass("active");d.addClass("active")}else{g.removeClass("active");d.removeClass("active")}}});$(b).keypress(function(){if($(this).val().length>=$(this).attr("maxlength")-1){$(this).val($(this).val().substring(0,$(this).attr("maxlength")))}})}function sortTextoEditable(b){var a=b.find(".textoEditableComponent");$.each(a,function(c,d){$(this).attr("data-sequence-pos",(c+1))})}function checkTextoEditable(e){var c=true,d=true,b,a=e.find(".textoEditableComponent");a.each(function(){b=$(this);var g=b.attr("soltext");g=g.replace("`","'");g=g.replace("","'");b.attr("soltext",g);var h=b.val();if(b.attr("ignorarespacios")=="true"){h=$.trim(h)}if(b.attr("difmayusc")=="false"){h=h.toLowerCase();g=g.toLowerCase()}h=h.replace("`","'");h=h.replace("","'");if(b.attr("enviarrespuesta")=="true"){if(h.length<1){d=false}}else{if(h.length>0){b.removeClass("correcto").removeClass("incorrecto");b.parent().find(".elementOn").removeClass("error");b.parent().find(".elementOn").removeClass("acierto");var f=g.split("|||");if($.inArray(h,f)!=-1){b.addClass("correcto");b.parent().find(".elementOn").addClass("acierto")}else{b.addClass("incorrecto");b.parent().find(".elementOn").addClass("error");c=false}}else{b.addClass("incorrecto");b.parent().find(".elementOn").addClass("error");c=false}}});if(!d){return"error"}else{return c}}function nuevoIntentoTextoEditable(a){a.find(".comprobarComponent").removeClass("active");a.find(".nuevoIntentoComponent").removeClass("active");a.find(".textoEditableComponent.incorrecto").val("");a.find(".textoEditableComponent.incorrecto").removeClass("incorrecto");a.find(".error").removeClass("error")}function showSolutionTextoEditable(a){a.find(".error").removeClass("error");a.find(".acierto").removeClass("acierto");a.find(".textoEditableComponent").each(function(){$(this).addClass("solutionElement");$(this).attr("myAnswer",$(this).val());if($(this).attr("class").indexOf("incorrecto")!=-1){var b=$(this).attr("soltext").split("|||").shift();$(this).val(b)}})}function scoreTextoEditable(e){var b=e.find(".textoEditableComponent").length;var d=b*2;var a=e.find(".textoEditableComponent.correcto").length;var c=e.find(".textoEditableComponent.incorrecto[value!='']").length;var f=d-b+a-c;return Math.round((f/d)*100)}function respuestaTextoEditable(e){var d,c=e.find(".textoEditableComponent"),b="";switch(TrackingConfig.type){case"tincan":c.each(function(){d=$(this);if(d.val()===""){b+=$(this).attr("data-sequence-pos")+"$ "}else{b+=$(this).attr("data-sequence-pos")+"$"+d.val()+""}});b=b.substring(0,b.length-2).split("").sort(function(g,f){return g.split("$")[0]-f.split("$")[0]}).toString();b=$.map(b.split(","),function(g,f){return g.split("$")[1]}).toString();break;case"scorm_1_2":c.each(function(){d=$(this);if(d.val()!=""){b+=$(this).attr("data-sequence-pos")+"-"+d.val()+""}});b=b.substring(0,b.length-2).split("").sort(function(g,f){return g.split("-")[0]-f.split("-")[0]}).toString();break;case"scorm_2004":var a="";c.each(function(){a=$(this).val();if(a!==""){b+=$(this).attr("data-sequence-pos")+"-"+$(this).val()+""}});b=b.substring(0,b.length-2).split("").sort().toString().split("").join("[,]").toString();break}return b}function respuestaCorrectaTextoEditable(d){var c=d.find(".textoEditableComponent"),b="",a="";switch(TrackingConfig.type){case"tincan":c.each(function(){a=$(this).attr("soltext");if(a!==""){b+=$(this).attr("data-sequence-pos")+"$"+a+""}});b=b.substring(0,b.length-2).split("").sort(function(f,e){return f.split("$")[0]-e.split("$")[0]}).toString();b=$.map(b.split(","),function(f,e){return f.split("$")[1]}).toString();break;case"scorm_1_2":c.each(function(){a=$(this).attr("soltext");if(a!==""){b+=$(this).attr("data-sequence-pos")+"-"+a+""}});b=b.substring(0,b.length-2).split("").sort(function(f,e){return f.split("-")[0]-e.split("-")[0]}).toString();break;case"scorm_2004":c.each(function(){a=$(this).attr("soltext");if(a!==""){b+=$(this).attr("data-sequence-pos")+"-"+a+""}});b=b.substring(0,b.length-2).split("").sort().toString().split("").join("[,]").toString();break}return b}function showNextAnswerTextoEditable(c){var a,e=c.find(".textoEditableComponent");for(var b=0;b<e.length;b++){a=e.filter("[data-correct-pos="+b+"]");if(a.hasClass("show")){a.addClass("solutionElement").removeClass("show");var d=a.attr("soltext").split("|||").shift();a.val(d);if(b+1==e.length){c.find(".nextAnswer").removeClass("active");c.find(".allAnswers").removeClass("active")}return}}}function showAllAnswersTextoEditable(a){a.find(".error").removeClass("error");a.find(".acierto").removeClass("acierto");a.find(".textoEditableComponent").each(function(){$(this).addClass("solutionElement");$(this).attr("myAnswer",$(this).val());var b=$(this).attr("soltext").split("|||").shift();$(this).val(b)})}function sortCorrectsResponsesTextoEditable(d){var b,a=d.find(".textoEditableComponent");var c=a.map(function(){return +$(this).attr("data-sequence")});c.sort(function(f,e){return f-e});$.each(c,function(e,f){a.filter("[data-sequence="+f+"]").attr("data-correct-pos",(e)).addClass("show")})}function resetNextAnswerTextoEditable(a){a.find(".nextAnswer").removeClass("showed");a.find(".textoEditableComponent").removeClass("show").addClass("show");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")}function resetActivityTextoEditable(b,a){b.find(".textoEditableComponent").attr("readonly",false);b.find(".feedbackComponent").fadeOut();b.find(".disableActivity").hide();b.find(".solutionComponent").removeClass("active");b.find(".nuevoIntentoComponent").removeClass("active");b.find(".comprobarComponent").removeClass("active");b.find(".comprobarComponent").attr("intentos",2);b.find(".reiniciaComponent").addClass("desactive");b.find(".incorrecto").removeClass("incorrecto");b.find(".correcto").removeClass("correcto");b.find(".error").removeClass("error");b.find(".acierto").removeClass("acierto");b.find(".textoEditableComponent").val("");b.find(".solutionElement").removeClass("solutionElement");b.find(".enviarComponent p").text("Save");b.find(".enviarComponent").addClass("active");if(!a){b.find("audio").each(function(){try{if(typeof this.pause!="undefined"){this.pause();this.setCurrentTime(0)}if(typeof this.player!="undefined"){if(typeof this.player.pause!="undefined"){this.player.pause();this.player.setCurrentTime(0)}}}catch(c){}})}};
var nodeTextXML=function(b){if($("P",b).length>0){$("P",b).each(function(){if($(this).attr("ALIGN")){$(this).attr("style","text-align:"+$(this).attr("ALIGN")+";");$(this).removeAttr("ALIGN")}})}if($("p",b).length>0){$("p",b).each(function(){if($(this).attr("ALIGN")){$(this).attr("style","text-align:"+$(this).attr("ALIGN")+";");$(this).removeAttr("ALIGN")}})}if($("TEXTFORMAT",b).length>0){$("TEXTFORMAT",b).each(function(){$(this).children().appendTo($(this).parent());$(this).remove()})}if($("textformat",b).length>0){$("textformat",b).each(function(){$(this).children().appendTo($(this).parent());$(this).remove()})}if($("FONT",b).length>0){$("FONT",b).each(function(i){style="";var h;if($(this).attr("COLOR")){h=$(this).attr("COLOR");style+="color:"+$(this).attr("COLOR")+";";$(this).removeAttr("COLOR")}if($(this).attr("SIZE")){style+="font-size:"+$(this).attr("SIZE")+"px;";$(this).removeAttr("SIZE")}if($(this).attr("LETTERSPACING")){style+="letter-spacing:"+$(this).attr("LETTERSPACING")+";";$(this).removeAttr("LETTERSPACING")}$(this).removeAttr("face").removeAttr("FACE");$(this).removeAttr("kerning").removeAttr("KERNING");if(style!=""){$(this).attr("style",style)}})}var e=c(b);e=a(e,"text-align:LEFT","text-align:left");e=a(e,"<P","<p");e=a(e,"</P>","</p>");e=a(e,"<FONT","<span");e=a(e,"</FONT>","</span>");var f=e.indexOf("<html>")+6;var d=e.indexOf("</html>");var g=e.substr(f,d);return $(g);function a(j,i,h){while(j.toString().indexOf(i)!=-1){j=j.toString().replace(i,h)}return j}function c(h){var j="";try{if(window.ActiveXObject){j=h.xml}else{j=(new XMLSerializer()).serializeToString(h)}}catch(i){}return j}};
function botonAudioInit(a){$(a).find(".audioKidsBox").mediaelementplayer({features:["playpause","progress"],audioWidth:154,audioHeight:50,enableKeyboard:false});$(a).find(".audioKidsBoxArrastrar").mediaelementplayer({features:["playpause"],audioWidth:44,audioHeight:44})};
function ahorcadoInit(a){a.find(".ahorcadoComponent .bloqueRespuesta p").addClass("show");a.find(".reiniciaComponent").click(function(){if($(this).attr("class").indexOf("desactive")==-1){resetActivityAhorcado(a);resetNextAnswerAhorcado(a);$(this).addClass("desactive")}});a.find(".allAnswers").click(function(){if($(this).hasClass("active")){resetActivityAhorcado(a);resetNextAnswerAhorcado(a);a.find(".ahorcadoComponent .bloqueRespuesta p").each(function(){var b=$(this).attr("rel");$(this).text(String.fromCharCode(b))});a.find(".nextAnswer").removeClass("active");$(this).removeClass("active");a.find(".reiniciaComponent").removeClass("desactive");a.find(".disableActivity").show()}});a.find(".nextAnswer").click(function(){if($(this).hasClass("active")){if(!$(this).hasClass("showed")){resetActivityAhorcado(a);$(this).addClass("showed");a.find(".reiniciaComponent").removeClass("desactive");a.find(".disableActivity").show()}showNextAnswerAhorcado(a)}});a.find(".closeButton").click(function(){a.find(".feedbackComponent").fadeOut()});a.find(".divletterTecladoAhorcado").click(function(){var d=$(".ahorcadoComponent");var c=parseInt($(d).attr("intentos"));var b=parseInt($(d).attr("totalfallos"));var e=$(this);var f=$(this).attr("rel");if($(d).find(".bloqueRespuesta p[rel='"+f+"']").length>0){($(d).find(".bloqueRespuesta p[rel='"+f+"']")).each(function(){$(this).text(String.fromCharCode($(this).attr("rel"))).attr("correcto","1");$(e).addClass("correct")});var g=$(d).find(".bloqueRespuesta p").length;var h=$(d).find(".bloqueRespuesta p[correcto='1']").length;if(g==h){$(d).find(".bloqueRespuesta p").addClass("correct");a.find(".act_positivo").fadeIn();sendInteraction(100,d,true);a.find(".reiniciaComponent").removeClass("desactive");a.find(".disableActivity").show()}}else{$(e).addClass("incorrect");if(b<c){b++;$(d).attr("totalfallos",b);$("#divFlag_"+b,$(".itemTestLCComponent")).addClass("active")}else{a.find(".disableActivity").show();$(".act_medio").fadeIn();sendInteraction(0,d,false);a.find(".reiniciaComponent").removeClass("desactive");($(d).find(".bloqueRespuesta p")).each(function(){if($(this).attr("correcto")!=1){var i=$(this).attr("rel");$(this).text(String.fromCharCode(i));$(this).addClass("incorrect")}})}}$(e).addClass("active")})}function resetActivityAhorcado(a){a.find(".feedbackComponent").fadeOut();a.find(".disableActivity").hide();a.find(".divFlag.active").removeClass("active");a.find(".bloqueRespuesta p").text("").removeAttr("correcto").removeClass("correct").removeClass("incorrect");a.find(".ahorcadoComponent").attr("totalfallos","0");a.find(".divletterTecladoAhorcado").removeClass("correct").removeClass("active")}function showNextAnswerAhorcado(d){var a,e=d.find(".ahorcadoComponent .bloqueRespuesta p");for(var c=0;c<e.length;c++){a=e[c];if($(a).hasClass("show")){$(a).removeClass("show");var b=$(a).attr("rel");$(a).text(String.fromCharCode(b));if(c+1==e.length){d.find(".nextAnswer").removeClass("active");d.find(".allAnswers").removeClass("active")}return}}}function resetNextAnswerAhorcado(a){a.find(".nextAnswer").removeClass("showed");a.find(".ahorcadoComponent .bloqueRespuesta p").removeClass("show").addClass("show");a.find(".nextAnswer").removeClass("active").addClass("active");a.find(".allAnswers").removeClass("active").addClass("active")}function sendInteraction(b,d,f){var e=getID(6);var c="";var a="";sTipoSeguimiento="fill-in";($(d).find(".bloqueRespuesta p")).each(function(){var h=$(this).attr("rel");a+=String.fromCharCode(h);if($(this).text().length!=1){c+="-"}else{c+=$(this).text()}});var g="0";if(TrackingConfig.type!="none"){setInteracion(g,sTipoSeguimiento,c,f,e,0,b,a)}};
if(navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)!==null){typeDevice="ipad"}else{typeDevice="other"}var CONFIG={project:"Xerais",urlCommoncontents:"commoncontents/",urlPlugins:"commoncontents/js/plugins/",urlRecursos:"resources/",cssFile:"testLC_KidsBox.css",typeDevice:typeDevice,intentos:-1,esperarCompleto:false,esperarCompletoArrastrar:false,topSpace:54,defaultButtonWidthVF:95,minimize:false,devConfig:"development/configDev.js",production:false,seleccionable:true,timeBackground:1000};function funcionalityActivity(){$("body").find(".itemTestLCComponent").each(function(a,b){if($(this).find(".origenFlechasComponent").length>0){origenFlechasInit($(this))}if($(this).find(".destinoFlechaComponent").length>0){destinoInit($(this))}if($(this).find(".verdaderoFalsoComponent").length>0){verdaderoFalsoInit($(this))}if($(this).find(".textoHighlightComponent").length>0){textoHighlightInit($(this))}if($(this).find(".textReconstructionComponent").length>0){$(this).find(".nuevoIntentoComponent").remove();$(this).find(".solutionComponent").remove();textReconstructionInit($(this))}if($(this).find(".textCorrectionComponent").length>0){textCorrectionInit($(this))}if($(this).find(".simboloRBSeleccionUnicaComponent").length>0){simboloRBSeleccionUnicaInit($(this))}if($(this).find(".simboloRBSeleccionOrdenarComponent").length>0){simboloRBSeleccionOrdenarInit($(this))}if($(this).find(".comboComponent").length>0){comboInit($(this))}if($(this).find(".sopaLetrasComponent").length>0){createWordSearch($(this))}if($(this).find(".arrastrarComponent").length>0){arrastrarInit($(this))}if($(this).find(".destinoArrastrarComponent").length>0){destinoInit($(this))}if($(this).find("audio").length>0){botonAudioInit($(this))}if($(this).find(".textoEditableComponent").length>0){textoEditableInit($(this))}if($(this).find(".textoEditableComponent[enviarrespuesta='true']").length>0){$(this).find(".comprobarComponent").remove();$(this).find(".nuevoIntentoComponent").remove();$(this).find(".solutionComponent").remove();$(this).find(".nextAnswer").remove();$(this).find(".allAnswers").remove()}else{$(this).find(".enviarComponent").remove()}if($(this).find(".tecladoAhorcadoComponent").length>0){ahorcadoInit($(this));$(this).find(".comprobarComponent").remove();$(this).find(".nuevoIntentoComponent").remove();$(this).find(".solutionComponent").remove()}if($(this).find(".cartaDivComponent").length>0){$(this).find(".comprobarComponent").remove();$(this).find(".nuevoIntentoComponent").remove();$(this).find(".solutionComponent").remove();$(this).find(".nextAnswer").remove();$(this).find(".allAnswers").remove()}if($(this).find(".feedbackComponent").length==0){$(this).find(".comprobarComponent").remove();$(this).find(".nuevoIntentoComponent").remove();$(this).find(".solutionComponent").remove();$(this).find(".nextAnswer").remove();$(this).find(".allAnswers").remove()}if($(this).find(".cartaDivComponent").length>0){$(this).find(".cartaDivComponent").memoryCards()}$(this).find(".arrastrarComponent").drag();$(this).find(".destinoArrastrarComponent").drop();var c=$(this).find(".letraComponent").parent().attr("class");if(c!=".divCrucigrama"){$(this).find(".letraComponent").crucigrama()}})}function getID(c){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");if(!c){c=Math.floor(Math.random()*b.length)}var d="";for(var a=0;a<c;a++){d+=b[Math.floor(Math.random()*b.length)]}return d};
(function(a){a.fn.imageLoader=function(i){var h=this;var g=new Array();var e=new Array();var c={};var d=a.extend({},c,i);var b=function(){h.each(function(){g.push(a(this).attr("src"))});if(d.imagesToLoad){a.merge(g,d.imagesToLoad)}a.each(g,function(k,l){var j=new Image();j.src=g[k];a(j).load(function(){e.push(a(this));f()}).error(function(){e.push(a(this));f()})});return h};var f=function(){if(h.length==e.length){if(a.isFunction(d.onLoaded)){return d.onLoaded.apply(h,[])}}else{return false}};return b()}})(jQuery);
(function(g){var b=new Array();var f=false;var a,h,e;var d=false;var c=false;g.fn.memoryCards=function(p){var n=this;g(this).parent().data("initialNumberOfAttempts","15");g(this).parent().data("numberOfAttempts",g.fn.memoryCards.initialNumberOfAttempts);g(this).parent().data("coupleCompare",new Array());g(this).parent().data("audioLoaded",false);g(this).parent().data("typeCards","text");g(this).parent().data("idSucceeded",new Array());g(this).parent().data("firstReset",true);var k=g(".cartaImgComponent",g(this).eq(0)).attr("urlReverso");var m=g(".cartaImgComponent",g(this).eq(0)).attr("urlImgAudio");var j={};g.fn.memoryCards.options=g.extend(j,p);if(g("#memoryCards_div_radios").length==0){g.fn.memoryCards.applyFuncionalityControls(this)}var l=new Array();g(this).each(function(){l.push(g(".cartaImgComponent",this).attr("src"))});g(".cartaImgComponent",g(this).parent()).imageLoader({imagesToLoad:[k,m],onLoaded:function(){i()}});var i=function(){n.each(function(){g(this).data("state","quiet");g.fn.memoryCards.applyFuncionalityMemoryCards(this);g.fn.memoryCards.resetGame(g(this).parent())})};g.fn.memoryCards.changeToAudioCards(g(this).parent());var o=g(this).parent();g(o).find(".reiniciaComponent").click(function(){if(g(this).attr("class").indexOf("desactive")==-1){g.fn.memoryCards.resetGame(g(this).parent());g(this).addClass("desactive")}});g(o).find(".closeButton").click(function(){g(o).find(".feedbackComponent").fadeOut()})};g.fn.memoryCards.initialNumberOfAttempts=15;g.fn.memoryCards.applyFuncionalityTurnEffect=function(i){g(i).bind("touchstart",function(j){j.stopPropagation()});g(i).bind("click.turn",function(l){if(!c){if(g(i).parent().data("numberOfAttempts")>0&&g(i).parent().data("state")=="quiet"){if(g.inArray(g(i).attr("id"),g(i).parent().data("coupleCompare"))==-1&&g.inArray(g(i).attr("id"),g(i).parent().data("idSucceeded"))==-1&&g(i).parent().data("coupleCompare").length<2&&g(i).is(".cartaDivComponent.turnedDown")){var j=g(i).parent().data("coupleCompare");j.push(g(i).attr("id"));g(i).parent().data("coupleCompare",j);var m=g(this).attr("data_audioElement");if(m!=undefined){for(var k=0;k<b.length;k++){if(k!=m){b[k].pause();b[k].setSrc(b[k].src)}}f=true;b[m].play()}g.fn.memoryCards.initTurnDownUp(i)}}}})};g.fn.memoryCards.resetGame=function(i){if(g.fn.memoryCards.isQuietState(i)&&g(i).data("state")=="quiet"||g(i).data("firstReset")==true){if(g(i).data("firstReset")==true){(i).data("firstReset",false)}g(i).data("state","ressetting");g(i).data("coupleCompare",new Array());g(i).data("idSucceeded",new Array());g(i).data("numberOfAttempts",g.fn.memoryCards.initialNumberOfAttempts);g.fn.memoryCards.updateAttemptsControls(g.fn.memoryCards.initialNumberOfAttempts,i);g(".cartaDivComponent",i).css({"border-color":"orange"});g.fn.memoryCards.hideFeedback(i);g.fn.memoryCards.turnUpAll(i);setTimeout(function(){g.fn.memoryCards.reorderCards()},1500,i);setTimeout(function(){g.fn.memoryCards.turnDownAll()},3000,i);setTimeout(function(){g.fn.memoryCards.disableResetting(i)},3500)}};g.fn.memoryCards.disableResetting=function(i){g(i).data("state","quiet")};g.fn.memoryCards.initTurnDownUp=function(i){g.fn.memoryCards.turnDownUp(i,false);g.fn.memoryCards.turnDownUp(g(".divHighlight",i),true);g.fn.memoryCards.turnDownUp(g(".cartaImgComponent",i),true)};g.fn.memoryCards.turnDownUp=function(m,n){g(m).data("turningDown");var l=g(m).css("width");var j=g(m).css("left");var i=g(m).css("top");var k={};if(!n){k={width:"0px",left:parseInt(j)+parseInt(l)/2+"px",top:parseInt(i)-10+"px"}}else{k={width:"0px"}}g(m).animate(k,250,function(){if(g(m).is(".cartaImgComponent")){g.fn.memoryCards.toggleSrc(m)}g.fn.memoryCards.turnUp(m,l,j,i)})};g.fn.memoryCards.turnUp=function(l,k,j,i){g(l).data("turningUp");g(l).animate({width:k,left:j,top:i},250,function(){if(g(l).is(".cartaDivComponent")){if(g(l).is(".turnedDown")){g(l).removeClass("turnedDown");g(l).addClass("turnedUp")}else{g(l).removeClass("turnedUp");g(l).addClass("turnedDown")}if(g(l).parent().data("coupleCompare").length==2){c=true;object1=g("#"+g(l).parent().data("coupleCompare")[0]);object2=g("#"+g(l).parent().data("coupleCompare")[1]);if(g(l).is(".cartaDivComponent")&&g(object1).is(".turnedUp")&&g(object2).is(".turnedUp")&&!f){g(object1).data("state","comparing");g(object2).data("state","comparing");var n=g.fn.memoryCards.checkCards(object1,object2);g.fn.memoryCards.hightlightEffect(g(".divHighlight",object1),n);g.fn.memoryCards.hightlightEffect(g(".divHighlight",object2),n);if(n=="fail"){g.fn.memoryCards.excludeFromCoupleInTransition(object1);g.fn.memoryCards.excludeFromCoupleInTransition(object2);var m=g(this).parent().data("numberOfAttempts");m--;g(this).parent().data("numberOfAttempts",m);g.fn.memoryCards.updateAttemptsControls(m,g(l).parent())}else{g.fn.memoryCards.setSucceded(object1);g.fn.memoryCards.setSucceded(object2);g.fn.memoryCards.excludeFromCoupleInTransition(object1);g.fn.memoryCards.excludeFromCoupleInTransition(object2);g(object1).data("state","quiet");g(object2).data("state","quiet")}g.fn.memoryCards.checkEndGame(g(l).parent());g(l).data("state","quiet")}else{h=object1;e=object2;a=l;d=true}}}})};g.fn.memoryCards.compareObjects=function(){if(d&&g(h).hasClass("turnedUp")&&g(e).hasClass("turnedUp")){var j=g.fn.memoryCards.checkCards(h,e);g.fn.memoryCards.hightlightEffect(g(".divHighlight",h),j);g.fn.memoryCards.hightlightEffect(g(".divHighlight",e),j);g(this).parent().data("coupleCompare",new Array());if(j=="fail"){g.fn.memoryCards.excludeFromCoupleInTransition(h);g.fn.memoryCards.excludeFromCoupleInTransition(e);var i=g(a).parent().data("numberOfAttempts");i--;g(a).parent().data("numberOfAttempts",i);g.fn.memoryCards.updateAttemptsControls(i,g(a).parent())}else{g.fn.memoryCards.setSucceded(h);g.fn.memoryCards.setSucceded(e);g.fn.memoryCards.excludeFromCoupleInTransition(e);g.fn.memoryCards.excludeFromCoupleInTransition(e);g(object1).data("state","quiet");g(object2).data("state","quiet")}g.fn.memoryCards.checkEndGame(g(a).parent());d=false}};g.fn.memoryCards.hideFeedback=function(i){g(".act_positivo",i).fadeOut();g(".act_medio",i).fadeOut()};g.fn.memoryCards.isQuietState=function(j){var i=true;g(".cartaDivComponent",j).each(function(){try{if(g(this).data("state")!="quiet"){i=false}}catch(k){}});return i};g.fn.memoryCards.turnUpAll=function(i){g(".cartaDivComponent.turnedDown",i).each(function(){g.fn.memoryCards.initTurnDownUp(this)})};g.fn.memoryCards.turnDownAll=function(i){if(g.fn.memoryCards.isQuietState(i)){g(".cartaDivComponent.turnedUp",i).each(function(){g.fn.memoryCards.initTurnDownUp(this)})}};g.fn.memoryCards.reorderCards=function(j){if(g.fn.memoryCards.isQuietState(j)){g.fn.memoryCards.reordening=true;var i=new Array();g(".cartaDivComponent",j).each(function(){var k=new Array();k.push(g(this).css("left"),g(this).css("top"));i.push(k)});i.sort(function(){return 0.5-Math.random()});g(".cartaDivComponent",j).each(function(){var k=g(this);var m="";var l="";g.each(i,function(n,o){if(k.css("left")!=o[0]||k.css("top")!=o[1]||i.length<2){m=o[0];l=o[1];i.splice(n,1);return false}});g(this).data("state","reordening");g(this).animate({left:m,top:l},1000,function(){g(this).data("state","quiet")})})}};g.fn.memoryCards.changeToAudioCards=function(i){if(g(i).data("typeCards")=="text"){g(i).data("typeCards","audio");if(!g(i).data("audioLoaded")){g(".cartaDivComponent").each(function(){var m=g(this);if(g(this).attr("urlMP3")!=""){var k=g(this).attr("urlMP3");var j=document.createElement("audio");g(j).attr({id:g(this).attr("id")+"_audio",controls:"controls",preload:"none",});g(j).addClass("cartaAudio");var l=document.createElement("source");g(l).attr({type:"audio/mpeg",src:k});g(j).append(l);g(this).append(j);g(this).find("audio").mediaelementplayer({features:["playpause"],success:function(n,o){g(m).attr("data_audioElement",b.length);n.addEventListener("ended",function(){f=false;g.fn.memoryCards.compareObjects()});b.push(n)}})}});g(i).data("audioLoaded",true)}}};g.fn.memoryCards.getMinCss=function(j){try{var i=new Array();g(".cartaDivComponent").each(function(){i.push(parseInt(g(this).css(j)))});i.sort(function(m,l){return m-l});return i[0]}catch(k){return undefined}};g.fn.memoryCards.applyFuncionalityControls=function(k){var l=g.fn.memoryCards.getMinCss("top");var i=g.fn.memoryCards.getMinCss("left");var j=g.fn.memoryCards.getAttemptsControls(g(k).parent().attr("id"),g(k).parent());g(k).parent().append(j)};g.fn.memoryCards.updateAttemptsControls=function(k,j){var i=g("#memoryCards_label_attemps");g(i).html(k)};g.fn.memoryCards.getAttemptsControls=function(m,l){var k=document.createElement("label");g(k).append("Number of attempts: ");var j=document.createElement("label");g(j).attr({id:"memoryCards_label_attemps"});g(j).append(g.fn.memoryCards.initialNumberOfAttempts);var i=document.createElement("div");g(i).addClass("attempControls");g(i).attr({id:"memoryCards_div_attempts"});g(i).append(k);g(i).append(j);return i};g.fn.memoryCards.applyFuncionalityMemoryCards=function(i){g.fn.memoryCards.applyFuncionalityTurnEffect(i)};g.fn.memoryCards.checkEndGame=function(i){var j=i.find(".cartaDivComponent").length;if(g(i).data("numberOfAttempts")==0){i.find(".cartaDivComponent").data("state","quiet");i.find(".cartaDivComponent").length;g.fn.memoryCards.sendInteraction(i,false);i.find(".act_medio").fadeIn();i.find(".reiniciaComponent").removeClass("desactive")}else{if(g(i).data("idSucceeded")!=undefined){if(g(i).data("idSucceeded").length===g(".cartaDivComponent").length){g(i).find(".cartaDivComponent").data("state","quiet");g.fn.memoryCards.sendInteraction(i,true);g(i).find(".act_positivo").fadeIn();g(i).find(".reiniciaComponent");g(i).find(".reiniciaComponent").removeClass("desactive")}}}};g.fn.memoryCards.excludeFromCoupleInTransition=function(k){var j=g(k).parent().data("coupleCompare");var i=g.inArray(g(k).attr("id"),j);if(i!=-1){j.splice(j,1)}g(k).parent().data("coupleCompare",j)};g.fn.memoryCards.setSucceded=function(j){if(!g(j).is(".succeded")){g(j).addClass("succeeded")}if(g.inArray(j,g(j).parent().data("idSucceeded"))==-1){var i=g(j).parent().data("idSucceeded");i.push(g(j).attr("id"));g(j).parent().data("idSucceeded",i)}};g.fn.memoryCards.checkCards=function(j,i){try{return(g(j).eq(0).attr("correcto")==g(i).eq(0).attr("id"))?"success":"fail"}catch(k){return"fail"}};g.fn.memoryCards.toggleSrc=function(j){var k=g(j).attr("urlImgAudio");var i=g(j).attr("urlReverso");if(g(j).attr("src")==g(j).attr("urlRecurso")||g(j).attr("src")==k){g(j).eq(0).attr("src",i)}else{g(j).eq(0).attr("src",g.fn.memoryCards.getUrlImage(j))}};g.fn.memoryCards.hightlightEffect=function(k,m){if(g(k).eq(0).is(".divHighlight")){g(k).removeClass("successHighlight");g(k).removeClass("failHighlight");switch(m){case"success":g(k).addClass("successHighlight");break;case"fail":g(k).addClass("failHighlight");break}var l=0;var j=0;for(l=0;l<3;l++){g(k).eq(0).animate({opacity:0.4},250).animate({opacity:0},250,function(){if(j<2){j++}else{if(m=="fail"){g.fn.memoryCards.initTurnDownUp(g(this).parent());g(k).data("state","ressetingcomparing");c=false}else{c=false}}})}}};g.fn.memoryCards.getUrlImage=function(i){var j=g(i).attr("urlImgAudio");if(g(i).parent().parent().data("typeCards")=="audio"&&g(i).parent().attr("urlMP3")!=""){return j}else{return g(i).attr("urlRecurso")}};g.fn.memoryCards.sendInteraction=function(r,p){var q=r.find(".cartaDivComponent.turnedUp.succeeded").length;var j=r.find(".cartaDivComponent").length;var l=0;var o="0";var m="likert";var k="";var n="";var i=getID(6);if(q!=0){l=q/j*100}if(TrackingConfig.type!="none"){setInteracion(o,m,k,p,i,0,l,n)}}})(jQuery);
(function(a){a.fn.drag=function(b){if(CONFIG.typeDevice!="ipad"){opc_dragdrop=a.extend(a.fn.opc_default,b);a(this).each(function(c){a.fn.drag.applyFuncionalityDragDrop(this,opc_dragdrop)})}};a.fn.drag.applyFuncionalityDragDrop=function(b,g){var c,f,e,d;a(b).data("initLeft",a(b).css("left"));a(b).data("initTop",a(b).css("top"));a(b).bind("dragstart",function(h){});a(b).bind("drag",function(h){});a(b).bind("dragstop",function(h,i){});a(b).bind("touchstart",function(h){h.preventDefault();h.stopPropagation()})};a.fn.drop=function(b){opc_drop=a.extend(a.fn.opc_default,b);a(this).each(function(c){a.fn.drop.applyFuncionalityDragDrop(this,opc_drop)})};a.fn.drop.applyFuncionalityDragDrop=function(b,c){a(b).bind("drop",function(h,i){var j=a(i.draggable).attr("id");var f=a(this).parent();var d=a(this).data("$content");var e=a("#"+j,f).data("initTop");var g=a("#"+j,f).data("initLeft");if(d){d.draggable("disable");d.stop(true).animate({top:e,left:g},"fast",function(){d.draggable("enable")});a(".destinoArrastrarComponent").each(function(){if(a(this).data("$content")&&a(this).data("$content").attr("id")==a(d).attr("id")){a(this).data("$content",null)}});a(".destinoArrastrarComponent").each(function(){if(a(this).data("$content")&&a(this).data("$content").attr("id")==a(i.draggable).attr("id")){a(this).data("$content",d)}});d.data("initTop",e);d.data("initLeft",g);a('.destinoArrastrarComponent[reldestino="'+a("#"+j,f).attr("id")+'"]').attr("reldestino",d.attr("id"))}else{a(this).attr("reldestino",a(i.draggable).attr("id"))}a(a(i.draggable),f).draggable("disable");a(a(i.draggable),f).stop(true).animate({top:a(this).css("top"),left:a(this).css("left")},"fast",function(){a(a(i.draggable),f).draggable("enable")});a(this).attr("reldestino",a(a(i.draggable),f).attr("id"));a(".destinoArrastrarComponent",a(this).parent()).each(function(){if(a(this).data("$content")&&a(this).data("$content").attr("id")==a(i.draggable).attr("id")){a(this).data("$content",null)}});a(this).data("$content",a(i.draggable));a.fn.checkComprobar(f);a(this).removeClass(c.activeDestinoClassElement);a(i.draggable).removeClass(c.activeArrastrableClassElement);a(i.draggable).data("initLeft",a(this).css("left"));a(i.draggable).data("initTop",a(this).css("top"));return false});a(b).bind("dropover",function(d){a(this).addClass(c.activeDestinoClassElement);if(d.preventDefault){d.preventDefault()}return false});a(b).bind("dropout",function(d){a(this).removeClass(c.activeDestinoClassElement);return false})};a.fn.opc_default={activeArrastrableClassElement:"activeArrastrable",activeDestinoClassElement:"activeDestino"};a.fn.arrastrableToReplace=function(e,b,d){var c=undefined;a(".arrastrarComponent",d).each(function(){if(a(this).css("top")==e&&a(this).css("left")==b){c=a(this)}});return c};a.fn.activarTransparencias=function(b){b.css("zIndex",1000);a(".destinoArrastrarComponent",b.parent()).each(function(){a(this).css({zIndex:500,zoom:1,filter:"alpha(opacity=50)",opacity:0.5})})};a.fn.desactivarTransparencias=function(b){b.css("zIndex",100);a(".destinoArrastrarComponent",b.parent()).each(function(){a(this).css({zIndex:0,zoom:1,filter:"alpha(opacity=100)",opacity:1})})};a.fn.checkComprobar=function(b){var c=true;var d=false;a(".destinoArrastrarComponent",b).each(function(){if(a(this).data("$content")!=null){d=true}if(a(this).data("$content")==null){c=false}});if(CONFIG.esperarCompletoArrastrar){if(c){a(".comprobarComponent",b).addClass("active")}}else{if(d){a(".comprobarComponent",b).addClass("active")}}}})(jQuery);
(function(a){a.fn.paintArrow=function(b){var f,i,e,h;var d=document.createElement("div");var c=document.createElement("div");var g={color:"#DEDEDE",stroke:3};a(d).attr({id:"divArrow_"+a(".activeArrow",a(b).parent()).attr("id")+"_"+a(b).attr("id")}).css({position:"absolute"}).addClass("arrowLine");if(parseInt(a(".activeArrow",a(b).parent()).css("top"))<parseInt(a(".activeDestino",a(b).parent()).css("top"))){f=parseInt(a(".activeArrow",a(b).parent()).css("top"))+(parseInt(a(".activeArrow",a(b).parent()).css("height"))/2);i=parseInt(a(".activeDestino",a(b).parent()).css("top"))+(parseInt(a(".activeDestino",a(b).parent()).css("height"))/2);e=parseInt(a(".activeArrow",a(b).parent()).css("left"))+(parseInt(a(".activeArrow",a(b).parent()).css("width"))/2);h=parseInt(a(".activeDestino",a(b).parent()).css("left"))+parseInt(a(".activeDestino",a(b).parent()).css("width"));if(i-f<g.stroke){divHeight=0}else{divHeight=i-f}a(d).css({top:f-g.stroke/2,left:e,width:parseInt(a(".activeDestino",a(b).parent()).css("left"))+(parseInt(a(".activeDestino",a(b).parent()).css("width"))/2)-e,height:divHeight+g.stroke+"px"});a(d).drawLine(0,g.stroke/2,parseInt(a(d).css("width")),parseInt(a(d).css("height"))-g.stroke/2,g)}else{f=parseInt(a(".activeDestino",a(b).parent()).css("top"))+(parseInt(a(".activeDestino",a(b).parent()).css("height"))/2);i=parseInt(a(".activeArrow",a(b).parent()).css("top"))+(parseInt(a(".activeArrow",a(b).parent()).css("height"))/2);e=parseInt(a(".activeDestino",a(b).parent()).css("left"))+parseInt(a(".activeDestino",a(b).parent()).css("width"));h=parseInt(a(".activeArrow",a(b).parent()).css("left"))+(parseInt(a(".activeArrow",a(b).parent()).css("width"))/2);if(i-f<g.stroke){divHeight=0}else{divHeight=i-f-g.stroke/2}a(d).css({top:f+g.stroke/2,left:h,width:parseInt(a(".activeDestino",a(b).parent()).css("left"))+(parseInt(a(".activeDestino",a(b).parent()).css("width"))/2)-h,height:divHeight+g.stroke+"px"});a(d).drawLine(0,parseInt(a(d).css("height"))-g.stroke/2,parseInt(a(d).css("width")),g.stroke/2,g)}a(b).parent().append(d);a(b).parent().append(c)};a.fn.paintArrowDestino=function(i,e,b){var g,h,d,c;var k=document.createElement("div");var j=document.createElement("div");var f={color:b,stroke:3};a(k).attr({id:"divArrow_"+a(e).attr("id")+"_"+a(i).attr("id")}).css({position:"absolute"}).addClass("arrowLine");if(parseInt(a(e).css("top"))<parseInt(a(i).css("top"))){g=parseInt(a(e).css("top"))+(parseInt(a(e).css("height"))/2);h=parseInt(a(i).css("top"))+(parseInt(a(i).css("height"))/2);d=parseInt(a(e).css("left"))+(parseInt(a(e).css("width"))/2);c=parseInt(a(i).css("left"))+parseInt(a(i).css("width"));if(h-g<f.stroke){divHeight=0}else{divHeight=h-g}a(k).css({top:g-f.stroke/2,left:d,width:parseInt(a(i).css("left"))+(parseInt(a(i).css("width"))/2)-d,height:divHeight+f.stroke+"px"});a(k).drawLine(0,f.stroke/2,parseInt(a(k).css("width")),parseInt(a(k).css("height"))-f.stroke/2,f)}else{g=parseInt(a(i).css("top"))+(parseInt(a(i).css("height"))/2);h=parseInt(a(e).css("top"))+(parseInt(a(e).css("height"))/2);d=parseInt(a(i).css("left"))+parseInt(a(i).css("width"));c=parseInt(a(e).css("left"))+(parseInt(a(e).css("width"))/2);if(h-g<f.stroke){divHeight=0}else{divHeight=h-g-f.stroke/2}a(k).css({top:g+f.stroke/2,left:c,width:parseInt(a(i).css("left"))+(parseInt(a(i).css("width"))/2)-c,height:divHeight+f.stroke+"px"});a(k).drawLine(0,parseInt(a(k).css("height"))-f.stroke/2,parseInt(a(k).css("width")),f.stroke/2,f)}a(i).parent().append(k);a(i).parent().append(j)}})(jQuery);
(function(a){a.fn.crucigrama=function(t){var l=this;var r=l.parent();var H={caseSensitive:false,containerClass:"divCrucigrama",letterClass:"letraComponent",numClass:"numPalabraComponent",letterClassCorrect:"correct",letterClassIncorrect:"incorrect",letterClassAnswer:"answer"};var x=a.extend({},H,t);var I=new Array();var B=new Array();var v=0;var e=function(){I=j();B=K();u();A();s();o();R();k();w();F();q();G();return l};var D=function(T,S){return(T==0)?0:(T-1)*S};var G=function(){var T=document.createElement("div");var S=x.containerClass+"_"+r.attr("id");var U=J();a(T).attr({id:S}).css({position:"absolute",left:U[0],top:U[1]}).addClass("."+x.containerClass);r.append(T);r.find("."+x.numClass).appendTo("#"+S);l.appendTo("#"+S)};var J=function(){var S=[0,0];l.each(function(){if(parseInt(a(this).attr("data-posicionEnPalabra"))==0){var aa=parseInt(a(this).attr("data-coordX"));var Z=parseInt(a(this).attr("data-coordY"));var W=parseInt(a(this).attr("data-leftPalabra"));var X=parseInt(a(this).attr("data-topPalabra"));var Y=30;var ab=2;var T=2;var V=W-((Y+T*2)*aa)-D(aa,ab);var U=X-((Y+T*2)*Z)-D(Z,ab);S=[V+"px",U+"px"];return false}});return S};var h=function(){r.find(".comprobarComponent").eq(0).removeClass("active");var S=r.find(".comprobarComponent").data("initialHtml");r.find(".comprobarComponent p").eq(0).html(S);r.find(".comprobarComponent").data("stateCrucigrama","check");r.find(".comprobarComponent").unbind("click.crucigrama");A()};var F=function(){var S=r;S.find(".nextAnswer").click(function(){if(a(this).hasClass("active")){if(!a(this).hasClass("showed")){g(S);a(this).addClass("showed");S.find(".reiniciaComponent").removeClass("desactive");C()}O(S)}})};var q=function(){var S=r;S.find(".allAnswers").click(function(){if(a(this).hasClass("active")){g(S);C();y(S);a(this).removeClass("active");S.find(".reiniciaComponent").removeClass("desactive");S.find(".nextAnswer").removeClass("active")}})};var k=function(){r.find(".reiniciaComponent").eq(0).bind("click",function(){if(a(this).attr("class").indexOf("desactive")==-1){g();a(this).addClass("desactive")}})};var o=function(){var S=r;S.find(".nuevoIntentoComponent").click(function(){if(a(this).attr("class").indexOf("active")!=-1){i();a(this).removeClass("active");w()}})};var w=function(){l.each(function(){if(a(this).attr("class").indexOf("example")!=-1){a(this).data("respuesta",a(this).val());a(this).val(a(this).data("letra"))}});a.each(B,function(S,T){if(a("#"+T[0]).is(".example")||a("#"+T[1]).is(".example")){a("#"+T[0]).val(a("#"+T[0]).data("letra"));a("#"+T[1]).val(a("#"+T[1]).data("letra"))}})};var g=function(){c();h();l.each(function(){a(this).data("respuesta"," ");a(this).val(" ")});l.removeClass(x.letterClassIncorrect);M();w();r.find(".feedbackComponent").fadeOut();r.find(".solutionComponent").removeClass("active");r.find(".nuevoIntentoComponent").removeClass("active");r.find(".comprobarComponent").removeClass("active");r.find(".comprobarComponent").attr("intentos",2);a(this).addClass("desactive")};var i=function(){h();l.each(function(){if(a(this).attr("class").indexOf(x.letterClassIncorrect)!=-1){a(this).data("respuesta"," ");a(this).val(" ")}});l.removeClass(x.letterClassIncorrect);M();r.find(".feedbackComponent").fadeOut()};var m=function(){var S=0;l.each(function(){if(a(this).val()!=""){S++}});return S};var C=function(){l.attr("disabled",true)};var M=function(){l.removeAttr("disabled")};var s=function(){var S=r;S.find(".solutionComponent").click(function(){if(a(this).attr("class").indexOf("active")!=-1){y(S);a(this).removeClass("active")}})};var R=function(){r.find(".closeButton").click(function(){r.find(".feedbackComponent").fadeOut()})};var L=function(){var U=new Array();a(".numPalabraComponent",r).each(function(){var Y=a(this).attr("id").split("_")[1];U.push(Y)});var T="";for(var V=0;V<U.length;V++){var X=U[V];var W=V+1;var S=W+".";a(".letraComponent",r).each(function(){var Y=a(this).attr("id").split("_")[1];if(X==Y){S+=a(this).val()}});T+=S+" "}return T};var n=function(){var U=new Array();a(".numPalabraComponent",r).each(function(){var Y=a(this).attr("id").split("_")[1];U.push(Y)});var T="";for(var V=0;V<U.length;V++){var X=U[V];var W=V+1;var S=W+".";a(".letraComponent",r).each(function(){var Y=a(this).attr("id").split("_")[1];if(X==Y){S+=a(this).data("letra")}});T+=S+" "}return T};var A=function(){var S=r;l.each(function(){a(this).bind("keyup",function(){if(m()>0){r.find(".comprobarComponent").eq(0).addClass("active")}})});S.find(".comprobarComponent").click(function(){if(a(this).attr("class").indexOf("active")!=-1){var Y=d(S);C();a(this).removeClass("active");S.find(".feedback").fadeOut();if(Y){S.find(".act_positivo").fadeIn();S.find(".reiniciaComponent").removeClass("desactive")}else{var U=a(this).attr("intentos");if(U==1){S.find(".act_negativo").fadeIn();S.find(".reiniciaComponent").removeClass("desactive");S.find(".solutionComponent").addClass("active")}else{S.find(".nuevoIntentoComponent").addClass("active");S.find(".act_medio").fadeIn();a(this).attr("intentos",U-1)}}a(this).eq(0).data("initialHtml",a("p",a(this)).eq(0).html());var V=getID(6);var T="100";if(Y!=true){T=Q()}z();sRespuesta=L();sTipoSeguimiento="likert";var X="1";sRespuestaCorrecta=n();var W=(Y==true);if(TrackingConfig.type!="none"){setInteracion(X,sTipoSeguimiento,sRespuesta,W,V,0,T,sRespuestaCorrecta)}}})};var y=function(){E(x.letterClassAnswer);l.each(function(){a(this).data("respuesta",a(this).val());a(this).val(a(this).data("letra"))})};var p=function(){l.each(function(){a(this).val(a(this).data("respuesta"))});z()};var c=function(){l.removeClass(x.letterClassCorrect+" "+x.letterClassIncorrect+" "+x.letterClassAnswer)};var E=function(S){c();l.addClass(S)};var P=function(S){l.each(function(){if(a(this).data("numero")==numero){a(this).addClass(S)}})};var d=function(){var S=true;E(x.letterClassIncorrect);l.each(function(){var X=a(this);var U=(x.caseSensitive)?X.data("letra"):String(X.data("letra")).toLowerCase();var W=(x.caseSensitive)?X.val():X.val().toLowerCase();if(U==W){var T=new Array();var V=true;l.each(function(){var aa=a(this);if(X.data("numero")==aa.data("numero")){var Y=(x.caseSensitive)?aa.data("letra"):String(aa.data("letra")).toLowerCase();var Z=(x.caseSensitive)?aa.val():aa.val().toLowerCase();T.push(aa);if(Y!=Z){V=false;isGameOk=false}}});if(V){a.each(T,function(Y,Z){a(T[Y]).removeClass(x.letterClassIncorrect);a(T[Y]).addClass(x.letterClassCorrect)})}}else{S=false}});return S};var f=function(){var S=r.find(".numPalabraComponent").length;var Z=new Array();r.find(".numPalabraComponent").each(function(){var ab=a(this).attr("id").split("_")[1];Z.push(ab)});var T="";var W="";for(var V=0;V<Z.length;V++){var Y=Z[V];var U=V+1;var aa=U+".";var X=U+".";a(".letraComponent",r).each(function(){var ab=a(this).attr("id").split("_")[1];if(Y==ab){aa+=a(this).val();X+=a(this).data("letra")}});T+=aa+" ";W+=X+" "}return T};var Q=function(){var S=r.find(".numPalabraComponent").length;var X=0;var ab=new Array();r.find(".numPalabraComponent").each(function(){var ac=a(this).attr("id").split("_")[1];ab.push(ac)});var T="";var W="";for(var V=0;V<ab.length;V++){var Z=ab[V];var U=V+1;var aa=U+".";var Y=U+".";a(".letraComponent",r).each(function(){var ac=a(this).attr("id").split("_")[1];if(Z==ac){aa+=a(this).val();Y+=a(this).data("letra")}});if(aa.toLowerCase()==Y.toLowerCase()){X++}}return Math.round((X/S)*100)};var z=function(){var S=d();a.each(B,function(T,U){if(a("#"+U[0]).is(".correct")||a("#"+U[1]).is(".correct")){a("#"+U[0]).removeClass(x.letterClassIncorrect);a("#"+U[0]).addClass(x.letterClassCorrect);a("#"+U[1]).removeClass(x.letterClassIncorrect);a("#"+U[1]).addClass(x.letterClassCorrect)}})};var K=function(){var T=new Array();var S=new Array();a(l).each(function(){var U=a(this);a(l).each(function(){var Z=a(this);var W=parseInt(U.attr("data-coordX"));var V=parseInt(U.attr("data-coordY"));var Y=parseInt(Z.attr("data-coordX"));var X=parseInt(Z.attr("data-coordY"));if(U.attr("id")!=Z.attr("id")&&W==Y&&V==X&&a.inArray(U.attr("id"),S)==-1&&a.inArray(Z.attr("id"),S)==-1){S.push(U.attr("id"));S.push(Z.attr("id"));T.push([U.attr("id"),Z.attr("id")])}})});return T};var j=function(){var T=new Array();l.each(function(){T.push(a(this))});T.sort(N);var S=new Array();a.each(T,function(U,V){S.push(V.attr("id"))});return S};var N=function(U,S){var X=0;var Y=parseInt(U.attr("data-numero"));var T=parseInt(S.attr("data-numero"));if(Y<T){X=-1}else{if(Y>T){X=1}else{if(Y==T){var W=parseInt(U.attr("data-posicionEnPalabra"));var V=parseInt(S.attr("data-posicionEnPalabra"));if(W<V){X=-1}else{if(W>V){X=1}else{X=0}}}}}return X};var b=function(T){var S=false;a.each(B,function(V,U){if(U[0]==T){S=U[1]}else{if(U[1]==T){S=U[0]}}});return S};var u=function(){a.each(B,function(T,S){var U=B[T][0];a("#"+U).css("background-color","transparent");a("#"+U).css("color","transparent")});a.each(I,function(S,T){a("#"+T).bind("keypress",function(Y){var X=[9,16,17,18,19,20,27,33,34,35,36,37,38,40,46,144,145,222];Y.preventDefault();Y.stopPropagation();if(a.inArray(Y.which,X)==-1){if(Y.which==8){a(this).val("");var V=b(a(this).attr("id"));if(V){a("#"+V).val(a(this).val())}if(CONFIG.typeDevice!="ipad"){if(S==0){a("#"+I[I.length-1]).focus()}else{a("#"+I[S-1]).focus()}}}else{if(Y.which!=0){var U=Y.keyCode?Y.keyCode:Y.charCode;a(this).val(String.fromCharCode(U));var W=b(a(this).attr("id"));if(W){a("#"+W).val(a(this).val())}}if(CONFIG.typeDevice!="ipad"){if(S<I.length-1){a("#"+I[S+1]).focus()}else{a("#"+I[0]).focus()}}}}})})};function O(){var S=new Array();a(".numPalabraComponent",r).each(function(){var W=a(this).attr("id").split("_")[1];S.push(W)});for(var U=0;U<S.length;U++){if(U==v){var V=S[U];a(".letraComponent",r).each(function(){var X=a(this).attr("id").split("_")[1];if(V==X){var W=a(this).attr("id");var Y=a(this).data("letra");a(this).val(Y);a(this).addClass("answer");a.each(B,function(aa,Z){var ac=B[aa][0];if(ac==W){var ab=B[aa][1];a("#"+ab).val(Y);a("#"+ab).addClass("answer")}})}});if(v==S.length-1){r.find(".nextAnswer").removeClass("active");r.find(".allAnswers").removeClass("active")}v++;return}}function T(W){W.find(".nextAnswer").removeClass("showed");v=0;W.find(".nextAnswer").removeClass("active").addClass("active");W.find(".allAnswers").removeClass("active").addClass("active")}}return e()}})(jQuery);